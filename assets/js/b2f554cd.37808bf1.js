"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5894],{6042:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"restassured-json","metadata":{"permalink":"/blog/restassured-json","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2023-04-21-restassured-json.md","source":"@site/blog/2023-04-21-restassured-json.md","title":"(RestAssured) Match JSON Ignoring Order","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2023-04-21T00:00:00.000Z","formattedDate":"April 21, 2023","tags":[{"label":"Java","permalink":"/blog/tags/java"},{"label":"Testing","permalink":"/blog/tags/testing"}],"readingTime":0.75,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"restassured-json","title":"(RestAssured) Match JSON Ignoring Order","authors":"jiaqi","tags":["Java","Testing"]},"unlisted":false,"nextItem":{"title":"Provider v.s. @Provider","permalink":"/blog/provider"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nUse RestAssured\'s JsonPath to parse the JSON file into a Map and then compare it with Hamcrest Matchers. This way the\\norder didn\'t matter.\\n\\n```java\\nimport static org.hamcrest.Matchers.equalTo;\\nimport io.restassured.path.json.JsonPath;\\n\\n...\\n\\nJsonPath expectedJson = new JsonPath(new File(\\"/path/to/expected.json\\"));\\n\\ngiven()\\n    ...\\n    .then()\\n    .body(\\"\\", equalTo(expectedJson.getMap(\\"\\")));\\n```"},{"id":"provider","metadata":{"permalink":"/blog/provider","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2022-09-24-provider.md","source":"@site/blog/2022-09-24-provider.md","title":"Provider v.s. @Provider","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2022-09-24T00:00:00.000Z","formattedDate":"September 24, 2022","tags":[{"label":"Java","permalink":"/blog/tags/java"}],"readingTime":1.045,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"provider","title":"Provider v.s. @Provider","authors":"jiaqi","tags":["Java"]},"unlisted":false,"prevItem":{"title":"(RestAssured) Match JSON Ignoring Order","permalink":"/blog/restassured-json"},"nextItem":{"title":"Bearer Authentication","permalink":"/blog/bearer-authentication"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nA **Provider** is an interface defined in [JSR 330][JSR 330 Provider]. It is part of the _general_ dependency\\ninjection concept in Java.\\n\\nWhether we are on Java SR or EE, Provider will always be loadable from classpath. For example, the [HK2] is an\\nimplementation of JSR-330 in a JavaSE environment and it conforms to the JSR 330 standard by loading the\\n[Provider][JSR 330 Provider] in its implementations.\\n\\n**@Provider**, on the other hand, is a\\n[_Java EE/Jakarta EE concept_](https://github.com/jakartaee/rest/blob/master/jaxrs-api/src/main/java/jakarta/ws/rs/ext/Provider.java).\\nIf we are developing Java EE applications, we can use both (`Provider` & `@Provider`) at the same time.\\n\\n[JSR 330 Provider]: https://qubitpi.github.io/javax-inject/api/javax/inject/Provider.html\\n[HK2]: https://qubitpi.github.io/glassfish-hk2/"},{"id":"bearer-authentication","metadata":{"permalink":"/blog/bearer-authentication","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2022-09-12-bearer-authentication.md","source":"@site/blog/2022-09-12-bearer-authentication.md","title":"Bearer Authentication","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2022-09-12T00:00:00.000Z","formattedDate":"September 12, 2022","tags":[{"label":"Security","permalink":"/blog/tags/security"}],"readingTime":1.17,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"bearer-authentication","title":"Bearer Authentication","authors":"jiaqi","tags":["Security"]},"unlisted":false,"prevItem":{"title":"Provider v.s. @Provider","permalink":"/blog/provider"},"nextItem":{"title":"Tired of Null Pointer Exceptions? Consider Using Java SE 8\'s \\"Optional\\"","permalink":"/blog/java-optional"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\n**Bearer authentication** (also called **token authentication**) is an\\n[HTTP authentication scheme][HTTP authentication scheme] that involves security tokens called bearer tokens. The name\\n\\"Bearer authentication\\" can be understood as \\"give access to the bearer of this token.\\" The bearer token is a cryptic\\nstring, usually generated by the server in response to a login request. The client must send this token in the\\n`Authorization` header when making requests to protected resources:\\n\\n```bash\\nAuthorization: Bearer <token>\\n```\\n\\nThe Bearer authentication scheme was originally created as part of [OAuth 2.0][OAuth 2.0] in [RFC 6750][RFC 6750], but\\nis sometimes also used on its own. Similarly to [Basic authentication][Basic authentication], Bearer authentication\\nshould only be used over HTTPS (SSL).\\n\\n[RFC 6750]: https://tools.ietf.org/html/rfc6750\\n[OAuth 2.0]: https://swagger.io/docs/specification/authentication/oauth2/\\n[HTTP authentication scheme]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication\\n[Basic authentication]: https://swagger.io/docs/specification/authentication/basic-authentication/"},{"id":"java-optional","metadata":{"permalink":"/blog/java-optional","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2022-09-07-java-optional/index.md","source":"@site/blog/2022-09-07-java-optional/index.md","title":"Tired of Null Pointer Exceptions? Consider Using Java SE 8\'s \\"Optional\\"","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2022-09-07T00:00:00.000Z","formattedDate":"September 7, 2022","tags":[{"label":"Java","permalink":"/blog/tags/java"}],"readingTime":11.495,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"java-optional","title":"Tired of Null Pointer Exceptions? Consider Using Java SE 8\'s \\"Optional\\"","authors":"jiaqi","tags":["Java"]},"unlisted":false,"prevItem":{"title":"Bearer Authentication","permalink":"/blog/bearer-authentication"},"nextItem":{"title":"Happy Path","permalink":"/blog/happy-path"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\nMake your code more readable and protect it against null pointer exceptions.\\n\\n\x3c!--truncate--\x3e\\n\\nA wise man once said you are not a real Java programmer until you\'ve dealt with a null pointer exception. Joking aside,\\nthe null reference is the source of many problems because it is often used to denote the absence of a value. Java SE 8\\nintroduces a new class called **java.util.Optional** that can alleviate some of these problems.\\n\\nDangers of Null\\n---------------\\n\\nLet\'s start with an example to see the dangers of null by considering a nested object structure for a `Computer`, as\\nillustrated in Figure below\\n\\n![Error loading java-optional-computer.png](java-optional-computer.png)\\n\\nWhat\'s possibly problematic with the following code?\\n\\n```java\\nString version = computer.getSoundcard().getUSB().getVersion();\\n```\\n\\nThis code looks pretty reasonable. However, many computers (for example, the Raspberry Pi) don\'t actually ship with a\\nsound card. So what is the result of `getSoundcard()`?\\n\\nA common (bad) practice is to return the null reference to indicate the absence of a sound card. Unfortunately, this\\nmeans the call to `getUSB()` will try to return the USB port of a null reference, which will result in a\\n`NullPointerException` at runtime and stop your program from running further. Imagine if your program was running on a\\ncustomer\'s machine; what would your customer say if the program suddenly failed?\\n\\nTo give some historical context, Tony Hoare - one of the giants of computer science - wrote, \\"I call it my\\nbillion-dollar mistake. It was the invention of the null reference in 1965. I couldn\'t resist the temptation to put in\\na null reference, simply because it was so easy to implement.\\"\\n\\nWhat can you do to prevent unintended null pointer exceptions? You can be defensive and add checks to prevent null\\ndereferences, as shown below:\\n\\n```java\\nString version = \\"UNKNOWN\\";\\nif (computer != null) {\\n    Soundcard soundcard = computer.getSoundcard();\\n    if(soundcard != null){\\n        USB usb = soundcard.getUSB();\\n        if(usb != null){\\n            version = usb.getVersion();\\n        }\\n    }\\n}\\n```\\n\\nHowever, you can see that the code quickly becomes very ugly due to the nested checks. Unfortunately, we need a lot of\\nboilerplate code to make sure we don\'t get a NullPointerException. In addition, it\'s just annoying that these checks get\\nin the way of the business logic. In fact, they are decreasing the overall readability of our program.\\n\\nFurthermore, it is an error-prone process; what if you forget to check that one property could be null? I will argue in\\nthis post that using null to represent the absence of a value is a wrong approach. What we need is a better way to\\nmodel the absence and presence of a value.\\n\\nTo give some context, let\'s briefly look at what other programming languages have to offer.\\n\\nWhat Alternatives to Null Are There\\n-----------------------------------\\n\\nLanguages such as Groovy have a _safe navigation operator_ represented by \\"?.\\" to safely navigate through potential\\nnull references. (Note that it is soon to be included in C#, too, and it was proposed for Java SE 7 but didn\'t make it\\ninto that release.) It works as follows:\\n\\n```groovy\\nString version = computer?.getSoundcard()?.getUSB()?.getVersion()\\n```\\n\\nIn this case, the variable \\"version\\" will be assigned to null if `computer` is null, or `getSoundcard()` returns null,\\nor `getUSB()` returns null. You don\'t need to write complex nested conditions to check for null.\\n\\nIn addition, Groovy also includes the _Elvis operator_ \\"?:\\" (if you look at it sideways, you\'ll recognize Elvis\' famous\\nhair), which can be used for simple cases when a default value is needed. In the following, if the expression that uses\\nthe safe navigation operator returns null, the default value \\"UNKNOWN\\" is returned; otherwise, the available version\\ntag is returned.\\n\\n```groovy\\nString version = computer?.getSoundcard()?.getUSB()?.getVersion() ?: \\"UNKNOWN\\"\\n```\\n\\nOther functional languages, such as Haskell and Scala, take a different view. Haskell includes a **Maybe** type, which\\nessentially encapsulates an optional value. A value of type Maybe can contain either a value of a given type or\\nnothing. There is no concept of a null reference. Scala has a similar construct called **Option\\\\[T\\\\]** to encapsulate\\nthe presence or absence of a value of type `T`. You then have to explicitly check whether a value is present or not\\nusing operations available on the `Option` type, which enforces the idea of \\"null checking.\\" **You can no longer\\n\\"forget to do it\\" because it is enforced by the type system**.\\n\\nJava 8 _Optional_ in a Nutshell\\n-------------------------------\\n\\nJava SE 8 introduces a new class called `java.util.Optional<T>` that is inspired from the ideas of Haskell and Scala.\\nIt is a class that encapsulates an optional value, as illustrated in figure below. You can view `Optional` as a\\nsingle-value container that either contains a value or doesn\'t (it is then said to be \\"empty\\"):\\n\\n![Error loading java-optional-eg.png](java-optional-eg.png)\\n\\nWe can update our model to make use of Optional, as shown in Listing 2:\\n\\n```java\\npublic class Computer {\\n    private Optional<Soundcard> soundcard;\\n    public Optional<Soundcard> getSoundcard() { ... }\\n    ...\\n}\\n\\npublic class Soundcard {\\n    private Optional<USB> usb;\\n    public Optional<USB> getUSB() { ... }\\n}\\n\\npublic class USB {\\n    public String getVersion(){ ... }\\n}\\n```\\n\\nThe code above immediately shows that a computer might or might not have a sound card (the sound card is optional). In\\naddition, a sound card can optionally have a USB port. This is an improvement, because this new model can now reflect\\nclearly whether a given value is allowed to be missing.\\n\\nBut what can you actually do with an `Optional<Soundcard>` object? After all, you want to get to the USB port\'s version\\nnumber. In a nutshell, the `Optional` class includes methods to explicitly deal with the cases where a value is present\\nor absent. However, the advantage compared to null references is that the `Optional` class forces us to think about the\\ncase when the value is not present. As a consequence, we can prevent unintended null pointer exceptions.\\n\\nIt is important to note that the intention of the `Optional` class is not to replace every single null reference.\\nInstead, its purpose is to help design more-comprehensible APIs so that by just reading the signature of a method, you\\ncan tell whether you can expect an optional value. This forces you to actively unwrap an `Optional` to deal with the\\nabsence of a value.\\n\\nUsing Optional\\n--------------\\n\\nThe Groovy code above can be written with Optional in Java as\\n\\n```java\\nString name = computer.flatMap(Computer::getSoundcard)\\n        .flatMap(Soundcard::getUSB)\\n        .map(USB::getVersion)\\n        .orElse(\\"UNKNOWN\\");\\n```\\n\\n### Creating Optional Objects\\n\\nFirst, how do you create Optional objects? There are several ways:\\n\\nHere is an empty Optional:\\n\\n```java\\nOptional<Soundcard> sc = Optional.empty();\\n```\\n\\nAnd here is an `Optional` with a non-null value:\\n\\n```java\\nOptional<Soundcard> sc = Optional.of(new Soundcard());\\n```\\n\\nIn the case above, if soundcard were null, a NullPointerException would be immediately thrown (rather than getting a\\nlatent error once you try to access properties of the soundcard)\\n\\nBy using **ofNullable**, however, you can create an Optional object that may hold a null value:\\n\\n```java\\nOptional<Soundcard> sc = Optional.ofNullable(soundcard);\\n```\\n\\nIf soundcard were null, the resulting `Optional` object would be empty.\\n\\n### Do Something If a Value Is Present\\n\\nNow that you have an Optional object, you can access the methods available to explicitly deal with the presence or\\nabsence of values. Instead of having to remember to do a null check, as follows:\\n\\n```java\\nSoundCard soundcard = ...;\\nif(soundcard != null){\\n    System.out.println(soundcard);\\n}\\n```\\n\\nYou can use the **ifPresent()** method, as follows:\\n\\n```java\\nOptional<Soundcard> soundcard = ...;\\nsoundcard.ifPresent(System.out::println);\\n```\\n\\nYou no longer need to do an explicit null check; it is enforced by the type system. If the Optional object were empty,\\nnothing would be printed.\\n\\nYou can also use the **isPresent()** method to find out whether a value is present in an Optional object. In addition,\\nthere\'s a **get()** method that returns the value contained in the Optional object, if it is present. _Otherwise,\\nit throws a NoSuchElementException_. The two methods can be combined, as follows, to prevent exceptions:\\n\\n```java\\nif(soundcard.isPresent()){\\n    System.out.println(soundcard.get());\\n}\\n```\\n\\nHowever, this is not the recommended use of Optional because it\'s not much of an improvement over nested null checks,\\nand there are more idiomatic alternatives, which we explore below.\\n\\n### Default Values and Actions\\n\\nA typical pattern is to return a default value if you determine that the result of an operation is null. In general,\\nyou can use the ternary operator, as follows, to achieve this:\\n\\n```java\\nSoundcard soundcard = maybeSoundcard != null ? maybeSoundcard : new Soundcard(\\"basic_sound_card\\");\\n```\\n\\nUsing an Optional object, you can rewrite this code by using the **orElse()** method, which provides a default value if\\nOptional is empty:\\n\\n```java\\nSoundcard soundcard = maybeSoundcard.orElse(new Soundcard(\\"defaut\\"));\\n```\\n\\nSimilarly, you can use the **orElseThrow()** method, which instead of providing a default value if Optional is empty,\\nthrows an exception:\\n\\n```java\\nSoundcard soundcard = maybeSoundCard.orElseThrow(IllegalStateException::new);\\n```\\n\\n### Rejecting Certain Values Using the filter Method\\n\\nOften you need to call a method on an object and check some property. For example, you might need to check whether the\\nUSB port is a particular version. To do this in a safe way, you first need to check whether the reference pointing to a\\nUSB object is null and then call the `getVersion()` method, as follows:\\n\\n```java\\nUSB usb = ...;\\nif(usb != null && \\"3.0\\".equals(usb.getVersion())){\\n    System.out.println(\\"ok\\");\\n}\\n```\\n\\nThis pattern can be rewritten using the **filter** method on an Optional object, as follows:\\n\\n```java\\nOptional<USB> maybeUSB = ...;\\nmaybeUSB.filter(usb -> \\"3.0\\".equals(usb.getVersion()).ifPresent(() -> System.out.println(\\"ok\\"));\\n```\\n\\nThe `filter` method takes a predicate as an argument. If a value is present in the `Optional` object and it matches the\\npredicate, the filter method returns that value; otherwise, it returns an empty `Optional` object.\\n\\n### Extracting and Transforming Values Using the map Method\\n\\nAnother common pattern is to extract information from an object. For example, from a `Soundcard` object, you might want\\nto extract the USB object and then further check whether it is of the correct version. You would typically write the\\nfollowing code:\\n\\n```java\\nif(soundcard != null){\\n    USB usb = soundcard.getUSB();\\n    if(usb != null && \\"3.0\\".equals(usb.getVersion()){\\n        System.out.println(\\"ok\\");\\n    }\\n}\\n```\\n\\nWe can rewrite this pattern of \\"checking for null and extracting\\" (here, the `Soundcard` object) using the map method.\\n\\n```java\\nOptional<USB> usb = maybeSoundcard.map(Soundcard::getUSB);\\n```\\n\\nThere\'s a direct parallel to the `map` method used with streams. There, you pass a function to the `map` method, which\\napplies this function to each element of a stream. However, nothing happens if the stream is empty. The `map` method of\\nthe `Optional` class does exactly the same: the value contained inside `Optional` is \\"transformed\\" by the function\\npassed as an argument (here, a method reference to extract the USB port), while nothing happens if `Optional` is empty.\\n\\nFinally, we can combine the `map` method with the `filter` method to reject a USB port whose version is different than\\n3.0:\\n\\n```java\\nmaybeSoundcard.map(Soundcard::getUSB)\\n        .filter(usb -> \\"3.0\\".equals(usb.getVersion())\\n        .ifPresent(() -> System.out.println(\\"ok\\"));\\n```\\n\\n### Cascading Optional Objects Using the flatMap Method\\n\\nWe\'ve seen a few patterns that can be refactored to use Optional. So how can we write the following code in a safe way?\\n\\n```java\\nString version = computer.getSoundcard().getUSB().getVersion();\\n```\\n\\nNotice that all this code does is extract one object from another one, which is exactly what the map method is for.\\nEarlier in the article, we changed our model so a Computer has an `Optional<Soundcard>` and a Soundcard has an\\n`Optional<USB>`, so we should be able to write the following:\\n\\n```java\\nString version = computer.map(Computer::getSoundcard)\\n        .map(Soundcard::getUSB)\\n        .map(USB::getVersion)\\n        .orElse(\\"UNKNOWN\\");\\n```\\n\\nUnfortunately, this code doesn\'t compile. Why? The variable computer is of type `Optional<Computer>`, so it is\\nperfectly correct to call the `map` method. However, `getSoundcard()` returns an object of type `Optional<Soundcard>`.\\nThis means the result of the `map` operation is an object of type `Optional<Optional<Soundcard>>`. As a result, the\\ncall to `getUSB()` is invalid because the outermost Optional contains as its value another Optional, which of course\\ndoesn\'t support the `getUSB()` method\\n\\nSo how can we solve this problem? Again, we can look at a pattern you might have used previously with streams: the\\n**flatMap** method. With streams, the `flatMap` method takes a function as an argument, which returns another stream.\\nThis function is applied to each element of a stream, which would result in a stream of streams. However, `flatMap` has\\nthe effect of replacing each generated stream by the contents of that stream. In other words, all the separate streams\\nthat are generated by the function get amalgamated or \\"flattened\\" into one single stream. What we want here is\\nsomething similar, but we want to \\"flatten\\" a two-level Optional into one.\\n\\nWell, here\'s good news: `Optional` also supports a `flatMap` method. Its purpose is to apply the transformation\\nfunction on the value of an `Optional` and then flatten the resulting two-level Optional into a single one.\\n\\nSo, to make our code correct, we need to rewrite it as follows using `flatMap`:\\n\\n```java\\nString version = computer.flatMap(Computer::getSoundcard)\\n        .flatMap(Soundcard::getUSB)\\n        .map(USB::getVersion)\\n        .orElse(\\"UNKNOWN\\");\\n```\\n\\nThe first flatMap ensures that an `Optional<Soundcard>` is returned instead of an `Optional<Optional<Soundcard>>`, and\\nthe second flatMap achieves the same purpose to return an `Optional<USB>`. Note that the third call just needs to be a\\nmap() because getVersion() returns a String rather than an `Optional` object."},{"id":"happy-path","metadata":{"permalink":"/blog/happy-path","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2022-07-03-happy-path.md","source":"@site/blog/2022-07-03-happy-path.md","title":"Happy Path","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2022-07-03T00:00:00.000Z","formattedDate":"July 3, 2022","tags":[{"label":"Testing","permalink":"/blog/tags/testing"}],"readingTime":1.76,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"happy-path","title":"Happy Path","authors":"jiaqi","tags":["Testing"]},"unlisted":false,"prevItem":{"title":"Tired of Null Pointer Exceptions? Consider Using Java SE 8\'s \\"Optional\\"","permalink":"/blog/java-optional"},"nextItem":{"title":"Defensive Copy","permalink":"/blog/defensive-copy"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\nIn the context of software or information modeling, a happy path (sometimes called happy flow) is a default scenario\\nfeaturing no exceptional or error conditions. For example, the happy path for a function validating credit card numbers\\nwould be where none of the validation rules raise an error, thus letting execution continue successfully to the end,\\ngenerating a positive response.\\n\\n\x3c!--truncate--\x3e\\n\\nProcess steps for a happy path are also used in the context of a [use case](https://en.wikipedia.org/wiki/Use_case). In\\ncontrast to the happy path, process steps for alternate paths and exception paths may also be documented.\\n\\nHappy path test is a well-defined test case using known input, which executes without exception and produces an expected\\noutput. Happy path testing can show that a system meets its functional requirements but it doesn\'t guarantee a graceful\\nhandling of error conditions or aid in finding hidden bugs.\\n\\n> Happy day (or sunny day) scenario and golden path are synonyms for happy path.\\n\\nIn use case analysis, there is only one happy path, but there may be any number of additional alternate path scenarios\\nwhich are all valid optional outcomes. If valid alternatives exist, the happy path is then identified as the default or\\nmost likely positive alternative. The analysis may also show one or more exception paths. An exception path is taken as\\nthe result of a fault condition. Use cases and the resulting interactions are commonly modeled in graphical languages\\nsuch as the Unified Modeling Language (UML) or SysML"},{"id":"defensive-copy","metadata":{"permalink":"/blog/defensive-copy","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2022-01-05-java-dc.md","source":"@site/blog/2022-01-05-java-dc.md","title":"Defensive Copy","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2022-01-05T00:00:00.000Z","formattedDate":"January 5, 2022","tags":[{"label":"Java","permalink":"/blog/tags/java"}],"readingTime":4.23,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"defensive-copy","title":"Defensive Copy","authors":"jiaqi","tags":["Java"]},"unlisted":false,"prevItem":{"title":"Happy Path","permalink":"/blog/happy-path"},"nextItem":{"title":"Understanding Weak References","permalink":"/blog/weak-references"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nA mutable object is simply an object which can change its state after construction. For example, `StringBuilder` and\\n`Date` are mutable objects, while `String` and `Integer` are immutable objects.\\n\\nA class may have a mutable object as a field. There are two possible cases for how the state of a mutable object field\\ncan change:\\n\\n1. its state can be changed only by the native class - the native class **creates the mutable object field**, and is the\\n   only class which is directly aware of its existence\\n2. its state can be changed both by the native class and by its callers - the native class simply **points to a mutable\\n   object** which was created elsewhere\\n\\nBoth cases are valid design choices, but you must be aware of which one is appropriate for each case.\\n\\n**If the _mutable_ object field\'s state should be changed only by the native class, then a defensive copy of the mutable\\nobject must be made any time it\'s passed into (constructors and set methods) or out of (\\"get\\" methods) the class**. If\\nthis is not done, then it\'s simple for the caller to break encapsulation, by changing the state of an object which is\\nsimultaneously visible to both the class and its caller.\\n\\n:::info\\n\\nIt is implied that the defensive copying is only required when the state is mutable\\n\\n:::\\n\\nFor example, `Planet` has a mutable object field `fDateOfDiscovery`, which is defensively copied in all constructors,\\nand in `getDateOfDiscovery`. `Planet` represents an immutable class, and has no \\"set\\" methods for its fields. Note that\\nif the defensive copy of `DateOfDiscovery` is not made, then `Planet` is no longer immutable!\\n\\n```java\\nimport java.util.Date;\\n\\n/**\\n* Planet is an immutable class, since there is no way to change\\n* its state after construction.\\n*/\\npublic final class Planet {\\n\\n    /**\\n     * Final primitive data is always immutable.\\n     */\\n    private final double mass;\\n\\n    /**\\n     * An immutable object field. (String objects never change state.)\\n     */\\n    private final String name;\\n\\n    /**\\n     * A mutable object field. In this case, the state of this mutable field\\n     * is to be changed only by this class. (In other cases, it makes perfect\\n     * sense to allow the state of a field to be changed outside the native\\n     * class; this is the case when a field acts as a \\"pointer\\" to an object\\n     * created elsewhere.)\\n     *\\n     * java.util.Date is used here only because its convenient for illustrating\\n     * a point about mutable objects. In new code, you should use\\n     * java.time classes, not java.util.Date.\\n     */\\n    private final Date dateOfDiscovery;\\n\\n    public Planet (double mass, String name, Date dateOfDiscovery) {\\n        this.mass = mass;\\n        this.name = name;\\n        //make a private copy of aDateOfDiscovery\\n        //this is the only way to keep the fDateOfDiscovery\\n        //field private, and shields this class from any changes that\\n        //the caller may make to the original aDateOfDiscovery object\\n        this.dateOfDiscovery = new Date(dateOfDiscovery.getTime());\\n    }\\n\\n    /**\\n    * Returns a primitive value.\\n    *\\n    * The caller can do whatever they want with the return value, without\\n    * affecting the internals of this class. Why? Because this is a primitive\\n    * value. The caller sees its \\"own\\" double that simply has the\\n    * same value as fMass.\\n    */\\n    public double getMass() {\\n        return mass;\\n    }\\n\\n    /**\\n    * Returns an immutable object.\\n    *\\n    * The caller gets a direct reference to the internal field. But this is not\\n    * dangerous, since String is immutable and cannot be changed.\\n    */\\n    public String getName() {\\n        return name;\\n    }\\n\\n//  /**\\n//  * Returns a mutable object - likely bad style.\\n//  *\\n//  * The caller gets a direct reference to the internal field. This is usually dangerous,\\n//  * since the Date object state can be changed both by this class and its caller.\\n//  * That is, this class is no longer in complete control of dateOfDiscovery.\\n//  */\\n//  public Date getDateOfDiscovery() {\\n//      return dateOfDiscovery;\\n//  }\\n\\n    /**\\n    * Returns a mutable object - good style.\\n    *\\n    * Returns a defensive copy of the field.\\n    * The caller of this method can do anything they want with the\\n    * returned Date object, without affecting the internals of this\\n    * class in any way. Why? Because they do not have a reference to\\n    * fDate. Rather, they are playing with a second Date that initially has the\\n    * same data as fDate.\\n    */\\n    public Date getDateOfDiscovery() {\\n        return new Date(dateOfDiscovery.getTime());\\n    }\\n}\\n```"},{"id":"weak-references","metadata":{"permalink":"/blog/weak-references","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2021-12-30-java-weak-reference.md","source":"@site/blog/2021-12-30-java-weak-reference.md","title":"Understanding Weak References","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2021-12-30T00:00:00.000Z","formattedDate":"December 30, 2021","tags":[{"label":"Java","permalink":"/blog/tags/java"}],"readingTime":8.545,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"weak-references","title":"Understanding Weak References","authors":"jiaqi","tags":["Java"]},"unlisted":false,"prevItem":{"title":"Defensive Copy","permalink":"/blog/defensive-copy"},"nextItem":{"title":"Querydsl - A Type-Safe Query Writer for Java","permalink":"/blog/querydsl"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nStrong References\\n-----------------\\n\\nA **strong reference** is an ordinary Java reference, the kind you use every day. For example, the code:\\n\\n```java\\nStringBuffer buffer = new StringBuffer();\\n```\\n\\ncreates a new `StringBuffer` and stores a strong reference to it in the variable `buffer`. Yes, yes, this is kiddie\\nstuff, but bear with me. _The important part about strong references -- the part that makes them \\"strong\\" -- is how they\\ninteract with the garbage collector_. Specifically, if an object is reachable via a chain of strong references (strongly\\nreachable), it is not eligible for garbage collection. As you don\'t want the garbage collector destroying objects you\'re\\nworking on, this is normally exactly what you want.\\n\\nWhen Strong References are Too Strong\\n-------------------------------------\\n\\nIt\'s not uncommon for an application to use classes that it can\'t reasonably extend. The class might simply be marked\\n`final`, or it could be something more complicated, such as an interface returned by a factory method backed by an\\nunknown (and possibly even unknowable) number of concrete implementations. Suppose you have to use a class `Widget` and,\\nfor whatever reason, it isn\'t possible or practical to extend `Widget` to add new functionality.\\n\\nWhat happens when you need to keep track of extra information about the object? In this case, suppose we find ourselves\\nneeding to keep track of each Widget\'s serial number, but the Widget class doesn\'t actually have a serial number\\nproperty -- and because Widget isn\'t extensible, we can\'t add one. No problem at all, that\'s what `HashMaps` are for:\\n\\n```java\\nserialNumberMap.put(widget, widgetSerialNumber);\\n```\\n\\nThis might look okay on the surface, but the strong reference to widget will almost certainly cause problems. We have to\\nknow (with 100% certainty) when a particular Widget\'s serial number is no longer needed, so we can remove its entry from\\nthe map. Otherwise we\'re going to have a memory leak (if we don\'t remove Widgets when we should) or we\'re going to\\ninexplicably find ourselves missing serial numbers (if we remove Widgets that we\'re still using). If these problems\\nsound familiar, they should: they are exactly the problems that users of non-garbage-collected languages face when\\ntrying to manage memory, and we\'re not supposed to have to worry about this in a more civilized language like Java.\\n\\nAnother common problem with strong references is caching, particular with very large structures like images. Suppose you\\nhave an application which has to work with user-supplied images, like the web site design tool I work on. Naturally you\\nwant to cache these images, because loading them from disk is very expensive and you want to avoid the possibility of\\nhaving two copies of the (potentially gigantic) image in memory at once. Because an image cache is supposed to prevent\\nus from reloading images when we don\'t absolutely need to, you will quickly realize that the cache should always contain\\na reference to any image which is already in memory. With ordinary strong references, though, that reference itself will\\nforce the image to remain in memory, which requires you (just as above) to somehow determine when the image is no longer\\nneeded in memory and remove it from the cache, so that it becomes eligible for garbage collection. Once again you are\\nforced to duplicate the behavior of the garbage collector and manually determine whether or not an object should be in\\nmemory.\\n\\nWeak References\\n---------------\\n\\nA **weak reference**, simply put, is a reference that isn\'t strong enough to force an object to remain in memory. Weak\\nreferences allow you to leverage the garbage collector\'s ability to determine reachability for you, so you don\'t have to\\ndo it yourself. You create a weak reference like this:\\n\\n```java\\nWeakReference weakWidget = new WeakReference(widget);\\n```\\n\\nand then elsewhere in the code you can use `weakWidget.get()` to get the actual Widget object. Of course the weak\\nreference isn\'t strong enough to prevent garbage collection, so you may find (if there are no strong references to the\\nwidget) that `weakWidget.get()` suddenly starts returning `null`.\\n\\nTo solve the \\"widget serial number\\" problem above, the easiest thing to do is use the built-in `WeakHashMap` class.\\n`WeakHashMap` works exactly like `HashMap`, except that the keys (not the values!) are referred to using weak\\nreferences. If a `WeakHashMap` key becomes garbage, its entry is removed automatically. This avoids the pitfalls\\ndescribed earlier and requires no changes other than the switch from `HashMap` to a `WeakHashMap`. If you\'re following\\nthe standard convention of referring to your maps via the Map interface, no other code needs to even be aware of the\\nchange.\\n\\nReference Queues\\n----------------\\n\\nOnce a `WeakReference` starts returning `null`, the object it pointed to has become garbage and the `WeakReference`\\nobject is pretty much useless. This generally means that some sort of cleanup is required; `WeakHashMap`, for example,\\nhas to remove such defunct entries to avoid holding onto an ever-increasing number of dead `WeakReferences`.\\n\\nThe `ReferenceQueue` class makes it easy to keep track of dead references. If you pass a `ReferenceQueue` into a weak\\nreference\'s constructor, the reference object will be automatically inserted into the reference queue when the object to\\nwhich it pointed becomes garbage. You can then, at some regular interval, process the `ReferenceQueue` and perform\\nwhatever cleanup is needed for dead references.\\n\\nDifferent Degrees of Weakness\\n-----------------------------\\n\\nUp to this point I\'ve just been referring to \\"weak references\\", but there are actually **4 degrees of reference\\nstrength** (in order from strongest to weakest):\\n\\n1. strong\\n2. soft\\n3. weak\\n4. phantom\\n\\nWe\'ve already discussed strong and weak references, so let\'s take a look at the other two.\\n\\nSoft References\\n---------------\\n\\nA **soft reference** is exactly like a weak reference, except that it is less eager to throw away the object to which it\\nrefers. An object which is only weakly reachable will be discarded at the next garbage collection cycle, but an object\\nwhich is softly reachable will generally stick around for a while.\\n\\nSoft references aren\'t required to behave any differently than weak references, but in practice softly reachable objects\\nare generally retained as long as memory is in plentiful supply. **This makes them an excellent foundation for a\\ncache**, such as the image cache described above, since you can let the garbage collector worry about both how reachable\\nthe objects are and how badly it needs the memory they are consuming.\\n\\nPhantom References\\n------------------\\n\\nA **phantom reference** is quite different than either soft reference or weak reference. Its grip on its object is so\\ntenuous that you can\'t even retrieve the object - its `get()` method always returns `null`. **The only use for such a\\nreference is keeping track of when it gets enqueued into a `ReferenceQueue`, as at that point you know the object to\\nwhich it pointed is dead**. How is that different from weak reference, though?\\n\\nThe difference is in exactly when the enqueuing happens. `WeakReferences` are enqueued as soon as the object to which\\nthey point becomes weakly reachable. This is before finalization or garbage collection has actually happened; in theory\\nthe object could even be \\"resurrected\\" by an unorthodox `finalize()` method, but the `WeakReference` would remain dead.\\n`PhantomReferences` are enqueued only when the object is physically removed from memory, and the `get()` method always\\nreturns `null` specifically to prevent you from being able to \\"resurrect\\" an almost-dead object.\\n\\nWhat good are `PhantomReferences`? I\'m only aware of two serious cases for them: first, they allow you to determine\\nexactly when an object was removed from memory. They are in fact the only way to determine that. This isn\'t generally\\nthat useful, but might come in handy in certain very specific circumstances like manipulating large images: if you know\\nfor sure that an image should be garbage collected, you can wait until it actually is before attempting to load the next\\nimage, and therefore make the dreaded `OutOfMemoryError` less likely.\\n\\nSecond, phantom references avoid a fundamental problem with finalization: `finalize()` methods can \\"resurrect\\" objects\\nby creating new strong references to them. So what, you say? Well, the problem is that an object which overrides\\n`finalize()` must now be determined to be garbage in at least two separate garbage collection cycles in order to be\\ncollected. When the first cycle determines that it is garbage, it becomes eligible for finalization. Because of the\\n(slim, but unfortunately real) possibility that the object was \\"resurrected\\" during finalization, the garbage collector\\nhas to run again before the object can actually be removed. And because finalization might not have happened in a timely\\nfashion, an arbitrary number of garbage collection cycles might have happened while the object was waiting for\\nfinalization. This can mean serious delays in actually cleaning up garbage objects, and is why you can get\\n`OutOfMemoryErrors` even when most of the heap is garbage.\\n\\nWith phantom reference, this situation is impossible -- when a `PhantomReference` is enqueued, there is absolutely no\\nway to get a pointer to the now-dead object (which is good, because it isn\'t in memory any longer). Because\\n`PhantomReference` cannot be used to resurrect an object, the object can be instantly cleaned up during the first\\ngarbage collection cycle in which it is found to be phantomly reachable. You can then dispose whatever resources you\\nneed to at your convenience.\\n\\nArguably, the `finalize()` method should never have been provided in the first place. phantom references are definitely\\nsafer and more efficient to use, and eliminating `finalize()` would have made parts of the VM considerably simpler. But,\\nthey\'re also more work to implement, so I confess to still using `finalize()` most of the time. The good news is that at\\nleast you have a choice."},{"id":"querydsl","metadata":{"permalink":"/blog/querydsl","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2021-07-05-querydsl.md","source":"@site/blog/2021-07-05-querydsl.md","title":"Querydsl - A Type-Safe Query Writer for Java","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2021-07-05T00:00:00.000Z","formattedDate":"July 5, 2021","tags":[{"label":"Java","permalink":"/blog/tags/java"}],"readingTime":7.295,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"querydsl","title":"Querydsl - A Type-Safe Query Writer for Java","authors":"jiaqi","tags":["Java"]},"unlisted":false,"prevItem":{"title":"Understanding Weak References","permalink":"/blog/weak-references"},"nextItem":{"title":"Java 8 Stream","permalink":"/blog/java-stream"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\nSponsored by [Mysema](http://www.mysema.com/#buzzwords), [Querydsl](https://querydsl.com/) is similar to Hibernate,\\nwhich offers programmable and type-safe query construction. For example\\n\\n```java\\nList<Tuple> tuples = queryFactory\\n        .select(person.lastName, person.firstName, person.yearOfBirth)\\n        .from(person)\\n        .fetch();\\n```\\n\\n\x3c!--truncate--\x3e\\n\\nQuerydsl was born out of the need to maintain HQL queries in a typesafe way. Incremental construction of HQL queries\\nrequires String concatenation and results in hard to read code. Unsafe references to domain types and properties via\\nplain Strings were another issue with String based HQL construction.\\n\\nWith a changing domain model type-safety brings huge benefits in software development. Domain changes are directly\\nreflected in queries and autocomplete in query construction makes query construction faster and safer.\\n\\nHQL for Hibernate was the first target language for Querydsl, but nowadays it supports JPA, JDO, JDBC, Lucene, Hibernate\\nSearch, MongoDB, Collections and RDFBean as backends.\\n\\nType safety is the core principle of Querydsl. Queries are constructed based on generated query types that reflect the\\nproperties of your domain types. Also function/method invocations are constructed in a fully type-safe manner.\\n\\nConsistency is another important principle. The query paths and operations are the same in all implementations and also\\nthe Query interfaces have a common base interface. **This means the domain types are defined only once and they will be\\nready to be used against SQL, Lucene, MongoDB, etc**.\\n\\nJPA\\n---\\n\\nQuerydsl defines a general statically typed syntax for querying on top of persisted domain model data.\\n[JDO](https://en.wikipedia.org/wiki/Java_Data_Objects) and JPA are the primary integration technologies for Querydsl.\\nThis guide describes how to use Querydsl in combination with JPA.\\n\\n**Querydsl for JPA is an alternative to both JPQL and Criteria queries. It combines the dynamic nature of Criteria\\nqueries with the expressiveness of JPQL and all that in a fully typesafe manner**.\\n\\n### Maven integration\\n\\nAdd the following to your Maven project:\\n\\n```xml\\n<dependency>\\n    <groupId>com.querydsl</groupId>\\n    <artifactId>querydsl-apt</artifactId>\\n    <version>${querydsl.version}</version>\\n    <scope>provided</scope>\\n</dependency>\\n\\n<dependency>\\n    <groupId>com.querydsl</groupId>\\n    <artifactId>querydsl-jpa</artifactId>\\n    <version>${querydsl.version}</version>\\n</dependency>\\n\\n<dependency>\\n    <groupId>org.slf4j</groupId>\\n    <artifactId>slf4j-log4j12</artifactId>\\n    <version>1.6.1</version>\\n</dependency>\\n\\n...\\n\\n<build>\\n    <plugins>\\n        ...\\n        <plugin>\\n            <groupId>com.mysema.maven</groupId>\\n            <artifactId>apt-maven-plugin</artifactId>\\n            <version>1.1.3</version>\\n            <executions>\\n                <execution>\\n                    <goals>\\n                        <goal>process</goal>\\n                    </goals>\\n                    <configuration>\\n                        <outputDirectory>target/generated-sources/java</outputDirectory>\\n                        <processor>com.querydsl.apt.jpa.JPAAnnotationProcessor</processor>\\n                    </configuration>\\n                </execution>\\n            </executions>\\n        </plugin>\\n        ...\\n    </plugins>\\n</build>\\n```\\n\\n**The JPAAnnotationProcessor finds domain types annotated with the `javax.persistence.Entity` annotation and generates\\nquery types for them**.\\n\\n:::warning\\n\\nIf we use Hibernate annotations in our domain types we should use the APT processor of\\n`com.querydsl.apt.hibernate.HibernateAnnotationProcessor` instead.\\n\\n:::\\n\\nTo generate source codes the query types, run `mvn clean install` and you will get your Query types generated into\\n`target/generated-sources/java`.\\n\\nNow you are able to construct JPA query instances and instances of the query domain model. For example, let\'s assume\\nthat your project has the following domain type:\\n\\n```java\\n@Entity\\npublic class Customer {\\n\\n    private String firstName;\\n    private String lastName;\\n\\n    public String getFirstName() {\\n        return firstName;\\n    }\\n\\n    public String getLastName() {\\n        return lastName;\\n    }\\n\\n    public void setFirstName(String fn) {\\n        firstName = fn;\\n    }\\n\\n    public void setLastName(String ln) {\\n        lastName = ln;\\n    }\\n}\\n```\\n\\nQuerydsl will generate a query type with the simple name `QCustomer` into the same package as `Customer`. `QCustomer` can\\nbe used as a **statically typed variable** in Querydsl queries as a representative for the `Customer` type.\\n\\n`QCustomer` has a default instance variable which can be accessed as a static field:\\n\\n```java\\nQCustomer customer = QCustomer.customer;\\n```\\n\\nAlternatively you can define your own Customer variables like this:\\n\\n```java\\nQCustomer customer = new QCustomer(\\"myCustomer\\");\\n```\\n\\n### Querying\\n\\nThe queries should be created via a `JPAQueryFactory` instance.\\n\\nTo retrieve the customer with the first name Bob you would construct a query like this:\\n\\n```java\\nQCustomer customer = QCustomer.customer;\\nCustomer bob = queryFactory.selectFrom(customer)\\n        .where(customer.firstName.eq(\\"Bob\\"))\\n        .fetchOne();\\n```\\n\\n> Note that the `selectFrom` call defines the query source and projection\\n\\nTo create a query with multiple sources you use the query like this:\\n\\n```java\\nQCustomer customer = QCustomer.customer;\\nQCompany company = QCompany.company;\\nquery.from(customer, company);\\n```\\n\\nTo use multiple filters use it like this\\n\\n```java\\nqueryFactory\\n        .selectFrom(customer)\\n        .where(customer.firstName.eq(\\"Bob\\"), customer.lastName.eq(\\"Wilson\\"));\\n```\\n\\nOr like this\\n\\n```java\\nqueryFactory\\n        .selectFrom(customer)\\n        .where(customer.firstName.eq(\\"Bob\\").and(customer.lastName.eq(\\"Wilson\\")));\\n```\\n\\nIf you want to combine the filters via \\"or\\" then use the following pattern\\n\\n```java\\nqueryFactory\\n        .selectFrom(customer)\\n        .where(customer.firstName.eq(\\"Bob\\").or(customer.lastName.eq(\\"Wilson\\")));\\n```\\n\\n#### JOIN\\n\\nQuerydsl supports the following join variants in JPQL:\\n\\n* inner join\\n* join\\n* left join\\n* right join.\\n\\nJoin is typesafe and follows the following pattern:\\n\\n```java\\nQCat cat = QCat.cat;\\nQCat mate = new QCat(\\"mate\\");\\nQCat kitten = new QCat(\\"kitten\\");\\nqueryFactory.selectFrom(cat)\\n        .innerJoin(cat.mate, mate)\\n        .leftJoin(cat.kittens, kitten)\\n        .fetch()\\n```\\n\\nThe native JPQL version of the query would be\\n\\nselect cat from Cat as cat\\ninner join cat.mate as mate\\nleft outer join cat.kittens as kitten\\n\\nQuering Lucene\\n--------------\\n\\n### Lucene Feature Maven integration\\n\\nQuerydsl Lucene can be used via the querydsl-lucene3 module for Lucene 3, querydsl-lucene4 for Lucene 4 and\\nquerydsl-lucene5 for Lucene 5\\n\\n#### Lucene 3\\n\\n```xml\\n<dependency>\\n    <groupId>com.querydsl</groupId>\\n    <artifactId>querydsl-lucene3</artifactId>\\n    <version>${querydsl.version}</version>\\n</dependency>\\n\\n<dependency>\\n    <groupId>org.slf4j</groupId>\\n    <artifactId>slf4j-log4j12</artifactId>\\n    <version>1.6.1</version>\\n</dependency>\\n```\\n\\n#### Lucene 4\\n\\n```xml\\n<dependency>\\n    <groupId>com.querydsl</groupId>\\n    <artifactId>querydsl-lucene4</artifactId>\\n    <version>${querydsl.version}</version>\\n</dependency>\\n\\n<dependency>\\n    <groupId>org.slf4j</groupId>\\n    <artifactId>slf4j-log4j12</artifactId>\\n    <version>1.6.1</version>\\n</dependency>\\n```\\n\\n#### Lucene 5\\n\\n```xml\\n<dependency>\\n    <groupId>com.querydsl</groupId>\\n    <artifactId>querydsl-lucene5</artifactId>\\n    <version>${querydsl.version}</version>\\n</dependency>\\n\\n<dependency>\\n    <groupId>org.slf4j</groupId>\\n    <artifactId>slf4j-log4j12</artifactId>\\n    <version>1.6.1</version>\\n</dependency>\\n```\\n\\n### Querying Lucene\\n\\n```java\\nQDocument doc = new QDocument(\\"doc\\");\\n\\nIndexSearcher searcher = new IndexSearcher(index);\\nLuceneQuery query = new LuceneQuery(true, searcher);\\nList<Document> documents = query\\n        .where(doc.year.between(\\"1800\\", \\"2000\\").and(doc.title.startsWith(\\"Huckle\\"))\\n        .fetch();\\n```\\n\\nwhich is transformed into the following Lucene query:\\n\\n```text\\n+year:[1800 TO 2000] +title:huckle*\\n```\\n\\nTroubleshooting\\n---------------\\n\\n### [Oracle] \\"not a GROUP BY expression\\" Error\\n\\nSuppose you have a SQL query that retrieves all unique names of a \\"Person\\" table. This query works perfectly in MySQL:\\n\\n```sql\\nSELECT id, name\\nFROM Person\\nGROUP BY name\\n```\\n\\nOracle, databases, requires all projected columns to be in `GROUP BY` clause, i.e. the same query must be modified to\\nthe following:\\n\\n```sql\\nSELECT id, name\\nFROM Person\\nGROUP BY name, id\\n```\\n\\nNote that we\'ve appended `id` column in the `GROUP BY` clause.\\n\\nOracle, in this case, brings up an important issue for Querydsl. **How do we comply with DRY principle while maintaining\\n2 copies of columns, one in projection and one in group-by clause, in the code level**?\\n\\nThe answer is deduplicating by reducing the 2 copies into 1 single-source of truth and use that to re-generate\\nprojections and `GROUP BY` clause.\\n\\nFor example, we could define projected columns first before specifying projections and group-bys:\\n\\n```java\\n/**\\n * Returns an object including all of the projections for a query.\\n * <p>\\n * The object is a mapping from projected column to its column type.\\n *\\n * @return a new map\\n */\\n@NotNull\\npublic static Map<String, Class<?>> getQueryDslProjections() {\\n    return Stream.of(\\n            new AbstractMap.SimpleImmutableEntry<>(\\"id\\", Long.class),\\n            new AbstractMap.SimpleImmutableEntry<>(\\"name\\", String.class)\\n    )\\n            .collect(Collectors.collect(Map.Entry::getKey, Map.Entry::getValue));\\n}\\n```\\n\\nNote that in order to generate projections and group bys later, all we need is the name(display/alias) of the column\\nand the field type of the Database bean, as shown above.\\n\\nTo generate projections, we could use [dynamic path](https://querydsl.com/static/querydsl/4.4.0/reference/html_single/#d0e2066)\\nto dynamic bind columns to our query:\\n\\n```java\\n/**\\n * Generate the same group-by columns as the projected columns determined by {@link #getQueryDslProjections()}\\n * <p>\\n * For example, if the projection is\\n * <pre>\\n * {@code\\n * SELECT person.id, person.name FROM ...\\n * }\\n * </pre>\\n * Then this method returns\\n * <pre>\\n * GROUP BY person.id, person.name\\n * </pre>\\n * The purpose of this method is to make Oracle-compatible GROUP-BY, which must includes all projected columns\\n *\\n * @param projections a mapping from path suffix and the field type of the suffix path. For example:\\n * {@code id: Long.class, graph: String.class}\\n *\\n * @return an array of group-by columns\\n */\\n@NotNull\\n@SuppressWarnings(\\"SuspiciousToArrayCall\\")\\npublic static Expression<?>[] getGroupBys(final @NotNull  Map<String, Class<?>> projections) {\\n    Objects.requireNonNull(projections, \\"projections\\");\\n\\n    final PathBuilder<Person> root = new PathBuilder<>(Person.class, \\"person\\");\\n\\n    return projections.entrySet().stream()\\n            .map(entry -> {\\n                String property = entry.getKey();\\n                Class<?> type = entry.getValue();\\n                return root.get(property, type);\\n            })\\n            .collect(Collectors.toList()).toArray(new Expression[projections.size()]);\\n}\\n```\\n\\nFor projections, we use the dynamic expression again and specify the column alias in the return result using `as()`\\nshow below:\\n\\n```java\\njpa.select(\\n        Projections.bean(\\n                Person.class,\\n                projections\\n                        .entrySet()\\n                        .stream()\\n                        .map(entry -> {\\n                            String property = entry.getKey();\\n                            Class<?> type = entry.getValue();\\n                            return root.get(property, type).as(property);\\n                        })\\n                        .collect(Collectors.toList()).toArray(new Expression[projections.size()])\\n                )\\n        )\\n                .from(qPerson)\\n                .leftJoin...;\\n```\\n\\n### [Error] Executing an update/delete query\\n\\nIn order to translate this query in QueryDsl:\\n\\n```sql\\nupdate myThings set firstColumn = \'newValue\' where secondColumn in (\'interesting\', \'stuff\')\\n```\\n\\nWe have to use `new JPAUpdateClause(session, myThings)`:\\n\\n```java\\nJPAUpdateClause<myThings> update = new JPAUpdateClause(session, myThings);\\nupdate.set(myThings.firstColumn, \\"newValue\\")\\n        .where(myThings.secondColumn.in(interestingValues))\\n        .execute();\\n```"},{"id":"java-stream","metadata":{"permalink":"/blog/java-stream","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2021-04-30-java-stream.md","source":"@site/blog/2021-04-30-java-stream.md","title":"Java 8 Stream","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2021-04-30T00:00:00.000Z","formattedDate":"April 30, 2021","tags":[{"label":"Java","permalink":"/blog/tags/java"}],"readingTime":2.7,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"java-stream","title":"Java 8 Stream","authors":"jiaqi","tags":["Java"]},"unlisted":false,"prevItem":{"title":"Querydsl - A Type-Safe Query Writer for Java","permalink":"/blog/querydsl"},"nextItem":{"title":"PUT v.s. POST","permalink":"/blog/put-vs-post"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nCombining a Collection of Predicates\\n------------------------------------\\n\\nWe chain a collection of Predicates by reducing them. In the following example, we have a list of predicates that we\\ncombined using `Predicate.and()`:\\n\\n```java\\n@Test\\npublic void whenFilterListWithCollectionOfPredicatesUsingAnd_thenSuccess(){\\n    List<Predicate<String>> allPredicates = new ArrayList<Predicate<String>>();\\n    allPredicates.add(str -> str.startsWith(\\"A\\"));\\n    allPredicates.add(str -> str.contains(\\"d\\"));\\n    allPredicates.add(str -> str.length() > 4);\\n\\n    List<String> result = names.stream()\\n        .filter(allPredicates.stream().reduce(x->true, Predicate::and))\\n        .collect(Collectors.toList());\\n\\n    assertEquals(1, result.size());\\n    assertThat(result, contains(\\"Alexander\\"));\\n}\\n```\\n\\nNote that we use our base identity as:\\n\\n```java\\nx->true\\n```\\n\\nThat will be, however, different if we want to combine them using Predicate.or():\\n\\n```java\\n@Test\\npublic void whenFilterListWithCollectionOfPredicatesUsingOr_thenSuccess(){\\n    List<String> result = names.stream()\\n        .filter(allPredicates.stream().reduce(x->false, Predicate::or))\\n        .collect(Collectors.toList());\\n\\n    assertEquals(2, result.size());\\n    assertThat(result, contains(\\"Adam\\",\\"Alexander\\"));\\n}\\n```\\n\\nCollecting Stream containing \\"null\\" to List\\n-------------------------------------------\\n\\n```java\\nperson.stream()\\n        .sorted(Comparator.comparingInt(Person::getDriverLicense))\\n        .collect(Collectors.toList());\\n```\\n\\nIf this stream contains a kid who doesn\'t know how to drive, the `Collectors.toList()` might see a `null` value, which\\ncauses `NullPointerException`, because `Collectors.toList()` gives us a list implementation that doesn\'t permit `null`\\nelements. `ArrayList`, however, permits `null` elements according to its JavaDoc. The solution them would be\\n\\n```java\\nperson.stream()\\n        .sorted(Comparator.comparingInt(Person::getDriverLicense))\\n        .collect(Collectors.toCollection(ArrayList::new));\\n```\\n\\nNote that the last line is changed so that the collect procedure returns an uer-specified list implementation, which is\\n`ArrayList`\\n\\nSorting\\n-------\\n\\n```java\\npublic class User {\\n\\n    private final String name;\\n    private final int age;\\n}\\n\\nfinal List<User> users = Arrays.asList(\\n        new User(\\"C\\", 30),\\n        new User(\\"D\\", 40),\\n        new User(\\"A\\", 10),\\n        new User(\\"B\\", 20),\\n        new User(\\"E\\", 50)\\n);\\n\\nList<User> sortedList = users.stream()\\n            .sorted(Comparator.comparingInt(User::getAge))\\n            .collect(Collectors.toList());\\n```\\n\\nRemove Duplicates from a List of Objects based on Property\\n----------------------------------------------------------\\n\\nYou can get a stream from the List and put in in the TreeSet from which you provide a custom comparator that compares\\nthe property uniquely. Then if you really need a list you can put then back this collection into an ArrayList:\\n\\n```java\\nimport static java.util.Comparator.comparingInt;\\nimport static java.util.stream.Collectors.collectingAndThen;\\nimport static java.util.stream.Collectors.toCollection;\\n\\n...\\nList<Employee> unique = employee.stream()\\n        .collect(\\n                collectingAndThen(\\n                        toCollection(() -> new TreeSet<>(comparingInt(Employee::getId))),\\n                        ArrayList::new\\n                )\\n        );\\n```\\n\\nGiven the example:\\n\\n```java\\nList<Employee> employee = Arrays.asList(new Employee(1, \\"John\\"), new Employee(1, \\"Bob\\"), new Employee(2, \\"Alice\\"));\\n```\\n\\nIt will output:\\n\\n```java\\n[Employee{id=1, name=\'John\'}, Employee{id=2, name=\'Alice\'}]\\n```\\n\\nConvert Iterable to Stream\\n--------------------------\\n\\n```java\\nStreamSupport.stream(iterable.spliterator(), false)\\n        .filter(...)\\n        .moreStreamOps(...);\\n```\\n\\nConvert Two Dimensional Array to List\\n-------------------------------------\\n\\n```java\\nList<Foo> collection = Arrays.stream(array)  //\'array\' is two-dimensional\\n        .flatMap(Arrays::stream)\\n        .collect(Collectors.toList());\\n```\\n\\nPreserve Order in Stream with collect\\n-------------------------------------\\n\\nSay we would like to process a list such as [\\"blah\\", \\"blah\\", \\"yep\\"] and get [\\"blah (2 times)\\", \\"yep\\"], we will collect\\nthem to a `LinkedHashMap` to get the expected result:\\n\\n```java\\nreturn messages.stream()\\n        .collect(groupingBy(Function.identity(), LinkedHashMap::new, summingInt(e -> 1)))\\n        .entrySet()\\n        .stream()\\n        .map(e -> e.getKey()+(e.getValue() == 1 ? \\"\\" : \\" (\\" + e.getValue() +\\" times)\\"))\\n        .collect(toList());\\n```"},{"id":"put-vs-post","metadata":{"permalink":"/blog/put-vs-post","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2021-04-25-put-vs-post.md","source":"@site/blog/2021-04-25-put-vs-post.md","title":"PUT v.s. POST","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2021-04-25T00:00:00.000Z","formattedDate":"April 25, 2021","tags":[{"label":"Webservice","permalink":"/blog/tags/webservice"}],"readingTime":1.285,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"put-vs-post","title":"PUT v.s. POST","authors":"jiaqi","tags":["Webservice"]},"unlisted":false,"prevItem":{"title":"Java 8 Stream","permalink":"/blog/java-stream"},"nextItem":{"title":"JQPL","permalink":"/blog/jpql"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\nWe should choose between PUT and POST based on [idempotence](http://en.wikipedia.org/wiki/Idempotent) of the action.\\n\\n\x3c!--truncate--\x3e\\n\\n**PUT** implies putting a resource - completely replacing whatever is available at the given URL with a different thing.\\nBy definition, a PUT is idempotent. Do it as many times as you like, and the result is the same. `x=5` is idempotent.\\nYou can PUT a resource whether it previously exists, or not (eg, to Create, or to Update)!\\n\\n**POST updates a resource, adds a subsidiary resource, or causes a change. A POST is not idempotent, in the way that\\n`x++` is not idempotent.\\n\\nBy this argument, PUT is for creating when you know the URL of the thing you will create. POST can be used to create\\nwhen you know the URL of the \\"factory\\" or manager for the category of things you want to create.\\n\\nso:\\n\\n```bash\\nPOST /expense-report\\n```\\n\\nor:\\n\\n```bash\\nPUT /expense-report/10929\\n```"},{"id":"jpql","metadata":{"permalink":"/blog/jpql","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-10-28-jpql.md","source":"@site/blog/2020-10-28-jpql.md","title":"JQPL","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-10-28T00:00:00.000Z","formattedDate":"October 28, 2020","tags":[{"label":"Java","permalink":"/blog/tags/java"},{"label":"JQPL","permalink":"/blog/tags/jqpl"}],"readingTime":41.995,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"jpql","title":"JQPL","authors":"jiaqi","tags":["Java","JQPL"]},"unlisted":false,"prevItem":{"title":"PUT v.s. POST","permalink":"/blog/put-vs-post"},"nextItem":{"title":"What is Java EE","permalink":"/blog/java-ee"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\nThe Java Persistence Query Language (JPQL) is a platform-independent object-oriented query language defined by JPA.\\nJPQL is similar to SQL, but operates on objects, attributes and relationships instead of tables and columns.\\n\\n\x3c!--truncate--\x3e\\n\\nThe Java Persistence query language (JPQL) is used to define searches against persistent entities independent of the\\nmechanism used to store those entities. As such, JPQL is \\"portable\\", and not constrained to any particular data store\\n([although in some cases it does get constrained](#avoid-grouping-by-subset-of-columns-from-select)). The Java\\nPersistence query language is an extension of the Enterprise JavaBeans query language, EJB QL, adding operations\\nsuch as bulk deletes and updates, join operations, aggregates, projections, and subqueries. Furthermore, JPQL\\nqueries can be declared statically in metadata, or can be dynamically built in code\\n\\nCaveats\\n-------\\n\\n### Avoid GROUPing BY subset of columns from SELECT\\n\\n**JPQL is not portable when it comes to `GROUP BY` clause.**. Let\'s say we have query that reads everyone who has\\nlived in Washington. It is common in the U.S., however, that cities share common name. For example, there are more\\nthan 80 locations whose names are \\"Washington\\". When a person move from _Washington, Maine_ to _Washington,\\nMassachusetts_, the `Address` table will have 2 rows with the same combinations of `ssn` and `city` columns.\\n\\n```sql\\nSELECT person\\nFROM Person person LEFT JOIN Address address ON person.city = address.city\\nWHERE address.city = \\"Washington\\"\\nGROUP BY person.ssn\\n```\\n\\n[This query will work for MySQL but not Oracle](https://stackoverflow.com/questions/30700316/sql-not-a-group-by-expression-with-oraclesql-and-innerquery-error),\\nbecause Oracle requires\\n\\nJPQL Statement Types\\n--------------------\\n\\nA JPQL statement may be\\n\\n1. a `SELECT` statement, or\\n2. an `UPDATE` statement,\\n3. or a `DELETE` statement\\n\\nIn BNF syntax, a query language statement is defined as:\\n\\n```text\\nQL_statement ::= select_statement | update_statement | delete_statement\\n```\\n\\n### JPQL Select Statement\\n\\nA select statement is a string which consists of the following clauses:\\n\\n- a `SELECT` clause, which determines the type of the objects or values to be selected;\\n- a `FROM` clause, which provides declarations that designate the domain to which the expressions specified in the\\n  other\\n- clauses of the query apply;\\n- an *optional* `WHERE` clause, which may be used to restrict the results that are returned by the query;\\n- an *optional* `GROUP BY` clause, which allows query results to be aggregated in terms of groups;\\n- an *optional* `HAVING` clause, which allows filtering over aggregated groups;\\n- an *optional* `ORDER BY` clause, which may be used to order the results that are returned by the query.\\n\\nIn BNF syntax, a select statement is defined as:\\n\\n```text\\nselect_statement ::= select_clause from_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]\\n```\\n\\n### JPQL Update and Delete Statements\\n\\nUpdate and delete statements provide bulk operations over sets of entities. In BNF syntax, these operations are\\ndefined as:\\n\\n```text\\nupdate_statement ::= update_clause [where_clause]\\ndelete_statement ::= delete_clause [where_clause\\n```\\n\\nJPQL Abstract Schema Types and Query Domains\\n--------------------------------------------\\n\\nThe Java Persistence query language is a typed language, and every expression has a type. The type of an expression\\nis derived from the structure of the expression, the abstract schema types of the identification variable\\ndeclarations, the types to which the persistent fields and relationships evaluate, and the types of literals. The\\nabstract schema type of an entity is derived from the entity class and the metadata information provided by Java\\nlanguage annotations or in the XML descriptor.\\n\\nInformally, the abstract schema type of an entity can be characterized as follows:\\n\\n- For every persistent field or get accessor method (for a persistent property) of the entity class, there is a\\n  field (\\"state-field\\") whose abstract schema type corresponds to that of the field or the result type of the\\n  accessor method.\\n- For every persistent relationship field or get accessor method (for a persistent relationship property) of the\\n  entity class, there is a field (\\"association-field\\") whose type is the abstract schema type of the related entity\\n  (or, if the relationship is a one-to-many or many-to-many, a collection of such). Abstract schema types are\\n  specific to the query language data model. **The persistence provider is not required to implement or otherwise\\n  materialize an abstract schema type**. The domain of a query consists of the abstract schema types of all\\n  entities that are defined in the same persistence unit. The domain of a query may be restricted by the\\n  navigability of the relationships of the entity on which it is based. The association-fields of an entity\'s\\n  abstract schema type determine navigability. Using the association-fields and their values, a query can select\\n  related entities and use their abstract schema types in the query.\\n\\n### JPQL Entity Naming\\n\\nEntities are designated in query strings by their entity names. The entity name is defined by the name element of\\nthe Entity annotation (or the entity-name XML descriptor element), and defaults to the unqualified name of the\\nentity class. Entity names are scoped within the persistence unit and must be unique within the persistence unit.\\n\\n### JPQL Schema Example\\n\\nThis example assumes that the application developer provides several entity classes representing magazines,\\npublishers, authors, and articles. The abstract schema types for these entities are `Magazine`, `Publisher`,\\n`Author`, and `Article`.\\n\\nThe entity `Publisher` has a one-to-many relationships with `Magazine`. There is also a one-to-many relationship\\nbetween `Magazine` and `Article`. The entity `Article` is related to `Author` in a one-to-one relationship.\\n\\nQueries to select magazines can be defined by navigating over the association-fields and state-fields defined by\\n`Magazine` and `Author`. A query to find all magazines that have unpublished articles is as follows:\\n\\n```sql\\nSELECT DISTINCT mag\\nFROM Magazine AS mag\\nJOIN mag.articles AS art\\nWHERE art.published = FALSE\\n```\\n\\nThe next query navigates over the association-field authors of the abstract schema type `Magazine` to find\\narticles, and uses the state-field `published` of `Article` to select those magazines that have at least one\\narticle that is\\npublished. Although predefined reserved identifiers, such as `DISTINCT`, `FROM`, `AS`, `JOIN`, `WHERE`, and `FALSE`,\\nappear in upper case in this example, predefined reserved identifiers are case insensitive. The `SELECT` clause of this\\nexample designates the return type of this query to be of type `Magazine`. Because the same persistence unit defines the\\nabstract persistence schemas of the related entities, the developer can also specify a query over `articles` that\\nutilizes the abstract schema type for products, and hence the state-fields and association-fields of both the abstract\\nschema types `Magazine` and `Author`. For example, if the abstract schema type `Author` has a state-field named\\n`firstName`, a query over `articles` can be specified using this state-field. Such a query might be to find all\\nmagazines that have articles authored by someone with the first name \\"John\\".\\n\\n```sql\\nSELECT DISTINCT mag\\nFROM Magazine mag\\nJOIN mag.articles art JOIN art.author auth WHERE auth.firstName = \'John\'\\n```\\n\\nBecause `Magazine` is related to `Author` by means of the relationships between `Magazine` and `Article` and between\\n`Article` and `Author`, navigation using the association-fields authors and product is used to express the query.\\nThis query is specified by using the abstract schema name `Magazine`, which designates the abstract schema type\\nover which the query ranges. The basis for the navigation is provided by the association-fields authors and product\\nof the abstract schema types `Magazine` and `Article` respectively.\\n\\nJPQL FROM Clause and Navigational Declarations\\n----------------------------------------------\\n\\nThe `FROM` clause of a query defines the domain of the query by declaring identification variables. An\\nidentification variable is an identifier declared in the `FROM` clause of a query. The domain of the query may be\\nconstrained by path expressions. Identification variables designate instances of a particular entity abstract\\nschema type. The `FROM` clause can contain multiple identification variable declarations separated by a comma (,):\\n\\n- `from_clause ::= FROM identification_variable_declaration {, {identification_variable_declaration | collection_member_declaration}}*`\\n- `identification_variable_declaration ::= range_variable_declaration { join | fetch_join }*`\\n- `range_variable_declaration ::= abstract_schema_name [AS] identification_variable`\\n- `join ::= join_spec join_association_path_expression [AS] identification_variable`\\n- `fetch_join ::= join_spec FETCH join_association_path_expression`\\n- `join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression`\\n- `join_spec ::= [ LEFT [OUTER] | INNER ] JOIN`\\n- `collection_member_declaration ::= IN (collection_valued_path_expression) [AS] identification_variable`\\n\\n### JPQL FROM Identifiers\\n\\nAn identifier is a character sequence of unlimited length. **The character sequence must begin with a Java\\nidentifier** start character, and all other characters must be Java identifier part characters. An identifier start\\ncharacter is any character for which the method `Character.isJavaIdentifierStart` returns `true`. This includes the\\nunderscore (`_`) character and the dollar-sign (`$`) character. An identifier-part character is any character for\\nwhich the method `Character.isJavaIdentifierPart` returns true . The question-mark (`?`) character is reserved for\\nuse by the Java Persistence query language. The following are reserved identifiers:\\n\\n- `SELECT`\\n- `FROM`\\n- `WHERE`\\n- `UPDATE`\\n- `DELETE`\\n- `JOIN`\\n- `OUTER`\\n- `INNER`\\n- `LEFT`\\n- `GROUP`\\n- `BY`\\n- `HAVING`\\n- `FETCH`\\n- `DISTINCT`\\n- `OBJECT`\\n- `NULL`\\n- `TRUE`\\n- `FALSE`\\n- `NOT`\\n- `AND`\\n- `OR`\\n- `BETWEEN`\\n- `LIKE`\\n- `IN`\\n- `AS`\\n- `UNKNOWN`\\n- `EMPTY`\\n- `MEMBER`\\n- `OF`\\n- `IS`\\n- `AVG`\\n- `MAX`\\n- `MIN`\\n- `SUM`\\n- `COUNT`\\n- `ORDER`\\n- `BY`\\n- `ASC`\\n- `DESC`\\n- `MOD`\\n- `UPPER`\\n- `LOWER`\\n- `TRIM`\\n- `POSITION`\\n- `CHARACTER_LENGTH`\\n- `CHAR_LENGTH`\\n- `BIT_LENGTH`\\n- `CURRENT_TIME`\\n- `CURRENT_DATE`\\n- `CURRENT_TIMESTAMP`\\n- `NEW`\\n- `EXISTS`\\n- `ALL`\\n- `ANY`\\n- `SOME`\\n\\nReserved identifiers are case insensitive. Reserved identifiers must not be used as identification variables. It is\\nrecommended that other SQL reserved words not be used as identification variables in queries, as they may be used as\\nreserved identifiers in future releases of the specification.\\n\\n### JPQL Identification Variables\\n\\nAn identification variable is a valid identifier declared in the `FROM` clause of a query. All identification\\nvariables must be declared in the `FROM` clause. Identification variables cannot be declared in other clauses. An\\nidentification variable must not be a reserved identifier or have the same name as any entity in the same\\npersistence unit: Identification variables are case insensitive. An identification variable evaluates to a value of\\nthe type of the expression used in declaring the variable. For example, consider the previous query:\\n\\n```sql\\nSELECT DISTINCT mag\\nFROM Magazine mag JOIN mag.articles art JOIN art.author auth\\nWHERE auth.firstName = \'John\'\\n```\\n\\nIn the `FROM` clause declaration `mag.articles art`, the identification variable `art` evaluates to any `Article`\\nvalue directly reachable from `Magazine`. The association-field articles is a collection of instances of the\\nabstract schema type `Article` and the identification variable `art` refers to an element of this collection. The\\ntype of `auth` is the abstract schema type of `Author`. An identification variable ranges over the abstract schema\\ntype of an entity. An identification variable designates an instance of an entity abstract schema type or an\\nelement of a collection of entity abstract schema type instances. Identification variables are existentially\\nquantified in a query. An identification variable always designates a reference to a single value. It is declared\\nin one of three ways:\\n\\n1. in a range variable declaration,\\n2. in a join clause, or\\n3. in a collection member declaration.\\n\\nThe identification variable declarations are evaluated from left to right in the `FROM` clause, and an\\nidentification variable declaration can use the result of a preceding identification variable declaration of the\\nquery string.\\n\\n### JPQL Range Declarations\\n\\nThe syntax for declaring an identification variable as a range variable is similar to that of SQL; optionally, it\\nuses the `AS` keyword:\\n\\n```text\\nrange_variable_declaration ::= abstract_schema_name [AS] identification_variable\\n```\\n\\nRange variable declarations allow the developer to designate a \\"root\\" for objects which may not be reachable by\\nnavigation. In order to select values by comparing more than one instance of an entity abstract schema type, more\\nthan one identification variable ranging over the abstract schema type is needed in the `FROM` clause.\\n\\nThe following query returns magazines whose prices are greater than the price of magazines published by \\"Adventure\\"\\npublishers. This example illustrates the use of two different identification variables in the `FROM` clause, both\\nof the abstract schema type `Magazine`. The `SELECT` clause of this query determines that it is the magazines with\\nprices greater than those of \\"Adventure\\" publisher\'s that are returned.\\n\\n```sql\\nSELECT DISTINCT mag1\\nFROM Magazine mag1, Magazine mag2\\nWHERE mag1.price > mag2.price AND mag2.publisher.name = \'Adventure\'\\n```\\n\\n### JPQL Path Expressions\\n\\n**An identification variable followed by the navigation operator (.) and a state-field or association-field is a\\npath expression.** The type of the path expression is the type computed as the result of navigation; that is, the\\ntype of the state-field or association-field to which the expression navigates. Depending on navigability, a path\\nexpression that leads to an association-field may be further composed. Path expressions can be composed from other\\npath expressions if the original path expression evaluates to a single-valued type (not a collection) corresponding\\nto an association-field. **Path-expression navigability is composed using \\"inner join\\" semantics. That is, if the\\nvalue of a non-terminal association-field in the path expression is `null`, the path is considered to have no\\nvalue, and does not participate in the determination of the result**. The syntax for single-valued path expressions\\nand collection-valued path expressions is as follows:\\n\\n- `single_valued_path_expression ::= state_field_path_expression | single_valued_association_path_expression`\\n- `state_field_path_expression ::= {identification_variable | single_valued_association_path_expression}.state_field`\\n- `single_valued_association_path_expression ::= identification_variable.{single_valued_association_field.}*single_valued_association_field`\\n- `collection_valued_path_expression ::= identification_variable.{single_valued_association_field.}*collection_valued_association_field`\\n- `state_field ::= {embedded_class_state_field.}*simple_state_field`\\n\\nA single_valued_association_field is designated by the name of an association-field in a one-to-one or many-to-one\\nrelationship. The type of a single_valued_association_field and thus a single_valued_association_path_expression is\\nthe abstract schema type of the related entity. A collection_valued_association_field is designated by the name of\\nan association-field in a one-to-many or a many-to-many relationship. The type of a\\n`collection_valued_association_field` is a collection of values of the abstract schema type of the related entity.\\nAn `embedded_class_state_field` is designated by the name of an entity-state field that corresponds to an embedded\\nclass. Navigation to a related entity results in a value of the related entity\'s abstract schema type.\\n\\nThe evaluation of a path expression terminating in a state-field results in the abstract schema type corresponding\\nto the Java type designated by the state-field. It is syntactically illegal to compose a path expression from a path\\nexpression that evaluates to a collection. For example, if `mag` designates `Magazine`, the path expression\\n`mag.articles.author` is illegal since navigation to authors results in a collection. This case should produce an\\nerror when the query string is verified. To handle such a navigation, an identification variable must be declared\\nin the `FROM` clause to range over the elements of the articles collection. Another path expression must be used to\\nnavigate over each such element in the `WHERE` clause of the query, as in the following query, which returns all\\nauthors that have any articles in any magazines:\\n\\n```sql\\nSELECT DISTINCT art.author\\nFROM Magazine AS mag, IN(mag.articles) art\\n```\\n\\n### JPQL Joins\\n\\n**An [inner join](https://www.w3schools.com/sql/sql_join_inner.asp) may be implicitly specified by the use of a\\nartesian product in the FROM clause and a join condition in the `WHERE` clause**.\\n\\nThe syntax for explicit join operations is as follows:\\n\\n- `join ::= join_spec join_association_path_expression [AS] identification_variable`\\n- `fetch_join ::= join_spec FETCH join_association_path_expression`\\n- `join_spec ::= [ LEFT [OUTER] | INNER ] JOIN`\\n- `join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression`\\n\\nThe following inner and outer join operation types are supported.\\n\\n#### JPQL Inner Joins (Relationship Joins)\\n\\nThe syntax for the inner join operation is\\n\\n```sql\\n[ INNER ] JOIN join_association_path_expression [AS] identification_variable\\n```\\n\\nFor example, the query below joins over the relationship between publishers and magazines. This type of join\\ntypically equates to a join over a foreign key relationship in the database.\\n\\n```sql\\nSELECT pub\\nFROM Publisher pub JOIN pub.magazines mag\\nWHERE pub.revenue > 1000000\\n```\\n\\nThe keyword INNER may optionally be used:\\n\\n```sql\\nSELECT pub\\nFROM Publisher pub INNER JOIN pub.magazines mag\\nWHERE pub.revenue > 1000000\\n```\\n\\nThis is equivalent to the following query using the earlier `IN` construct. It selects those publishers with\\nrevenue of over 1 million for which at least one magazine exists:\\n\\n```sql\\nSELECT OBJECT(pub)\\nFROM Publisher pub, IN(pub.magazines) mag\\nWHERE pub.revenue > 1000000\\n```\\n\\n#### JPQL Outer Joins\\n\\n[`LEFT JOIN` and `LEFT OUTER JOIN` are synonymous](https://www.w3schools.com/sql/sql_join_left.asp). They enable the\\nretrieval of a set of entities where matching values in the join condition may be absent. The syntax for a left\\nouter join is\\n\\n```sql\\nLEFT [OUTER] JOIN join_association_path_expression [AS] identification_variable\\n```\\n\\nFor example:\\n\\n```sql\\nSELECT pub\\nFROM Publisher pub LEFT JOIN pub.magazines mag\\nWHERE pub.revenue > 1000000\\n```\\n\\nThe keyword `OUTER` may optionally be used:\\n\\n```sql\\nSELECT pub\\nFROM Publisher pub LEFT OUTER JOIN pub.magazines mags\\nWHERE pub.revenue > 1000000\\n```\\n\\n**An important use case for `LEFT JOIN` is in enabling the prefetching of related data items as a side effect of a\\nquery. This is accomplished by specifying the `LEFT JOIN` as a `FETCH JOIN`**.\\n\\n#### JPQL Fetch Joins\\n\\nA `FETCH JOIN` enables the fetching of an association as a side effect of the execution of a query. A `FETCH JOIN`\\nis specified over an entity and its related entities. The syntax for a fetch join is\\n\\n```sql\\nfetch_join ::= [ LEFT [OUTER] | INNER ] JOIN FETCH join_association_path_expression\\n```\\n\\nThe association referenced by the right side of the `FETCH JOIN` clause must be an association that belongs to an\\nentity that is returned as a result of the query. It is not permitted to specify an identification variable for the\\nentities referenced by the right side of the `FETCH JOIN` clause, and hence references to the implicitly fetched\\nentities cannot appear elsewhere in the query. The following query returns a set of magazines. As a side effect,\\nthe associated articles for those magazines are also retrieved, even though they are not part of the explicit query\\nresult. The persistent fields or properties of the articles that are eagerly fetched are fully initialized. The\\ninitialization of the relationship properties of the articles that are retrieved is determined by the metadata for\\nthe `Article` entity class.\\n\\n```sql\\nSELECT mag\\nFROM Magazine mag LEFT JOIN FETCH mag.articles\\nWHERE mag.id = 1\\n```\\n\\nA fetch join has the same join semantics as the corresponding inner or outer join, except that the related objects\\nspecified on the right-hand side of the join operation are not returned in the query result or otherwise referenced\\nin the query. Hence, for example, if magazine id 1 has five articles, the above query returns five references to the\\nmagazine 1 entity.\\n\\n### JPQL Collection Member Declarations\\n\\nAn identification variable declared by a `collection_member_declaration` ranges over values of a collection\\nobtained by navigation using a path expression. Such a path expression represents a navigation involving the\\nassociation-fields of an entity abstract schema type. Because a path expression can be based on another path\\nexpression, the navigation can use the association-fields of related entities. An identification variable of a\\ncollection member declaration is declared using a special operator, the reserved identifier `IN`. The argument to\\nthe `IN` operator is a collection-valued path expression. The path expression evaluates to a collection type\\nspecified as a result of navigation to a collection-valued association-field of an entity abstract schema type. The\\nsyntax for declaring a collection member identification variable is as follows:\\n\\n```sql\\ncollection_member_declaration ::= IN (collection_valued_path_expression) [AS] identification_variable\\n```\\n\\nFor example, the query\\n\\n```sql\\nSELECT DISTINCT mag\\nFROM Magazine mag\\n    JOIN mag.articles art\\n    JOIN art.author auth\\nWHERE auth.lastName = \'Grisham\'\\n```\\n\\nmay equivalently be expressed as follows, using the IN operator:\\n\\n```sql\\nSELECT DISTINCT mag\\nFROM Magazine mag, IN(mag.articles) art\\nWHERE art.author.lastName = \'Grisham\'\\n```\\n\\nIn this example, articles is the name of an association-field whose value is a collection of instances of the\\nabstract schema type `Article`. The identification variable `art` designates a member of this collection, a single\\n`Article` abstract schema type instance. In this example, mag is an identification variable of the abstract schema\\ntype `Magazine`.\\n\\n### JPQL Polymorphism\\n\\nJava Persistence queries are automatically polymorphic. The `FROM` clause of a query designates not only instances\\nof the specific entity classes to which the query explicitly refers but of subclasses as well. The instances\\nreturned by a query include instances of the subclasses that satisfy the query criteria.\\n\\nJPQL `WHERE` Clause\\n-------------------\\n\\nThe `WHERE` clause of a query consists of a conditional expression used to select objects or values that satisfy the\\nexpression. The `WHERE` clause restricts the result of a select statement or the scope of an update or delete\\noperation. A `WHERE` clause is defined as follows:\\n\\n```sql\\nwhere_clause ::= WHERE conditional_expression\\n```\\n\\nThe `GROUP BY` construct enables the aggregation of values according to the properties of an entity class. The\\n`HAVING` construct enables conditions to be specified that further restrict the query result as restrictions upon\\nthe groups. The syntax of the `HAVING` clause is as follows:\\n\\n```sql\\nhaving_clause ::= HAVING conditional_expression\\n```\\n\\n### JPQL Conditional Expressions\\n\\nThe following sections describe the language constructs that can be used in a conditional expression of the `WHERE`\\nclause or `HAVING` clause. State-fields that are mapped in serialized form or as lobs may not be portably used in\\nconditional expressions\\n\\n:::note\\n\\nThe implementation is not expected to perform such query operations involving such fields in memory rather than in\\nthe database.\\n\\n:::\\n\\n#### JPQL Literals\\n\\nA string literal is enclosed in single quotes -- for example: \'literal\'. A string literal that includes a single\\nquote is represented by two single quotes -- for example: \'literal\'\'s\'. String literals in queries, like Java\\nString literals, use unicode character encoding. The use of Java escape notation is not supported in query string\\nliterals. Exact numeric literals support the use of Java integer literal syntax as well as SQL exact numeric\\nliteral syntax. Approximate literals support the use Java floating point literal syntax as well as SQL approximate\\nnumeric literal syntax. Enum literals support the use of Java enum literal syntax. **The enum class name must be\\nspecified**. Appropriate suffixes may be used to indicate the specific type of a numeric literal in accordance with\\nthe Java Language Specification. The boolean literals are TRUE and FALSE. Although predefined reserved literals\\nappear in upper case, they are case insensitive.\\n\\n#### JPQL Identification Variables (WHERE/HAVING)\\n\\nAll identification variables used in the `WHERE` or `HAVING` clause of a `SELECT` or `DELETE` statement must be\\ndeclared in the `FROM` clause, as described in [JPQL Identification Variables](#jpql-identification-variables). The\\nidentification variables used in the `WHERE` clause of an `UPDATE` statement must be declared in the `UPDATE`\\nclause. Identification variables are existentially quantified in the `WHERE` and `HAVING` clause. This means that an\\nidentification variable represents a member of a collection or an instance of an entity\'s abstract schema type. An\\nidentification variable never designates a collection in its entirety.\\n\\n#### JPQL Path Expressions (WHERE/HAVING)\\n\\nIt is illegal to use a `collection_valued_path_expression` within a `WHERE` or `HAVING` clause as part of a\\nconditional expression except in an `empty_collection_comparison_expression`, in a `collection_member_expression`,\\nor as an argument to the `SIZE` operator.\\n\\n#### JPQL Input Parameters\\n\\nEither positional or named parameters may be used. Positional and named parameters may not be mixed in a single\\nquery. **Input parameters can only be used in the `WHERE` clause or `HAVING` clause of a query**.\\n\\n##### JPQL Positional Parameters\\n\\nThe following rules apply to positional parameters.\\n\\n- Input parameters are designated by the question mark (`?`) prefix followed by an integer. For example: `?1`.\\n- Input parameters are numbered starting from 1. Note that the same parameter can be used more than once in the\\n  query string and that the ordering of the use of parameters within the query string need not conform to the order\\n  of the positional parameters.\\n\\n##### JPQL Named Parameters\\n\\nA named parameter is an identifier that is prefixed by the \\":\\" symbol. It follows the rules for identifiers defined\\nin [JPQL FROM Identifiers](#jpql-from-identifiers). Named parameters are case sensitive.\\n\\n```sql\\nSELECT pub\\nFROM Publisher pub\\nWHERE pub.revenue > :rev\\n```\\n\\n#### JPQL Conditional Expression Composition\\n\\nConditional expressions are composed of other conditional expressions, comparison operations, logical operations,\\npath expressions that evaluate to boolean values, boolean literals, and boolean input parameters. Arithmetic\\nexpressions can be used in comparison expressions. Arithmetic expressions are composed of other arithmetic\\nexpressions, arithmetic operations, path expressions that evaluate to numeric values, numeric literals, and numeric\\ninput parameters. Arithmetic operations use numeric promotion. Standard bracketing () for ordering expression\\nevaluation is supported. Conditional expressions are defined as follows:\\n\\n- `conditional_expression ::= conditional_term | conditional_expression OR conditional_term`\\n- `conditional_term ::= conditional_factor | conditional_term AND conditional_factor`\\n- `conditional_factor ::= [ NOT ] conditional_primary`\\n- `conditional_primary ::= simple_cond_expression | (conditional_expression)`\\n- `simple_cond_expression ::= comparison_expression | between_expression | like_expression | in_expression | null_comparison_expression | empty_collection_comparison_expression | collection_member_expression | exists_expression`\\n\\nAggregate functions can only be used in conditional expressions in a HAVING clause.\\n\\n#### JPQL Operators and Operator Precedence\\n\\nThe operators are listed below in order of decreasing precedence.\\n\\n- Navigation operator (.)\\n- Arithmetic operators: +, - unary *, / multiplication and division +, - addition and subtraction\\n- Comparison operators : `=`, `>`, `>=`, `<`, `<=`, `<>` (not equal), `[NOT] BETWEEN`, `[NOT] LIKE`, `[NOT] IN`, `IS\\n  [NOT] NULL`, `IS [NOT] EMPTY`, `[NOT] MEMBER [OF]`\\n- Logical operators: `NOT` `AND` `OR`\\n\\nThe following sections describe other operators used in specific expressions.\\n\\n#### JPQL Between Expressions\\n\\nThe syntax for the use of the comparison operator `[NOT] BETWEEN` in a conditional expression is as follows:\\n\\n- `arithmetic_expression [NOT] BETWEEN arithmetic_expression AND arithmetic_expression | string_expression [NOT] BETWEEN string_expression AND string_expression | datetime_expression [NOT] BETWEEN datetime_expression AND datetime_expression`\\n\\nThe BETWEEN expression `x BETWEEN y AND z` is semantically equivalent to `y <= x AND x <= z`,\\n\\n#### JPQL In Expressions\\n\\nThe syntax for the use of the comparison operator `[NOT] IN` in a conditional expression is as follows:\\n\\n- `in_expression ::= state_field_path_expression [NOT] IN ( in_item {, in_item}* | subquery)`\\n- `in_item ::= literal | input_parameter`\\n\\nThe `state_field_path_expression` must have a\\n\\n- string,\\n- numeric, or\\n- enum value.\\n\\nThe literal and/or input_parameter values must be like the same abstract schema type of the\\n`state_field_path_expression` in type. The results of the subquery must be like the same abstract schema type of the\\n`state_field_path_expression` in type. For example,, `o.country IN (\'UK\', \'US\', \'France\')`\\n\\n#### JPQL Like Expressions\\n\\nThe syntax for the use of the comparison operator `[NOT] LIKE` in a conditional expression is as follows:\\n\\n```text\\nstring_expression [NOT] LIKE pattern_value [ESCAPE escape_character]\\n```\\n\\n**The `string_expression` must have a string value**. The `pattern_value` is a string literal or a string-valued\\ninput parameter in which an underscore (`_`) stands for any single character, a percent (`%`) character stands for\\nany sequence of characters (including the empty sequence), and all other characters stand for themselves. The\\noptional `escape_character` is a single-character string literal or a character-valued input parameter (i.e., char\\nor Character) and is used to escape the special meaning of the underscore and percent characters in pattern_value. Examples are:\\n\\n- `asentence.word LIKE \'l_se\'` - is true for \'lose\' and false for \'loose\'\\n- `aword.underscored LIKE \'\\\\_%\' ESCAPE \'\\\\\'` - is true for \'_foo\' and false for \'bar\'\\n\\n#### JPQL Null Comparison Expressions\\n\\nThe syntax for the use of the comparison operator `IS NULL` in a conditional expression is as follows:\\n\\n```text\\n{single_valued_path_expression | input_parameter } IS [NOT] NULL\\n```\\n\\nA null comparison expression tests whether or not the single-valued path expression or input parameter is a `NULL`\\nvalue.\\n\\n#### JPQL Empty Collection Comparison Expressions\\n\\nThe syntax for the use of the comparison operator `IS EMPTY` in an `empty_collection_comparison_expression` is as follows:\\n\\n- `collection_valued_path_expression IS [NOT] EMPTY`\\n\\nThis expression tests whether or not the collection designated by the collection-valued path expression is empty\\n(i.e, has no elements).\\n\\nFor example, the following query will return all magazines that don\'t have any articles at all:\\n\\n```sql\\nSELECT mag\\nFROM Magazine mag\\nWHERE mag.articles IS EMPTY\\n```\\n\\nIf the value of the collection-valued path expression in an empty collection comparison expression is unknown, the\\nvalue of the empty comparison expression is unknown.\\n\\n#### JPQL Collection Member Expressions\\n\\nThe use of the comparison `collection_member_expression` is as follows: syntax for the operator MEMBER OF in an\\n\\n- `collection_member_expression ::= entity_expression [NOT] MEMBER [OF] collection_valued_path_expression`\\n- `entity_expression ::= single_valued_association_path_expression | simple_entity_expression`\\n- `simple_entity_expression ::= identification_variable | input_parameter`\\n\\nThis expression tests whether the designated value is a member of the collection specified by the collection-valued\\npath expression. If the collection valued path expression designates an empty collection, the value of the `MEMBER\\nOF` expression is `FALSE` and the value of the `NOT MEMBER OF` expression is `TRUE`. Otherwise, if the value of the\\ncollection-valued path expression or single-valued association-field path expression in the collection member\\nexpression is `NULL` or unknown, the value of the collection member expression is unknown.\\n\\n#### JPQL Exists Expressions\\n\\nAn `EXISTS` expression is a predicate that is true only if the result of the subquery consists of one or more\\nvalues and that is false otherwise. The syntax of an exists expression is\\n\\n- `exists_expression ::= [NOT] EXISTS (subquery)`\\n\\nThe use of the reserved word `OF` is optional in this expression.\\n\\n#### JPQL All or Any Expressions\\n\\nAn ALL conditional expression is a predicate that is true if the comparison operation is true for all values in the\\nresult of the subquery or **the result of the subquery is empty**. An ALL conditional expression is false if the\\nresult of the comparison is false for at least one row, and is unknown if neither true nor false. An ANY\\nconditional expression is a predicate that is true if the comparison operation is true for some value in the result\\nof the subquery. An ANY conditional expression is false **if the result of the subquery is empty** or if the\\ncomparison operation is false for every value in the result of the subquery, and is unknown if neither true nor\\nfalse. **The keyword SOME is synonymous with ANY**. The comparison operators used with ALL or ANY conditional\\nexpressions are `=`, `<`, `<=`, `>`, `>=`, `<>`. The result of the subquery must be like that of the other argument to\\nthe comparison operator in type.\\n\\n```text\\nall_or_any_expression ::= { ALL | ANY | SOME} (subquery)\\n```\\n\\nThe following example select the authors who make the highest salary for their magazine:\\n\\n```sql\\nSELECT auth\\nFROM Author auth\\nWHERE auth.salary >= ALL(SELECT a.salary FROM Author a WHERE a.magazine = auth.magazine)\\n```\\n\\n#### JPQL Subqueries\\n\\nSubqueries may be used in the `WHERE` or `HAVING` clause. The syntax for subqueries is as follows:\\n\\n- `subquery ::= simple_select_clause subquery_from_clause [where_clause] [groupby_clause] [having_clause]`\\n- Subqueries are restricted to the WHERE and HAVING clauses in this release. Support for subqueries in the FROM\\n  clause will be considered in a later release of the specification.\\n- `simple_select_clause ::= SELECT [DISTINCT] simple_select_expression`\\n- `subquery_from_clause ::= FROM subselect_identification_variable_declaration {, subselect_identification_variable_declaration}*`\\n- `subselect_identification_variable_declaration ::= identification_variable_declaration | association_path_expression [AS] identification_variable | collection_member_declaration`\\n- `simple_select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable`\\n\\nExamples:\\n\\n```sql\\nSELECT DISTINCT auth\\nFROM Author auth\\nWHERE EXISTS (\\n    SELECT spouseAuth\\n    FROM Author spouseAuth\\n    WHERE spouseAuth = auth.spouse\\n)\\n```\\n\\n```sql\\nSELECT mag\\nFROM Magazine mag\\nWHERE (SELECT COUNT(art) FROM mag.articles art) > 10\\n```\\n\\n#### JPQL Functional Expressions\\n\\nThe JPQL includes the following built-in functions, which may be used in the `WHERE` or `HAVING` clause of a query.\\nIf the value of any argument to a functional expression is null or unknown, the value of the functional expression\\nis unknown.\\n\\n##### JPQL String Functions\\n\\n- `functions_returning_strings ::= CONCAT(string_primar y, string_primary) | SUBSTRING(string_primar y, simple_arithmetic_expression, simple_arithmetic_expression) | TRIM([[trim_specification] [trim_character] FROM] string_primary) | LOWER(string_primar y) | UPPER(string_primar y)`\\n- `trim_specification ::= LEADING | TRAILING | BOTH`\\n- `functions_returning_numerics ::= LENGTH(string_primar y) | LOCATE(string_primar y, string_primar y[, simple_arithmetic_expression])`\\n\\nThe `CONCAT` function returns a string that is a concatenation of its arguments. The second and third arguments of\\nthe `SUBSTRING` function denote the starting position and length of the substring to be returned. These arguments\\nare integers. The first position of a string is denoted by 1. The `SUBSTRING` function returns a string. The `TRIM`\\nfunction trims the specified character from a string. If the character to be trimmed is not specified, it is\\nassumed to be space (or blank). The optional `trim_character` is a single-character string literal or a\\ncharacter-valued input parameter (i.e., char or Character). If a trim specification is not provided, BOTH is\\nassumed. The `TRIM` function returns the trimmed string. The `LOWER` and `UPPER` functions convert a string to\\nlower and upper case, respectively. They return a string. The `LOCATE` function returns the position of a given\\nstring within a string, starting the search at a specified position. It returns the first position at which the\\nstring was found as an integer. The first argument is the string to be located; the second argument is the string\\nto be searched; the optional third argument is an integer that represents the string position at which the search\\nis started (by default, the beginning of the string to be searched). The first position in a string is denoted by\\n\\"1.\\" If the string is not found, 0 is returned. The `LENGTH` function returns the length of the string in characters\\n\\"2.\\" as an integer.\\n\\n##### JPQL Arithmetic Functions\\n\\n```text\\nfunctions_returning_numerics ::= ABS(simple_arithmetic_expression) | SQRT(simple_arithmetic_expression) | MOD(simple_arithmetic_expression, simple_arithmetic_expression) | SIZE(collection_valued_path_expression)\\n```\\n\\nThe `ABS` function takes a numeric argument and returns a number (integer, float, or double) of the same type as the\\nargument to the function. The `SQRT` function takes a numeric argument and returns a double.\\n\\nThe `MOD` function takes two integer arguments and returns an integer. The `SIZE` function returns an integer\\nvalue, the number of elements of the collection. If the collection is empty, the `SIZE` function evaluates to zero.\\nNumeric arguments to these functions may correspond to the numeric Java object types as well as the primitive\\nnumeric types.\\n\\n##### JPQL Datetime Functions\\n\\n```text\\nfunctions_returning_datetime:= CURRENT_DATE | CURRENT_TIME | CURRENT_TIMESTAMP\\n```\\n\\nThe datetime functions return the value of current date, time, and timestamp on the database server.\\n\\nJPQL `GROUP BY`, `HAVING`\\n-------------------------\\n\\nThe `GROUP BY` construct enables the aggregation of values according to a set of properties. The `HAVING` construct\\nenables conditions to be specified that further restrict the query result. **Such conditions are restrictions upon\\nthe groups**. The syntax of the `GROUP BY` and `HAVING` clauses is as follows:\\n\\n- `groupby_clause ::= GROUP BY groupby_item {, groupby_item}*`\\n- `groupby_item ::= single_valued_path_expression | identification_variable`\\n- `having_clause ::= HAVING conditional_expression`\\n\\nIf a query contains both a `WHERE` clause and a `GROUP BY` clause, the effect is that of first applying the where\\nclause, and then forming the groups and filtering them according to the `HAVING` clause. The `HAVING` clause causes\\nthose groups to be retained that satisfy the condition of the `HAVING` clause. The requirements for the `SELECT`\\nclause when `GROUP BY` is used follow those of SQL: namely, **any item that appears in the `SELECT` clause (other\\nthan as an argument to an aggregate function) must also appear in the `GROUP BY` clause**. In forming the groups,\\nnull values are treated as the same for grouping purposes. Grouping by an entity is permitted. In this case, the\\nentity must contain no serialized state fields or lob-valued state fields. The `HAVING` clause must specify search\\nconditions over the grouping items or aggregate functions that apply to grouping items.\\n\\nJPQL `SELECT` Clause\\n--------------------\\n\\nThe `SELECT` clause denotes the query result. More than one value may be returned from the `SELECT` clause of a\\nquery. The `SELECT` clause may contain one or more of the following elements:\\n\\n- a single range variable or identification variable that ranges over an entity abstract schema type,\\n- a single-valued path expression,\\n- an aggregate select expression,\\n- a constructor expression.\\n\\nThe `SELECT` clause has the following syntax:\\n\\n- `select_clause ::= SELECT [DISTINCT] select_expression {, select_expression}*`\\n- `select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable | OBJECT(identification_variable) | constructor_expression`\\n- `constructor_expression ::= NEW constructor_name ( constructor_item {, constructor_item}* )`\\n- `constructor_item ::= single_valued_path_expression | aggregate_expression`\\n- `aggregate_expression ::= { AVG | MAX | MIN | SUM } ([DISTINCT] state_field_path_expression) | COUNT ([DISTINCT] identification_variable | state_field_path_expression | single_valued_association_path_expression)`\\n\\nFor example:\\n\\n```sql\\nSELECT pub.id, pub.revenue\\nFROM Publisher pub JOIN pub.magazines mag\\nWHERE mag.price > 5.00\\n```\\n\\n:::warning\\n\\n\u26a0\ufe0f Note that the `SELECT` clause must be specified to return only single-valued expressions. The query below is\\ntherefore not valid\\n\\n```text\\nSELECT mag.authors\\nFROM Magazine AS mag\\n```\\n\\n:::\\n\\nThe `DISTINCT` keyword is used to specify that duplicate values must be eliminated from the query result. If\\n`DISTINCT` is not specified, duplicate values are not eliminated. Standalone identification variables in the\\n`SELECT` clause may optionally be qualified by the `OBJECT` operator. The `SELECT` clause must not use the `OBJECT`\\noperator to qualify path expressions.\\n\\n### JPQL Result Type of the `SELECT` Clause\\n\\nThe type of the query result specified by the `SELECT` clause of a query is an entity abstract schema type, a\\nstate-field type, the result of an aggregate function, the result of a construction operation, or some sequence of\\nthese. The result type of the `SELECT` clause is defined by the the result types of the `select_expressions`\\ncontained in it. When multiple `select_expressions` are used in the `SELECT` clause, the result of the query is of\\ntype `Object[]`, and the elements in this result correspond in order to the order of their specification in the\\n`SELECT` clause and in type to the result types of each of the `select_expressions`. The type of the result of a\\n`select_expression` is as follows:\\n\\n- A `single_valued_path_expression` that is a `state_field_path_expression` results in an object of the same type\\n  as the corresponding state field of the entity. If the state field of the entity is a primitive type, the\\n  corresponding object type is returned.\\n- `single_valued_path_expression` that is a `single_valued_association_path_expression` results in an entity object\\n  of the type of the relationship field or the subtype of the relationship field of the entity object as determined\\n  by the object/relational mapping.\\n- The result type of an `identification_variable` is the type of the entity to which that identification variable\\n  corresponds or a subtype as determined by the object/relational mapping.\\n- The result type of `aggregate_expression` is defined in [JPQL Aggregate Functions](#jpql-aggregate-functions)\\n- The result type of a `constructor_expression` is the type of the class for which the constructor is defined. The\\n  types of the arguments to the constructor are defined by the above rules.\\n\\n### JPQL Constructor Expressions\\n\\n**In the `SELECT` Clause a constructor may be used in the `SELECT` list to return one or more Java instances. The\\nspecified class is not required to be an entity or to be mapped to the database. The constructor name must be fully\\nqualified**.\\n\\nIf an entity class name is specified in the `SELECT NEW` clause, the resulting entity instances are in the new\\nstate.\\n\\n```sql\\nSELECT NEW com.company.PublisherInfo(pub.id, pub.revenue, mag.price)\\nFROM Publisher pub JOIN pub.magazines mag\\nWHERE mag.price > 5.00\\n```\\n\\n### JPQL Null Values in the Query Result\\n\\nIf the result of a query corresponds to an association-field or state-field whose value is null, that null value is\\nreturned in the result of the query method. The `IS NOT NULL` construct can be used to eliminate such null values\\nfrom the result set of the query.\\n\\n:::note\\n\\nState-field types defined in terms of Java numeric primitive types cannot produce NULL values in the query result.\\nA query that returns such a state-field type as a result type must not return a null value.\\n\\n:::\\n\\n### JPQL Aggregate Functions\\n\\nIn the `SELECT` clause the result of a query may be the result of an aggregate function applied to a path\\nexpression. The following aggregate functions can be used in the `SELECT` clause of a query:\\n\\n- `AVG`\\n- `COUNT`\\n- `MAX`\\n- `MIN`\\n- `SUM`\\n\\nFor all aggregate functions except `COUNT`, the path expression that is the argument to the aggregate function must\\nterminate in a state-field. The path expression argument to `COUNT` may terminate in either a state-field or an\\nassociation-field, or the argument to `COUNT` may be an identification variable. Arguments to the functions `SUM`\\nand `AVG` must be numeric. Arguments to the functions `MAX` and `MIN` must correspond to orderable state-field\\ntypes (i.e., numeric types, string types, character types, or date types). The Java type that is contained in the\\nresult of a query using an aggregate function is as follows:\\n\\n- `COUNT` returns `Long`.\\n- `MAX` & `MIN` return the type of the state-field to which they are applied.\\n- `AVG` returns `Double`.\\n- `SUM` returns `Long` when applied to state-fields of integral types (other than `BigInteger`); `Double` when\\n  applied to state-fields of floating point types; `BigInteger` when applied to state-fields of type `BigInteger`;\\n  and `BigDecimal` when applied to state-fields of type `BigDecimal`.\\n\\nIf `SUM`, `AVG`, `MAX`, or `MIN` is used, and there are no values to which the aggregate function can be applied,\\nthe result of the aggregate function is `NULL`. If `COUNT` is used, and there are no values to which `COUNT` can be\\napplied, the result of the aggregate function is 0.\\n\\nThe argument to an aggregate function may be preceded by the keyword `DISTINCT` to specify that duplicate values\\nare to be eliminated before the aggregate function is applied. Null values are eliminated before the aggregate\\nfunction is applied, regardless of whether the keyword `DISTINCT` is specified.\\n\\nJPQL `ORDER BY` Clause\\n----------------------\\n\\nThe `ORDER BY` clause allows the objects or values that are returned by the query to be ordered. The syntax of the\\n`ORDER BY` clause is\\n\\n- `orderby_clause ::= ORDER BY orderby_item {, orderby_item}*`\\n- `orderby_item ::= state_field_path_expression [ASC | DESC]`\\n\\nIt is legal to specify `DISTINCT` with `MAX` or `MIN`, but it does not affect the result.\\n\\nWhen the `ORDER BY` clause is used in a query, each element of the `SELECT` clause of the query must be one of the\\nfollowing:\\n\\n- an identification variable x, optionally denoted as `OBJECT(x)`,\\n- a `single_valued_association_path_expression`, or a `state_field_path_expression`. For example:\\n  `SELECT pub FROM Publisher pub JOIN pub.magazines mag ORDER BY o.revenue, o.name`\\n\\nIf more than one orderby-item is specified, the left-to-right sequence of the orderby-item elements determines the\\nprecedence, whereby the leftmost orderby-item has highest precedence. The keyword `ASC` specifies that ascending\\nordering be used; the keyword `DESC` specifies that descending ordering be used. Ascending ordering is the default.\\nSQL rules for the ordering of null values apply: that is, all null values must appear before all non-null values in\\nthe ordering or all null values must appear after all non-null values in the ordering, but it is not specified\\nwhich. The ordering of the query result is preserved in the result of the query method if the `ORDER BY` clause is\\nused.\\n\\nJPQL Bulk Update and Delete\\n---------------------------\\n\\nOperations Bulk update and delete operations apply to entities of a single entity class (together with its\\nsubclasses, if any). Only one entity abstract schema type may be specified in the `FROM` or `UPDATE` clause. The\\nsyntax of these operations is as follows:\\n\\n- `update_statement ::= update_clause [where_clause]`\\n- `update_clause ::= UPDATE abstract_schema_name [[AS] identification_variable] SET update_item {, update_item}*`\\n- `update_item ::= [identification_variable.]{state_field | single_valued_association_field} = new_value`\\n- `new_value ::= simple_arithmetic_expression | string_primary | datetime_primary | boolean_primary | enum_primary simple_entity_expression | NULL`\\n- `delete_statement ::= delete_clause [where_clause]`\\n- `delete_clause ::= DELETE FROM abstract_schema_name [[AS] identification_variable]`\\n\\nThe syntax of the `WHERE` clause is described in [JPQL WHERE Clause](#jpql-where-clause). A delete operation only\\napplies to entities of the specified class and its subclasses. It does not cascade to related entities. The\\n`new_value` specified for an update operation must be compatible in type with the state-field to which it is\\nassigned. Bulk update maps directly to a database update operation, bypassing optimistic locking checks. Portable\\napplications must manually update the value of the version column, if desired, and/or manually validate the value\\nof the version column. **The persistence context is not synchronized with the result of the bulk update or delete.\\nCaution should be used when executing bulk update or delete operations because they may result in inconsistencies\\nbetween the database and the entities in the active persistence context. In general, bulk update and delete\\noperations should only be performed within a separate transaction or at the beginning of a transaction (before\\nentities have been accessed whose state might be affected by such operations)**.\\n\\nJPQL Null Values\\n----------------\\n\\nWhen the target of a reference does not exist in the database, its value is regarded as `NULL`. SQL 92 NULL\\nsemantics defines the evaluation of conditional expressions containing NULL values. The following is a brief\\ndescription of these semantics:\\n\\n- `Comparison or arithmetic operations with a NULL value always yield an unknown value.`\\n- `Two NULL values are not considered to be equal, the comparison yields an unknown value.`\\n- `Comparison or arithmetic operations with an unknown value always yield an unknown value.`\\n- `The IS NULL and IS NOT NULL operators convert a NULL state-field or single-valued association-field value into the respective TRUE or FALSE value.`\\n\\n:::info\\n\\nThe JPQL defines the empty string, \\"\\", as a string with 0 length, which is not equal to a `NULL` value. However,\\n`NULL` values and empty strings may not always be distinguished when queries are mapped to some databases.\\nApplication developers should therefore not rely on the semantics of query comparisons involving the empty string\\nand `NULL` value.\\n\\n:::\\n\\nJPQL Equality and Comparison Semantics\\n--------------------------------------\\n\\nOnly the values of like types are permitted to be compared. A type is like another type if they correspond to the\\nsame Java language type, or if one is a primitive Java language type and the other is the wrappered Java class type\\nequivalent (e.g., `int` and `Integer` are like types in this sense). There is one exception to this rule: it is\\nvalid to compare numeric values for which the rules of numeric promotion apply. Conditional expressions attempting\\nto compare non-like type values are disallowed except for this numeric case. Note that the arithmetic operators and\\ncomparison operators are permitted to be applied to state-fields and input parameters of the wrappered Java class\\nequivalents to the primitive numeric Java types. Two entities of the same abstract schema type are equal if and\\nonly if they have the same primary key value. Only equality/inequality comparisons over enums are required to be\\nsupported.\\n\\nThe Complete JPQL BNF\\n---------------------\\n\\nThe following is the BNF for the Java Persistence query language, from section 4.14 of the JSR 220 specification.\\n\\n- `QL_statement ::= select_statement | update_statement | delete_statement`\\n- `select_statement ::= select_clause from_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]`\\n- `update_statement ::= update_clause [where_clause]`\\n- `delete_statement ::= delete_clause [where_clause]`\\n- `from_clause ::= FROM identification_variable_declaration {, {identification_variable_declaration | collection_member_declaration}}*`\\n- `identification_variable_declaration ::= range_variable_declaration { join | fetch_join }*`\\n- `range_variable_declaration ::= abstract_schema_name [AS] identification_variable`\\n- `join ::= join_spec join_association_path_expression [AS] identification_variable`\\n- `fetch_join ::= join_spec FETCH join_association_path_expression`\\n- `association_path_expression ::= collection_valued_path_expression | single_valued_association_path_expression`\\n- `join_spec ::= [LEFT [OUTER]|INNER] JOIN`\\n- `join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression`\\n- `join_collection_valued_path_expression ::= identification_variable.collection_valued_association_field`\\n- `join_single_valued_association_path_expression ::= identification_variable.single_valued_association_field`\\n- `collection_member_declaration ::= IN (collection_valued_path_expression) [AS] identification_variable`\\n- `single_valued_path_expression ::= state_field_path_expression | single_valued_association_path_expression`\\n- `state_field_path_expression ::= {identification_variable | single_valued_association_path_expression}.state_field`\\n- `single_valued_association_path_expression ::= identification_variable.{single_valued_association_field.}* single_valued_association_field`\\n- `collection_valued_path_expression ::= identification_variable.{single_valued_association_field.}*collection_valued_association_field`\\n- `state_field ::= {embedded_class_state_field.}*simple_state_field`\\n- `update_clause ::= UPDATE abstract_schema_name [[AS] identification_variable] SET update_item {, update_item}*`\\n- `update_item ::= [identification_variable.]{state_field | single_valued_association_field}= new_value`\\n- `new_value ::= simple_arithmetic_expression | string_primary | datetime_primary | boolean_primary | enum_primary simple_entity_expression | NULL`\\n- `delete_clause ::= DELETE FROM abstract_schema_name [[AS] identification_variable]`\\n- `select_clause ::= SELECT [DISTINCT] select_expression {, select_expression}*`\\n- `select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable | OBJECT(identification_variable)| constructor_expression`\\n- `constructor_expression ::= NEW constructor_name( constructor_item {, constructor_item}*)`\\n- `constructor_item ::= single_valued_path_expression | aggregate_expression`\\n- `aggregate_expression ::= {AVG |MAX |MIN |SUM}([DISTINCT] state_field_path_expression) | COUNT ([DISTINCT] identification_variable | state_field_path_expression | single_valued_association_path_expression)`\\n- `where_clause ::= WHERE conditional_expression`\\n- `groupby_clause ::= GROUP BY groupby_item {, groupby_item}*`\\n- `groupby_item ::= single_valued_path_expression | identification_variable`\\n- `having_clause ::= HAVING conditional_expression`\\n- `orderby_clause ::= ORDER BY orderby_item {, orderby_item}*`\\n- `orderby_item ::= state_field_path_expression [ASC |DESC ]`\\n- `subquery ::= simple_select_clause subquery_from_clause [where_clause] [groupby_clause] [having_clause]`\\n- `subquery_from_clause ::= FROM subselect_identification_variable_declaration {, subselect_identification_variable_declaration}*`\\n- `subselect_identification_variable_declaration ::= identification_variable_declaration | association_path_expression [AS] identification_variable | collection_member_declaration`\\n- `simple_select_clause ::= SELECT [DISTINCT] simple_select_expression`\\n- `simple_select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable`\\n- `conditional_expression ::= conditional_term | conditional_expression OR conditional_term`\\n- `conditional_term ::= conditional_factor | conditional_term AND conditional_factor`\\n- `conditional_factor ::= [NOT ] conditional_primary`\\n- `conditional_primary ::= simple_cond_expression |(conditional_expression)`\\n- `simple_cond_expression ::= comparison_expression | between_expression | like_expression | in_expression | null_comparison_expression | empty_collection_comparison_expression | collection_member_expression | exists_expression`\\n- `between_expression ::= arithmetic_expression [NOT] BETWEEN arithmetic_expression AND arithmetic_expression | string_expression [NOT] BETWEEN string_expression AND string_expression | datetime_expression [NOT] BETWEEN datetime_expression AND datetime_expression`\\n- `in_expression ::= state_field_path_expression [NOT] IN( in_item {, in_item}* | subquery)`\\n- `in_item ::= literal | input_parameter`\\n- `like_expression ::= string_expression [NOT] LIKE pattern_value [ESCAPE escape_character]`\\n- `null_comparison_expression ::= {single_valued_path_expression | input_parameter}IS [NOT] NULL`\\n- `empty_collection_comparison_expression ::= collection_valued_path_expression IS [NOT] EMPTY`\\n- `collection_member_expression ::= entity_expression [NOT] MEMBER [OF] collection_valued_path_expression`\\n- `exists_expression ::= [NOT] EXISTS(subquery)`\\n- `all_or_any_expression ::= {ALL |ANY |SOME}(subquery)`\\n- `comparison_expression ::= string_expressioncomparison_operator{string_expression|all_or_any_expression}| boolean_expression {=|<>} {boolean_expression | all_or_any_expression} | enum_expression {=|<>} {enum_expression | all_or_any_expression} | datetime_expression comparison_operator {datetime_expression | all_or_any_expression} | entity_expression {= |<> } {entity_expression | all_or_any_expression} | arithmetic_expression comparison_operator {arithmetic_expression | all_or_any_expression}`\\n- `comparison_operator ::== |> |>= |< |<= |<>`\\n- `arithmetic_expression ::= simple_arithmetic_expression |(subquery)`\\n- `simple_arithmetic_expression ::= arithmetic_term | simple_arithmetic_expression {+ |- } arithmetic_term`\\n- `arithmetic_term ::= arithmetic_factor | arithmetic_term {* |/ } arithmetic_factor`\\n- `arithmetic_factor ::= [{+ |-}] arithmetic_primary`\\n- `arithmetic_primary ::= state_field_path_expression | numeric_literal | (simple_arithmetic_expression) | input_parameter | functions_returning_numerics | aggregate_expression`\\n- `string_expression ::= string_primary |(subquery)`\\n- `string_primary ::= state_field_path_expression | string_literal | input_parameter | functions_returning_strings | aggregate_expression`\\n- `datetime_expression ::= datetime_primary |(subquery)`\\n- `datetime_primary ::= state_field_path_expression | input_parameter | functions_returning_datetime | aggregate_expression`\\n- `boolean_expression ::= boolean_primary |(subquery)`\\n- `boolean_primary ::= state_field_path_expression | boolean_literal | input_parameter |`\\n- `enum_expression ::= enum_primary |(subquery)`\\n- `enum_primary ::= state_field_path_expression | enum_literal | input_parameter |`\\n- `entity_expression ::= single_valued_association_path_expression | simple_entity_expression`\\n- `simple_entity_expression ::= identification_variable | input_parameter`\\n- `functions_returning_numerics ::= LENGTH(string_primary)| LOCATE(string_primary,string_primary [, simple_arithmetic_expression]) | ABS(simple_arithmetic_expression) | SQRT(simple_arithmetic_expression) | MOD(simple_arithmetic_expression, simple_arithmetic_expression) | SIZE(collection_valued_path_expression)`\\n- `functions_returning_datetime ::= CURRENT_DATE| CURRENT_TIME | CURRENT_TIMESTAMP`\\n- `functions_returning_strings ::= CONCAT(string_primary, string_primary) | SUBSTRING(string_primary, simple_arithmetic_expression,simple_arithmetic_expression)| TRIM([[trim_specification] [trim_character] FROM] string_primary) | LOWER(string_primary) | UPPER(string_primary)`\\n- `trim_specification ::= LEADING | TRAILING | BOTH`"},{"id":"java-ee","metadata":{"permalink":"/blog/java-ee","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-10-26-java-ee/index.md","source":"@site/blog/2020-10-26-java-ee/index.md","title":"What is Java EE","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-10-26T00:00:00.000Z","formattedDate":"October 26, 2020","tags":[{"label":"Java","permalink":"/blog/tags/java"},{"label":"Standard","permalink":"/blog/tags/standard"}],"readingTime":5.665,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"java-ee","title":"What is Java EE","authors":"jiaqi","tags":["Java","Standard"]},"unlisted":false,"prevItem":{"title":"JQPL","permalink":"/blog/jpql"},"nextItem":{"title":"MySQL Troubleshooting","permalink":"/blog/mysql-troubleshooting"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n[Java EE](https://www.oracle.com/java/technologies/java-ee-glance.html) is a collection of specifications for developing\\nand deploying enterprise applications.\\n\\nIn general, enterprise applications refer to software hosted on servers that provide the applications that support the\\nenterprise.\\n\\nThe specifications (defined by Sun) describe services, application programming interfaces (APIs), and protocols.\\n\\nThe Java EE product provider is typically an application-server, web-server, or database-system vendor who provides\\nclasses that implement the interfaces defined in the specifications. These vendors compete on implementations of the\\nJava EE specifications.\\n\\nWhen a company requires Java EE experience what are they really asking for is experience using the technologies that\\nmake up Java EE. Frequently, a company will only be using a subset of the Java EE technologies.\\n\\nA reference implementation of Java EE is [GlassFish](https://javaee.github.io/glassfish/documentation)\\n\\n\x3c!--truncate--\x3e\\n\\nEvolution of Java EE\\n--------------------\\n\\nEver heard of Java EE? How about Java 2EE, J2EE, or now Jakarta EE? Actually, these are all different names for the same\\nthing: a set of enterprise specifications that extend Java SE. In this section, we discuss the evolution of Java EE.\\n\\n### History\\n\\nIn the first version of Java, Java enterprise extensions were simply\\n[a part of the core JDK](http://titanium.cs.berkeley.edu/doc/java-langspec-1.0/).\\n\\nThen, as part of Java 2 in 1999, these extensions were broken out of the standard binaries, and J2EE, or\\n[Java 2 Platform Enterprise Edition](https://www.oracle.com/java/technologies/appmodel.html), was born. It would keep\\nthat name until 2006.\\n\\nFor Java 5 in 2006, J2EE was renamed to Java EE or Java Platform Enterprise Edition. That name would stick all the way\\nto September 2017, when **something major happened**.\\n\\n**In September 2017,\\n[Oracle decided to give away the rights for Java EE to the Eclipse Foundation](https://www.redhat.com/en/blog/java-ee-moves-eclipse)\\n(the language is still owned by Oracle)**.\\n\\n![Error loading java-evolution.png](java-evolution.png)\\n\\n### In Transition\\n\\nActually, the Eclipse Foundation legally _had to_ rename Java EE. That\'s because Oracle has the rights over the \\"Java\\"\\nbrand.\\n\\nSo to choose the new name, the community voted and picked: **Jakarta EE**. In a certain way, it\'s still JEE.\\n\\nThis is still an evolving story, though, and the dust hasn\'t completely settled. For example, while Oracle open-sourced\\nthe source code, they did not open-source all the documentation. There\'s still a lot of discussion over this matter\\nbecause of legal issues that make it tricky to open-source documentation related to, for example, JMS and EJB.\\n\\nIt\'s not clear yet if new Eclipse Foundation documentation will be able to refer to the originals.\\n\\nAlso, curiously, the Eclipse Foundation can\'t create any new Java packages using the javax namespace, but it can create\\nnew classes and subclasses under the existing ones.\\n\\nThe transition also means [a new process for adding specifications](https://www.eclipse.org/projects/efsp/) to Jakarta\\nEE. To understand it better, let\'s take a look at what that process was like under Oracle and how it changes under the\\nEclipse Foundation in the next section.\\n\\n### The Future\\n\\nHistorically, in order for a feature to make it into \\"EE\\", we needed three things:\\n\\n1. a specification,\\n2. a reference implementation, and\\n3. tests\\n\\nThese three things could be provided by anyone in the community, and an Executive Committee would decide when these were\\nready to add to the language.\\n\\nTo better understand the past process, let\'s take a closer look at what JSRs(specification), Glassfish(implementation),\\nand the TCK(test) are and how they embodied new EE features.\\n\\n### The JCP -> EFSP\\n\\nIn the past, the process by which a new EE feature was born was called the Java Community Process\\n([JCP](https://jcp.org/en/home/index)).\\n\\nJava SE still uses the JCP today. But, since EE has changed its ownership, from Oracle to the Eclipse Foundation, we\\nhave a new and separate process for that. It\'s the Eclipse Foundation Specification Process\\n([EFSP](https://www.eclipse.org/projects/efsp/)) and it\'s an extension of the\\n[Eclipse Development Process](https://www.eclipse.org/projects/dev_process).\\n\\nThere are\\n[some important differences](https://blogs.eclipse.org/post/tanja-obradovic/how-eclipse-foundation-specification-process-efsp-different-java-community),\\nthough, mostly around \\"Transparency, Openness, Shared Burden and Vendor Neutrality\\"\\". The EFSP organizers, for example,\\nenvision collaborative working groups that are vendor-neutral, a certification process that is self-service, and an\\norganization that operates and governs as a meritocracy.\\n\\n### JSRs\\n\\nIn the JCP, the first step to adding a feature to EE was to create a JSR or Java Specification Request. The JSR was a\\nbit like the interface for an EE feature. The JCP Executive Committee reviewed and approved a completed JSR, and then\\nJSR contributors would code it up and make it available to the community.\\n\\nA good example of this was [JSR-339](https://jcp.org/en/jsr/detail?id=339)  - or JAX-RS - which was originally proposed\\nin 2011, approved by JCP in 2012 and finally released in 2013.\\n\\nAnd while the community could always weigh in while a specification was under discussion, time showed that an\\nimplementation-first approach \u2013 like in the case of [JSR 310](https://jcp.org/en/jsr/detail?id=310), `java.time`, and\\nJoda Time - tended to create more widely-accepted features and APIs.\\n\\nSo, the EFSP reflects this code-first view in its stated goal: \\"EFSP will be based on hands-on experimenting and coding\\nfirst, as a way to prove something is worthy of documenting in a specification\\".\\n\\n### Glassfish\\n\\nThen, as part of the JCP, a JSR needed a reference implementation. This is a bit like the class that implements the\\ninterface. A reference implementation helps developers of compatible libraries or other organizations that want to\\ncreate their own implementation of the spec.\\n\\nFor Java EE features, the JCP used Glassfish for its reference implementations.\\n\\nAnd while this centralization on Glassfish simplified the discovery process for implementers, that centralization also\\nrequired more governance and had a tendency to favor one vendor over another.\\n\\nHence, the EFSP doesn\'t require a reference implementation, but instead only a compatible implementation. Simply put,\\nthis subtle change makes so that **implementations inside of a central architecture, like Glassfish, won\'t be\\ninadvertently preferred by the foundation**.\\n\\n### TCK\\n\\nFinally, the JCP required that EE features be tested through the Technology Compatibility Kit, or\\n[TCK](https://projects.eclipse.org/projects/ee4j.jakartaee-tck).\\n\\nThe TCK was a suite of tests to validate a specific EE JSR. Simply put, in order to comply with Java EE, an application\\nserver needs to implement all of its JSRs and pass all the tests on the designated TCK.\\n\\nNot much changes here. Oracle open-sourced the TCK as well as the EE JSRs. Of course, all future documents and the TCK\\nwill be open-source."},{"id":"mysql-troubleshooting","metadata":{"permalink":"/blog/mysql-troubleshooting","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-09-09-mysql-troubleshooting.md","source":"@site/blog/2020-09-09-mysql-troubleshooting.md","title":"MySQL Troubleshooting","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-09-09T00:00:00.000Z","formattedDate":"September 9, 2020","tags":[{"label":"MySQL","permalink":"/blog/tags/my-sql"},{"label":"Database","permalink":"/blog/tags/database"},{"label":"JPA","permalink":"/blog/tags/jpa"}],"readingTime":9.16,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"mysql-troubleshooting","title":"MySQL Troubleshooting","authors":"jiaqi","tags":["MySQL","Database","JPA"]},"unlisted":false,"prevItem":{"title":"What is Java EE","permalink":"/blog/java-ee"},"nextItem":{"title":"MySQL Security","permalink":"/blog/mysql-security"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\n\x3c!-- markdown-link-check-disable --\x3e\\n\\nI Forgot Password\\n-----------------\\n\\nLet\'s say you want to login to MySQL shell as root, whose password is lost. You could do\\n\\nStop and start mysql with `--skip-grant-tables` option\\n\\n```bash\\nmysql.server stop\\nmysql.server start --skip-grant-tables\\n```\\n\\nthen connect to your mysqld without username/password\\n\\n```bash\\nmysql\\n```\\n\\nDrop the user (e.g. `root`). After deleting the user, flush the mysql privileges. then create the user. Assuming we want\\nto create the user root @ localhost, these would be the commands:\\n\\n```bash\\ndrop user admin@localhost;\\nFLUSH PRIVILEGES;\\ncreate user admin@localhost identified by \'foo\'\\n\\nUPDATE mysql.user SET Grant_priv=\'Y\', Super_priv=\'Y\' WHERE User=\'root\';\\nFLUSH PRIVILEGES;\\nGRANT ALL ON *.* TO \'root\'@\'localhost\';\\n```\\n\\nthen we can login to MySQL with the new password\\n\\n```bash\\n$ mysql -h localhost -u root -pfoo\\nmysql: [Warning] Using a password on the command line interface can be insecure.\\nWelcome to the MySQL monitor.  Commands end with ; or \\\\g.\\nYour MySQL connection id is 12\\nServer version: 8.0.23 Homebrew\\n\\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\\n\\nOracle is a registered trademark of Oracle Corporation and/or its\\naffiliates. Other names may be trademarks of their respective\\nowners.\\n\\nType \'help;\' or \'\\\\h\' for help. Type \'\\\\c\' to clear the current input statement.\\n\\nmysql>\\n```\\n\\nIf `mysql` still complains about access denied after `mysql.server start --skip-grant-tables`, uninstall mysql and\\nmysql-client with\\n\\n```bash\\nbrew uninstall mysql mysql-client\\n```\\n\\nThen do not install mysql through homebrew, but from\\n[MySQL official page](https://downloads.mysql.com/archives/community/) instead.\\n\\n:::caution\\n\\nIt is very important to remember that the installation will show us a temporary root password. Please DO make sure to\\ncopy this as we will be needing it to reset our root password later\\n\\n:::\\n\\nWe will, however, still install mysql-client using homebrew\\"\\n\\n```bash\\nbrew install mysql-client\\n```\\n\\nThen we can do\\n\\n```bash\\nmysql -h localhost -u root -p\\n```\\n\\nMySQL won\'t allow us to do anything further unless we reset password using the temporary one given during the\\ninstallation step:\\n\\n```mysql\\nSET PASSWORD = PASSWORD(\'your_new_password\');\\n```\\n\\nExit mysql shell and re-enter it. We shall start using MySQL now.\\n\\n[Implicit Default Handling](https://dev.mysql.com/doc/refman/8.0/en/data-type-defaults.html)\\n---------------------------\\n\\nFor data entry into a `NOT NULL` column that has no explicit `DEFAULT` clause, if an `INSERT` or `REPLACE` statement\\nincludes no value for the column, or an `UPDATE` statement sets the column to `NULL`, MySQL handles the column according\\nto the **SQL mode** in effect at the time:\\n\\n- If strict SQL mode is enabled, an error occurs for transactional tables and the statement is rolled back. For\\n  nontransactional tables, an error occurs, but if this happens for the second or subsequent row of a multiple-row\\n  statement, the preceding rows are inserted.\\n- If strict mode is not enabled, MySQL sets the column to the **implicit default value** for the column data type.\\n\\n[Running through a quick check](https://dba.stackexchange.com/a/194135):\\n\\n```sql\\nSET sql_mode=\'\';\\nCREATE TABLE foo ( a int NOT NULL );\\n-- all of these insert the value 0\\nINSERT INTO foo (a) VALUES (DEFAULT);\\nINSERT INTO foo (a) VALUES (a);\\nINSERT INTO foo () VALUES ();\\n```\\n\\nWhipe it and set strict mode,\\n\\n```sql\\nTRUNCATE TABLE foo;\\nSET sql_mode=\'strict_all_tables\';\\n```\\n\\nRetry,\\n\\n```sql\\nINSERT INTO foo (a) VALUES (DEFAULT);\\nERROR 1364 (HY000): Field \'a\' doesn\'t have a default value\\n\\n-- still inserts \\"implicit default\\", doesn\'t gaf about strict mode.\\nINSERT INTO foo (a) VALUES (a);\\nQuery OK, 1 row affected (0.01 sec)\\n\\nINSERT INTO foo () VALUES ();\\nERROR 1364 (HY000): Field \'a\' doesn\'t have a default value\\n```\\n\\nYou\'ll see now only one row in the table which is a result of the\\n[goofy syntax](https://dba.stackexchange.com/q/194120/2639) that is still permitted with \\"strict mode\\".\\n\\n[Left Join Comes Out with Duplicate Rows](https://stackoverflow.com/questions/22769641/left-join-without-duplicate-rows-from-left-table)\\n-----------------------------------------\\n\\nThe cause of the duplicate rows is that the left table has rows that have more than 1 associated rows in the right\\ntable.\\n\\nThe solution is to `GROUP BY` the results.\\n\\nFor example, take a look at the following query:\\n\\n```csv\\ntbl_contents\\n\\ncontent_id  content_title    content_text\\n10002   New case Study   New case Study\\n10003   New case Study   New case Study\\n10004   New case Study   New case Study\\n10005   New case Study   New case Study\\n10006   New case Study   New case Study\\n10007   New case Study   New case Study\\n10008   New case Study   New case Study\\n10009   New case Study   New case Study\\n10010   SEO News Title   SEO News Text\\n10011   SEO News Title   SEO News Text\\n10012   Publish Contents SEO News Text\\n```\\n\\n```csv\\ntbl_media\\n\\nmedia_id    media_title  content_id\\n1000    New case Study   10012\\n1001    SEO News Title   10010\\n1002    SEO News Title   10011\\n1003    Publish Contents 10012\\n```\\n\\n```sql\\nSELECT\\n    C.content_id, C.content_title, M.media_id\\nFROM\\n    tbl_contents C LEFT JOIN tbl_media M ON M.content_id = C.content_id\\nORDER BY C.Content_DatePublished ASC\\n```\\n\\n```csv\\n10002   New case Study  2014-03-31 13:39:29.280 NULL\\n10003   New case Study  2014-03-31 14:23:06.727 NULL\\n10004   New case Study  2014-03-31 14:25:53.143 NULL\\n10005   New case Study  2014-03-31 14:26:06.993 NULL\\n10006   New case Study  2014-03-31 14:30:18.153 NULL\\n10007   New case Study  2014-03-31 14:30:42.513 NULL\\n10008   New case Study  2014-03-31 14:31:56.830 NULL\\n10009   New case Study  2014-03-31 14:35:18.040 NULL\\n10010   SEO News Title  2014-03-31 15:22:15.983 1001\\n10011   SEO News Title  2014-03-31 15:22:30.333 1002\\n10012   Publish         2014-03-31 15:25:11.753 1000\\n10012   Publish         2014-03-31 15:25:11.753 1003\\n```\\n\\nWe see that `10012` are coming up twice..., because some rows in tbl_contents has more than 1 associated rows in\\ntbl_media. To eliminate the duplicate:\\n\\n```sql\\nSELECT\\n    C.content_id,\\n    C.content_title,\\n    C.Content_DatePublished,\\n    M.media_id\\nFROM\\n    tbl_contents C LEFT JOIN tbl_media M ON M.content_id = C.content_id\\nGROUP BY\\n    C.content_id\\nORDER BY\\n    C.Content_DatePublished ASC\\n```\\n\\nLoading Large File into Database Causes \\"MySQL Server has gone away\\"\\n--------------------------------------------------------------------\\n\\nAccording to [documentation](https://dev.mysql.com/doc/refman/8.0/en/gone-away.html) and personal experience, the most\\ncommon reason is that you send a query to the server that is incorrect or [too large](#large-packet). If MySQL Server\\nreceives a packet that is too large or out of order, it assumes that something has gone wrong with the client and\\ncloses the connection. If you need big queries (for example, if you are working with big BLOB columns), you can\\nincrease the query limit by setting the server\'s `max_allowed_packet` variable, which has a default value of 64MB. You\\nmay also need to increase the maximum packet size on the client end.\\n\\n**Both the client and the server have their own `max_allowed_packet` variable, so if you want to handle big packets,\\nyou must increase this variable both in the client and in the server**.\\n\\nIf you are using the mysql **client program**, its default `max_allowed_packet` variable is 16MB. To set a larger value,\\nstart mysql like this:\\n\\n```bash\\nmysql --max_allowed_packet=32M\\n```\\n\\nThat sets the packet size to 32MB.\\n\\nThe server\'s default `max_allowed_packet` value is 64MB. You can increase this if the server needs to handle big\\nqueries (for example, if you are working with big BLOB columns). For example, to set the variable to 128MB, start the\\nserver like this:\\n\\n```bash\\nmysqld --max_allowed_packet=128M\\n```\\n\\nYou can also use an option file to set `max_allowed_packet`. For example, to set the size for the server to 128MB, add\\nthe following lines in an option file:\\n\\n```bash\\n[mysqld]\\nmax_allowed_packet=128M\\n```\\n\\nIt is safe to increase the value of this variable because the extra memory is allocated only when needed. For example,\\nMySQL Server allocates more memory only when you issue a long query or when MySQL Server must return a large result row.\\nThe small default value of the variable is a precaution to catch incorrect packets between the client and server and\\nalso to ensure that you do not run out of memory by using large packets accidentally.\\n\\nYou can also get strange problems with large packets if you are using large BLOB values but have not given MySQL Sever\\naccess to enough memory to handle the query. If you suspect this is the case, try adding `ulimit -d 256000` to the\\nbeginning of the `mysqld_safe` script and restarting MySQL Server.\\n\\n### Large Packet\\n\\nA communication packet is\\n\\n- a single SQL statement sent to the MySQL server, or\\n- a single row that is sent to the client, or\\n- a binary log event sent from a master replication server to a slave.\\n\\nWhen a MySQL client or the MySQL server receives a packet bigger than `max_allowed_packet` bytes, it issues an\\n`ER_NET_PACKET_TOO_LARGE` error and closes the connection.\\n\\nIllegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8mb4_general_ci,COERCIBLE) for operation \'=\'\\n-----------------------------------------------------------------------------------------------------------\\n\\nResolving this issues requires understanding of [MySQL collations](https://www.mysqltutorial.org/mysql-collation/).\\n\\nGo to the database related to the issue and issue the following command\\n\\n```bash\\nmysql> show variables WHERE variable_name like \\"col%\\";\\n+----------------------+-------------------+\\n| Variable_name        | Value             |\\n+----------------------+-------------------+\\n| collation_connection | latin1_swedish_ci |\\n| collation_database   | utf8_general_ci   |\\n| collation_server     | latin1_general_ci |\\n+----------------------+-------------------+\\n3 rows in set (0.02 sec)\\n```\\n\\nYou see the database collation is for UTF8.\\n\\nWhen you see the error \\"Illegal mix of collations...\\", it is complaining about a table whose collation is inconsistent\\nwith what\'s configured for \\"collation_database\\" shown above.\\n\\nGo to the table that throws the \\"Illegal mix of collations...\\" error and issue the following command:\\n\\n```bash\\nmysql> SELECT table_schema, table_name, column_name, character_set_name, collation_name\\n    -> FROM information_schema.columns\\n    -> WHERE table_name = \'xyz\'\\n    -> ORDER BY table_schema, table_name,ordinal_position;\\n\\n+-------------------+------------+--------------+--------------------+-------------------+\\n| table_schema      | table_name | column_name  | character_set_name | collation_name    |\\n+-------------------+------------+--------------+--------------------+-------------------+\\n| ...               | xyz        | id           | NULL               | NULL              |\\n| ...               | xyz        | name         | latin1             | latin1_swedish_ci |\\n| ...               | xyz        | gender       | NULL               | NULL              |\\n| ...               | xyz        | title        | latin1             | latin1_swedish_ci |\\n| ...               | xyz        | department   | latin1             | latin1_swedish_ci |\\n| ...               | xyz        | salary       | NULL               | NULL              |\\n| ...               | xyz        | email        | latin1             | latin1_swedish_ci |\\n| ...               | xyz        | phone        | latin1             | latin1_swedish_ci |\\n| ...               | xyz        | age          | NULL               | NULL              |\\n| ...               | xyz        | birthday     | latin1             | latin1_swedish_ci |\\n| ...               | xyz        | location     | latin1             | latin1_swedish_ci |\\n+-------------------+------------+--------------+--------------------+-------------------+\\n11 rows in set (0.39 sec)\\n```\\n\\nYou see the table collation has \\"latin1_swedish_ci\\", which is not UTF8. You will alter this table so that is aligns with\\ndatabase level config like this:\\n\\n```sql\\nALTER TABLE xyz CONVERT TO CHARACTER SET utf8 COLLATE \'utf8_bin\';\\n```\\n\\nIn case you would like to alter database level collation, you could try something like\\n\\n```sql\\n/* Set collations of system variables */\\nSET @@collation_connection = UTF8MB4_GENERAL_CI;\\nSET @@collation_database = UTF8MB4_GENERAL_CI;\\nSET @@collation_server = UTF8MB4_GENERAL_CI;\\n```\\n\\n\x3c!-- markdown-link-check-enable --\x3e"},{"id":"mysql-security","metadata":{"permalink":"/blog/mysql-security","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-09-08-mysql-security.md","source":"@site/blog/2020-09-08-mysql-security.md","title":"MySQL Security","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-09-08T00:00:00.000Z","formattedDate":"September 8, 2020","tags":[{"label":"MySQL","permalink":"/blog/tags/my-sql"},{"label":"Database","permalink":"/blog/tags/database"},{"label":"Security","permalink":"/blog/tags/security"},{"label":"JPA","permalink":"/blog/tags/jpa"}],"readingTime":4.77,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"mysql-security","title":"MySQL Security","authors":"jiaqi","tags":["MySQL","Database","Security","JPA"]},"unlisted":false,"prevItem":{"title":"MySQL Troubleshooting","permalink":"/blog/mysql-troubleshooting"},"nextItem":{"title":"How to Deal with Polymorphism in MySQL?","permalink":"/blog/mysql-polymorphism"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\nDespite being one of the best-known vulnerabilities, SQL Injection continues to rank on the top spot of the infamous\\n[OWASP Top 10\'s list](https://owasp.org/www-project-top-ten/) - now part of the more general Injection class.\\n\\n\x3c!--truncate--\x3e\\n\\nHow Applications Become Vulnerable to SQL Injection\\n---------------------------------------------------\\n\\nInjection attacks work because, for many applications, the only way to execute a given computation is to dynamically\\ngenerate code that is in turn run by another system or component. If in the process of generating this code we use\\nuntrusted data without proper sanitization, we leave an open door for hackers to exploit\\n\\nThis statement may sound a bit abstract, so let\'s take look at how this happens in practice with an example:\\n\\n```java\\npublic List<AccountDTO> unsafeFindAccountsByCustomerId(String customerId) throws SQLException {\\n    // UNSAFE !!! DON\'T DO THIS !!!\\n    String sql = \\"select \\"\\n            + \\"customer_id,acc_number,branch_id,balance \\"\\n            + \\"from Accounts where customer_id = \'\\"\\n            + customerId\\n            + \\"\'\\";\\n    Connection c = dataSource.getConnection();\\n    ResultSet rs = c.createStatement().executeQuery(sql);\\n    // ...\\n}\\n```\\n\\nThe problem with this code is obvious: we\'ve put the customerId\u2018s value into the query with no validation at all.\\nNothing bad will happen if we\'re sure that this value will only come from trusted sources, but can we?\\n\\nLet\'s imagine that this function is used in a REST API implementation for an account resource. Exploiting this code is\\ntrivial: all we have to do is to send a value that, when concatenated with the fixed part of the query, change its\\nintended behavior:\\n\\n```bash\\ncurl -X GET \'http://localhost:8080/accounts?customerId=abc%27%20or%20%271%27=%271\'\\n```\\n\\nAssuming the customerId parameter value goes unchecked until it reaches our function, here\'s what we\'d receive:\\n\\n```bash\\nabc\' or \'1\' = \'1\\n```\\n\\nWhen we join this value with the fixed part, we get the final SQL statement that will be executed:\\n\\n```sql\\nSELECT\\n    customer_id,\\n    acc_number,\\n    branch_id,\\n    balance\\nFROM\\n    Accounts\\nWHERE\\n    customerId = \'abc\' OR \'1\' = \'1\'\\n```\\n\\nProbably not what we\'ve wanted...\\n\\nI\'m using JPA. I Should be Safe. No\\n-----------------------------------\\n\\nThis is a common misconception. JPA and other ORMs relieves us from creating hand-coded SQL statements, but they won\'t\\nprevent us from writing vulnerable code.\\n\\nLet\'s see how the JPA version of the previous example looks:\\n\\n```java\\npublic List<AccountDTO> unsafeJpaFindAccountsByCustomerId(String customerId) {\\n    String jql = \\"from Account where customerId = \'\\" + customerId + \\"\'\\";\\n    TypedQuery<Account> q = em.createQuery(jql, Account.class);\\n    return q.getResultList()\\n            .stream()\\n            .map(this::toAccountDTO)\\n            .collect(Collectors.toList());\\n}\\n```\\n\\nThe same issue we\'ve pointed before is also present here: we\'re using unvalidated input to create a JPA query, so we\'re\\nexposed to the same kind of exploit here.\\n\\n### Prevention Techniques\\n\\nNow that we know what a SQL injection is, let\'s see how we can protect our code from this kind of attack. Here we\'re\\nfocusing on a couple of very effective techniques available in Java and other JVM languages, but similar concepts are\\navailable to other environments, such as PHP, .Net, Ruby and so forth.\\n\\nFor those looking for a complete list of available techniques, including database-specific ones, the\\n[OWASP](https://www.owasp.org/) Project maintains a\\n[SQL Injection Prevention Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html),\\nwhich is a good place to learn more about the subject.\\n\\n#### Parameterized Queries\\n\\nThis technique consists of using prepared statements with the question mark placeholder (\\"`?`\\") in our queries\\nwhenever we need to insert a user-supplied value. This is very effective and, unless there\'s a bug in the JDBC driver\'s\\nimplementation, immune to exploits.\\n\\nLet\'s rewrite our example function to use this technique:\\n\\n```java\\npublic List<AccountDTO> safeFindAccountsByCustomerId(String customerId) throws Exception {\\n    String sql = \\"select \\"\\n            + \\"customer_id, acc_number, branch_id, balance from Accounts\\"\\n            + \\"where customer_id = ?\\";\\n\\n    Connection c = dataSource.getConnection();\\n    PreparedStatement p = c.prepareStatement(sql);\\n    p.setString(1, customerId);\\n    ResultSet rs = p.executeQuery(sql));\\n    // omitted - process rows and return an account list\\n}\\n```\\n\\nHere we\'ve used the `prepareStatement()` method available in the `Connection` instance to get a\\n`PreparedStatement`. This interface extends the regular `Statement` interface with several methods that allow us to\\nsafely insert user-supplied values in a query before executing it. For JPA, we have a similar feature:\\n\\n```java\\nString jql = \\"FROM Account WHERE customerId = :customerId\\";\\nTypedQuery<Account> query = em.createQuery(jql, Account.class)\\n        .setParameter(\\"customerId\\", customerId);\\n// Execute query and return mapped results (omitted)\\n```\\n\\n**As a bonus, this approach usually results in a better performing query, since most databases can cache the query plan\\nassociated with a prepared statement.**\\n\\nPlease note that this approach only works for placeholders used as values. For instance, we can\'t use placeholders to\\ndynamically change the name of a table:\\n\\n```java\\n// This WILL NOT WORK !!!\\nPreparedStatement p = c.prepareStatement(\\"select count(*) from ?\\");\\np.setString(1, tableName);\\n```\\n\\nHere, JPA won\'t help either:\\n\\n```java\\n// This WILL NOT WORK EITHER !!!\\nentityManager\\n    .createQuery(\\"SELECT COUNT(*) FROM :tableName\\", Long.class)\\n    .setParameter(\\"tableName\\", tableName);\\n    .getSingleResult();\\n```\\n\\nIn both cases, we\'ll get a runtime error.\\n\\nThe main reason behind this is the very nature of a prepared statement: database servers use them to cache the query\\nplan required to pull the result set, which usually is the same for any possible value. This is not true for table names\\nand other constructs available in the SQL language such as columns used in an order by clause."},{"id":"mysql-polymorphism","metadata":{"permalink":"/blog/mysql-polymorphism","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-09-06-mysql-polymorphism/index.md","source":"@site/blog/2020-09-06-mysql-polymorphism/index.md","title":"How to Deal with Polymorphism in MySQL?","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-09-06T00:00:00.000Z","formattedDate":"September 6, 2020","tags":[{"label":"MySQL","permalink":"/blog/tags/my-sql"},{"label":"Database","permalink":"/blog/tags/database"},{"label":"JPA","permalink":"/blog/tags/jpa"}],"readingTime":2.1,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"mysql-polymorphism","title":"How to Deal with Polymorphism in MySQL?","authors":"jiaqi","tags":["MySQL","Database","JPA"]},"unlisted":false,"prevItem":{"title":"MySQL Security","permalink":"/blog/mysql-security"},"nextItem":{"title":"Programming MySQL","permalink":"/blog/mysql-programming"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\n[Single Table Inheritance](http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html)\\n--------------------------\\n\\n**Represents an inheritance hierarchy of classes as a single table that has columns for all the fields of the various\\nclasses**.\\n\\nFor a full description see _Patterns of Enterprise Application Architecture - Martin Fowler (The Addison-Wesley\\nSignature Series)_ page 278\\n\\n![Single Table Inheritance Example Diagram](./single-table-inheritance.png)\\n\\nRelational databases don\'t support inheritance, so when mapping from objects to databases we have to consider how to\\nrepresent our nice inheritance structures in relational tables. When mapping to a relational database, we try to\\nminimize the joins that can quickly mount up when processing an inheritance structure in multiple tables. Single Table\\nInheritance maps all fields of all classes of an inheritance structure into a single table.\\n\\n[Class Table Inheritance](http://www.martinfowler.com/eaaCatalog/classTableInheritance.html)\\n-------------------------\\n\\n**Represents an inheritance hierarchy of classes with one table for each class**.\\n\\nFor a full description see _Patterns of Enterprise Application Architecture - Martin Fowler (The Addison-Wesley\\nSignature Series)_ page 285\\n\\n![Single Table Inheritance Example Diagram](class-table-inheritance.png)\\n\\nA very visible aspect of the object-relational mismatch is the fact that relational databases don\'t support inheritance.\\nYou want database structures that map clearly to the objects and allow links anywhere in the inheritance structure.\\nClass Table Inheritance supports this by using one database table per class in the inheritance structure.\\n\\n[Concrete Table Inheritance](http://www.martinfowler.com/eaaCatalog/concreteTableInheritance.html)\\n----------------------------\\n\\n**Represents an inheritance hierarchy of classes with one table per concrete class in the hierarchy**.\\n\\nFor a full description see _Patterns of Enterprise Application Architecture - Martin Fowler (The Addison-Wesley\\nSignature Series)_ page 293\\n\\n![Concrete Table Inheritance](concrete-table-inheritance.png)\\n\\nAs any object purist will tell you, relational databases don\'t support inheritance - a fact that complicates\\nobject-relational mapping. Thinking of tables from an object instance point of view, a sensible route is to take each\\nobject in memory and map it to a single database row. This implies Concrete Table Inheritance, where there\'s a table for\\neach concrete class in the inheritance hierarchy."},{"id":"mysql-programming","metadata":{"permalink":"/blog/mysql-programming","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-08-29-mysql-programming/index.md","source":"@site/blog/2020-08-29-mysql-programming/index.md","title":"Programming MySQL","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-08-29T00:00:00.000Z","formattedDate":"August 29, 2020","tags":[{"label":"MySQL","permalink":"/blog/tags/my-sql"},{"label":"Database","permalink":"/blog/tags/database"},{"label":"JPA","permalink":"/blog/tags/jpa"}],"readingTime":6,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"mysql-programming","title":"Programming MySQL","authors":"jiaqi","tags":["MySQL","Database","JPA"]},"unlisted":false,"prevItem":{"title":"How to Deal with Polymorphism in MySQL?","permalink":"/blog/mysql-polymorphism"},"nextItem":{"title":"Programming Oracle Database","permalink":"/blog/oracle-programming"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\n\x3c!-- markdown-link-check-disable --\x3e\\n\\nShell\\n-----\\n\\n### Adjust Display Settings of MySQL Command Line\\n\\nYou may notice that command line result of mysql is not displaying results properly. Some columns of table are in the\\nfirst line and some are in the second line. Output is also broken into two rows. How do we adjust these settings so that\\nit properly display results?\\n\\nWe can use the `\\\\G` command (instead of the `;`) at the end of our SQL queries:\\n\\n```sql\\nSELECT * FROM USER \\\\G\\n```\\n\\nIt will display your table in row form instead of column form.\\n\\n### Connecting to MySQL From the Command Line\\n\\n```bash\\nmysql -u USERNAME -pPASSWORD -h HOSTNAMEORIP DATABASENAME --default-character-set=utf8\\n```\\n\\nThe `--default-character-set=utf8` option allows the UTF-8 character to be displayed properly in console\\n\\n#### How to Pass Password to mysql Command Line in a More \\"Secure\\" Way\\n\\n[Putting passwords on the command line](#connecting-to-mysql-from-the-command-line) is in-secure, because anyone with\\naccess to `/proc` can trivially read them as long as the program is running.\\n\\nThe safest way would be to create a new [config file](https://dev.mysql.com/doc/refman/8.0/en/option-file-options.html)\\nand pass it to `mysql` using either the `--defaults-file=` or `--defaults-extra-file=` command line option. The\\ndifference between the two is that the latter is read in addition to the default config files whereas with the former\\nonly the one file passed as the argument is used. The additional configuration file should contain something similar to:\\n\\n```text\\n[client]\\nuser=foo\\npassword=P@55w0rd\\n```\\n\\n:::caution\\n\\nMake sure that you secure this file.\\n\\n:::\\n\\nThen run:\\n\\n```bash\\nmysql --defaults-extra-file=<path to the new config file> --default-character-set=utf8 -h HOSTNAMEORIP DATABASENAME\\n```\\n\\n### Find databases containing a particular table in MySQL\\n\\nLet\'s say you would like to locate a table whose name is `foo`:\\n\\n```sql\\nSELECT\\n    table_schema AS database_name\\nFROM\\n    information_schema.tables\\nWHERE\\n    table_type = \'BASE TABLE\'\\n    AND table_name = \'foo\'\\nORDER BY\\n    table_schema;\\n```\\n\\n### Search for a Column from Database\\n\\n```sql\\nSELECT\\n    table_name,\\n    column_name\\nFROM\\n    information_schema.columns\\nWHERE\\n    column_name like \'%SearchedColumn%\'\\n```\\n\\n### Save MySQL Query Output to File\\n\\nTry executing the query from the your local client and redirect the output to a local file destination:\\n\\n```bash\\nmysql -user -pass -e \\"select cols from table where cols not null\\" > /tmp/output\\n```\\n\\n### [Conditional Insert](https://stackoverflow.com/a/913929)\\n\\nSuppose we have `x_table` with `columns (instance, user, item)` where instance ID is unique. I want to insert a new row\\nonly if the user already does not have a given item.\\n\\nFor example trying to insert `instance=919191 user=123 item=456`\\n\\n```sql\\nInsert into x_table (instance, user, item) values (919191, 123, 456)\\n    ONLY IF there are no rows where user=123 and item=456\\n```\\n\\nIf your DBMS does not impose limitations on which table you select from when you execute an insert, try:\\n\\n```sql\\nINSERT INTO x_table(instance, user, item)\\n    SELECT 919191, 123, 456\\n        FROM dual\\n        WHERE NOT EXISTS (SELECT * FROM x_table\\n                             WHERE user = 123\\n                               AND item = 456)\\n```\\n\\nIn this, `dual` is a table with one row only (found originally in Oracle, now in mysql too). The logic is that the\\n`SELECT` statement generates a single row of data with the required values, but only when the values are not already\\nfound.\\n\\nAlternatively, look at the MERGE statement.\\n\\n### Implement Paging\\n\\n[From the MySQL documentation](https://dev.mysql.com/doc/refman/8.0/en/select.html#id1026131):\\n\\nThe `LIMIT` clause can be used to constrain the number of rows returned by the `SELECT` statement. `LIMIT` takes one or\\ntwo numeric arguments, which must both be non-negative integer constants, with these exceptions:\\n\\n* Within prepared statements, LIMIT parameters can be specified using ? placeholder markers.\\n* Within stored programs, LIMIT parameters can be specified using integer-valued routine parameters or local variables.\\n\\nWith two arguments, the first argument specifies the offset of the first row to return, and the second specifies the\\nmaximum number of rows to return. The offset of the initial row is 0 (not 1):\\n\\n```sql\\nSELECT * FROM tbl LIMIT 5,10;  # Retrieve rows 6-15\\n```\\n\\nWith one argument, the value specifies the number of rows to return from the beginning of the result set:\\n\\n```sql\\nSELECT * FROM tbl LIMIT 5;     # Retrieve first 5 rows\\n```\\n\\n### Listing Tables by Size\\n\\n```sql\\nSELECT\\n    table_name AS `Table`,\\n    round(((data_length + index_length) / 1024 / 1024), 2) AS `Size in MB`\\nFROM information_schema.TABLES\\nWHERE table_schema = \\"$DB_NAME\\"\\nORDER BY `Size in MB`;\\n```\\n\\nwhere `$DB_NAME` is the name of the database whose tables are to be listed\\n\\n[To check the size of a single table (`$TABLE_NAME`) of a database (`$DB_NAME`)](https://stackoverflow.com/a/9620273):\\n\\n```sql\\nSELECT\\n    table_name AS `Table`,\\n    round(((data_length + index_length) / 1024 / 1024), 2) AS `Size in MB`\\nFROM information_schema.TABLES\\nWHERE table_schema = \\"$DB_NAME\\" AND table_name = \\"$TABLE_NAME\\";\\nORDER BY `Size in MB`\\n```\\n\\nScripting\\n---------\\n\\n### Calling SQL Script File from Other SQL Script File\\n\\nYou can use `source` command. So your script will be something like:\\n\\n```sql\\nuse your_db;\\nsource script/s1.sql;\\nsource script/s2.sql;\\n-- so on, so forth\\n```\\n\\n### User-Defined Variables\\n\\n[User Defined Varibles](https://dev.mysql.com/doc/refman/8.0/en/user-variables.html) can be used across scrips like\\nthis:\\n\\n`main.sql`:\\n\\n```sql\\n-- User-Defined Variables\\nSET @tom_id = 1;\\nSET @jack_id = 2;\\n\\nsource add_data_to_person_table.sql;\\n```\\n\\n`person.sql`:\\n\\n```sql\\nINSERT INTO\\n    Person (id, name)\\nVALUES\\n    (@tom_id, \\"TOME\\"),\\n    (@jack_id, \\"JACK\\");\\n```\\n\\nMySQL Functions\\n---------------\\n\\nMySQL has many built-in functions.\\n\\n### IF\\n\\nReturns a value if a condition is `TRUE`, or another value if a condition is `FALSE`. For example, Return \\"YES\\" if the\\ncondition is TRUE, or \\"NO\\" if the condition is FALSE:\\n\\n```sql\\nSELECT IF(500 < 1000, \\"YES\\", \\"NO\\");\\n```\\n\\nThis function is useful if we would like to replicate a table and update some column values on the flight:\\n\\n```sql\\nINSERT INTO some_table(column1, column2, column3)\\nSELECT column1, column2, IF(column3 = \\"Blue\\", \\"Dark Blue\\", \\"Dark Color\\")\\nFROM some_table;\\n```\\n\\nIn the example above, all rows with column value \\"Blue\\" will have \\"Dark Blue\\" as the new value for that column; all\\nother rows will be changed to \\"Dark Color\\".\\n\\nWe could have richer modifications, other than 2-branch modification, using\\n[CASE](https://www.w3schools.com/mysql/func_mysql_case.asp)\\n\\nMigration\\n---------\\n\\n### Copying Tables or Databases from One MySQL Server to Another\\n\\nWe could use `mysqldump` to export the data from one MySQL instance and `mysql` command line utility to load it into\\nanother.\\n\\nSuppose we have a `person` table in \\"prod\\" database hosted in \\"192.168.1.100\\" and we would like to migrate this table\\ndata into a dev instance (\\"192.168.1.101\\") for testing purposes.\\n\\n```bash\\nmysqldump --column-statistics=0 -u prod-user-name -pprodPassword -h 192.168.1.100 prod-database person --default-character-set=utf8 > dump.sql\\nmysql -u dev-user-name -pdevPwssword -h 192.168.1.101 --port=32228 dev-database < dump.sql\\n```\\n\\n:::note\\n\\nThe `--column-statistics=0` is set so that it prevents runtime error of\\n\\n```bash\\nmysqldump: Couldn\'t execute. Unknown table \'column_statistics\' in information_schema\\n```\\n\\n:::\\n\\n\x3c!-- markdown-link-check-enable --\x3e"},{"id":"oracle-programming","metadata":{"permalink":"/blog/oracle-programming","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-08-28-oracle-programming/index.md","source":"@site/blog/2020-08-28-oracle-programming/index.md","title":"Programming Oracle Database","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-08-28T00:00:00.000Z","formattedDate":"August 28, 2020","tags":[{"label":"Oracle","permalink":"/blog/tags/oracle"},{"label":"Database","permalink":"/blog/tags/database"},{"label":"JPA","permalink":"/blog/tags/jpa"}],"readingTime":7.485,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"oracle-programming","title":"Programming Oracle Database","authors":"jiaqi","tags":["Oracle","Database","JPA"]},"unlisted":false,"prevItem":{"title":"Programming MySQL","permalink":"/blog/mysql-programming"},"nextItem":{"title":"Reading and Writing Avro Files from the Command Line","permalink":"/blog/read-avro-command-line"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nShell\\n-----\\n\\n### Run Oracle SQL script and Exit Afterwards\\n\\n```bash\\nexit | sqlplus -S $user/$pwd@//$server:$port/$service_name @script.sql\\n```\\n\\nOne example value of `$service_name` could be \\"ORCL\\". Note that there is a `@` symble preceding the script\\npath(`script.sql`)\\n\\n### Shell Commands\\n\\n#### Display UTF8\\n\\nWhenever a client program (such as `sqlplus`) connects to the database, it tells the database what characterset it is\\nusing. Some environments may have a very restricted characterset and use something like US7ASCII so they don\'t get\\nanything that can upset them.\\n\\nAs you can see in the following example, what is output by a query is dependent on the NLS_LANG setting of a client.\\n\\n```shell\\nC:\\\\>set NLS_LANG=.US7ASCII\\nC:\\\\>sqlplus ???/???@xe\\n\\nSQL*Plus: Release 10.2.0.1.0 - Production on Wed Nov 3 09:31:32 2010\\n> select chr(193) from dual;\\n\\nC\\n-\\n?\\n\\n> quit\\n\\nC:\\\\>set NLS_LANG=.AL32UTF8\\nC:\\\\>sqlplus ???/???@xe\\n\\nSQL*Plus: Release 10.2.0.1.0 - Production on Wed Nov 3 09:31:49 2010\\n> select chr(193) from dual;\\n\\nC\\n-\\n\u2534\\n```\\n\\nIf your client is Windows, then try the above. If it is a unix(ish) platform, try\\n\\n```bash\\nexport NLS_LANG=.AL32UTF8\\n```\\n\\n#### Spool SQL Query Output to HTML format in SQLPLUS Oracle\\n\\nIn SQLPLUS:\\n\\n```sql\\nset pages 500\\nSET MARKUP HTML ON\\nspool report1.html\\nSelect * from hr.departments where department_id < 20;\\nspool off\\n```\\n\\nThis would generate a \\"report1.html\\" file in the directory where SQLPLUS command was invoked and the file looks like\\nthe following:\\n\\n![Error loading sqlplus-html.png](./sqlplus-html.png)\\n\\n#### Show Tables\\n\\nIf you have worked with MySQL, you may be familiar with the `SHOW TABLES` command that lists all tables in a database:\\n\\n```sql\\nSHOW TABLES;\\n```\\n\\nUnfortunately, Oracle **does not** directly support the `SHOW TABLES` command. However, you can list all tables in a\\ndatabase by querying from various data dictionary views.\\n\\n##### Show Tables Owned By the Current User\\n\\nTo show tables **owned** by the current user, you query from the `user_tables` view.\\n\\n```sql\\nSELECT table_name\\nFROM user_tables\\nORDER BY table_name;\\n```\\n\\nNote that this view does not show the `OWNER` column. Also, the user_tables table **does not** contain the other tables\\nthat are **accessible** by the current user.\\n\\n##### Show Tables Accessible By the Current User\\n\\nTo show all tables that are currently **accessible** by the current user, regardless of owners, you query from the\\n`all_tables` view:\\n\\n```sql\\nSELECT table_name\\nFROM all_tables\\nORDER BY table_name;\\n```\\n\\nIf you want to show all tables of a specific owner, you add the `OWNER` column in the `WHERE` clause as shown in the\\nfollowing query:\\n\\n```sql\\nSELECT *\\nFROM all_tables\\nWHERE OWNER = \'OT\'\\nORDER BY table_name;\\n```\\n\\n##### Show All Tables in the Oracle Database\\n\\nTo show **all tables** in the entire Oracle Database, you query from the `dba_tables` view as follows:\\n\\n```sql\\nSELECT table_name\\nFROM dba_tables;\\n```\\n\\nYou will get the following error message if you don\'t have access to the `dba_tables` view:\\n\\n```bash\\nORA-00942: table or view does not exist\\n```\\n\\nIn this case, you should request your database administrator to grant your account either privileges on the `dba_tables`\\nview, or `SELECT ANY DICTIONARY` privilege, or `SELECT_CATALOG_ROLE` privilege.\\n\\n#### [Comparing Dates](https://stackoverflow.com/a/34061999)\\n\\n```sql\\nSelect count(*) From Employee\\nWhere to_char(employee_date_hired, \'YYYMMMDDD\') > 19940620\\n```\\n\\nor\\n\\n```sql\\nSelect count(*) From Employee\\nemployee_date_hired > TO_DATE(\'20-06-1994\', \'DD-MM-YYYY\');\\n```\\n\\n#### [Show Last Command Run](https://stackoverflow.com/a/51193086)\\n\\nThe \'l\' command will show the last run command\\n\\n```sql\\nSQL> l\\n    1* select owner, count(1) from dba_tables group by owner\\nSQL>\\n```\\n\\nTo get more than that, turn on history\\n\\n```sql\\nSQL> set history on\\nSQL> history\\n  1  select * from dual;\\n  2  select sysdate from dual;\\n  3  show history\\n```\\n\\n#### [Get A List of All Tables](https://stackoverflow.com/a/205746)\\n\\n```sql\\nSELECT OWNER, TABLE_NAME\\nFROM DBA_TABLES;\\n```\\n\\nThis is assuming that you have access to the `DBA_TABLES` data dictionary view. If you do not have those privileges but\\nneed them, you can request that the DBA explicitly grants you privileges on that table, or, that the DBA grants you the\\n`SELECT ANY DICTIONARY` privilege or the `SELECT_CATALOG_ROLE` role (either of which would allow you to query any data\\ndictionary table). Of course, you may want to exclude certain schemas like `SYS` and `SYSTEM` which have large numbers\\nof Oracle tables that you probably don\'t care about.\\n\\nAlternatively, if you do not have access to `DBA_TABLES`, you can see all the tables that your account has access to\\nthrough the `ALL_TABLES` view:\\n\\n```sql\\nSELECT OWNER, TABLE_NAME\\nFROM ALL_TABLES;\\n```\\n\\nAlthough, that may be a subset of the tables available in the database (`ALL_TABLES` shows you the information for all\\nthe tables that your user has been granted access to).\\n\\nIf you are only concerned with the tables that you own, not those that you have access to, you could use `USER_TABLES`:\\n\\n```sql\\nSELECT TABLE_NAME\\nFROM USER_TABLES;\\n```\\n\\nSince `USER_TABLES` only has information about the tables that you own, it does not have an `OWNER` column - the owner,\\nby definition, is you.\\n\\nOracle also has a number of legacy data dictionary views -- `TAB`, `DICT`, `TABS`, and `CAT` for example -- that could\\nbe used. In general, I would not suggest using these legacy views unless you absolutely need to backport your scripts to\\nOracle 6. Oracle has not changed these views in a long time so they often have problems with newer types of objects. For\\nexample, the `TAB` and `CAT` views both show information about tables that are in the user\'s recycle bin while the\\n`[DBA|ALL|USER]_TABLES` views all filter those out. `CAT` also shows information about materialized view logs with a\\n`TABLE_TYPE` of \\"TABLE\\" which is unlikely to be what you really want. `DICT` combines tables and synonyms and doesn\'t\\ntell you who owns the object.\\n\\nScripting\\n---------\\n\\n### WHENEVER SQLERROR\\n\\nWhen you have a script that has syntax errors, the script won\'t exit with error while executing the line that has the\\nsyntax error. We would like to, instead, halt the execution at that point for the script tuning purposes. To do that\\n`WHENEVER SQLERROR` could be used.\\n\\nThe commands in the following script cause SQL*Plus to exit and return the SQL error code if the SQL UPDATE command\\nfails:\\n\\n```sql\\nWHENEVER SQLERROR EXIT SQL.SQLCODE\\nUPDATE EMP_DETAILS_VIEW SET SALARY = SALARY*1.1;\\n```\\n\\n### Drop All User Tables\\n\\n```sql\\nBEGIN\\n   FOR cur_rec IN (SELECT object_name, object_type\\n                   FROM user_objects\\n                   WHERE object_type IN\\n                             (\'TABLE\',\\n                              \'VIEW\',\\n                              \'MATERIALIZED VIEW\',\\n                              \'PACKAGE\',\\n                              \'PROCEDURE\',\\n                              \'FUNCTION\',\\n                              \'SEQUENCE\',\\n                              \'SYNONYM\',\\n                              \'PACKAGE BODY\'\\n                             ))\\n   LOOP\\n      BEGIN\\n         IF cur_rec.object_type = \'TABLE\'\\n         THEN\\n            EXECUTE IMMEDIATE \'DROP \'\\n                              || cur_rec.object_type\\n                              || \' \\"\'\\n                              || cur_rec.object_name\\n                              || \'\\" CASCADE CONSTRAINTS\';\\n         ELSE\\n            EXECUTE IMMEDIATE \'DROP \'\\n                              || cur_rec.object_type\\n                              || \' \\"\'\\n                              || cur_rec.object_name\\n                              || \'\\"\';\\n         END IF;\\n      EXCEPTION\\n         WHEN OTHERS\\n         THEN\\n            DBMS_OUTPUT.put_line (\'FAILED: DROP \'\\n                                  || cur_rec.object_type\\n                                  || \' \\"\'\\n                                  || cur_rec.object_name\\n                                  || \'\\"\'\\n                                 );\\n      END;\\n   END LOOP;\\n   FOR cur_rec IN (SELECT *\\n                   FROM all_synonyms\\n                   WHERE table_owner IN (SELECT USER FROM dual))\\n   LOOP\\n      BEGIN\\n         EXECUTE IMMEDIATE \'DROP PUBLIC SYNONYM \' || cur_rec.synonym_name;\\n      END;\\n   END LOOP;\\nEND;\\n/\\n```\\n\\nTroubleshooting\\n---------------\\n\\n### Double Quotes v.s. Single Quotes\\n\\nUnlike MySQL which makes double and single quotes interchangeable.\\n\\n### Oracle: ORA-00955: name is already used by an existing object\\n\\n#### Cause 1\\n\\nYou probably have another object with the same name, for example, \'person\'\\n\\nYou can find it by quering `person`:\\n\\n```sql\\nSELECT * FROM user_objects WHERE object_name = \'person\';\\n```\\n\\nThen drop it (replace `TYPE_OF_OBJECT` by the type of the object from the above query):\\n\\n```sql\\nDROP TYPE_OF_OBJECT person\\n```\\n\\n#### Cause 2\\n\\nYou simply have a stupid `/` at the end of your statement, such as\\n\\n```sql\\nCREATE TABLE some_schema.person (\\n    ...\\n);\\n/\\n```\\n\\nNote the `/` at the end of the query statement\\n\\n### ORA-02261: such unique or primary key already exists in the table\\n\\nYou simply have a stupid `/` at the end of your statement, such as\\n\\n```sql\\nCREATE TABLE BRANCH(\\nBRA_CODE NUMBER NOT NULL PRIMARY KEY,\\nBRA_NAME VARCHAR(15),\\nBRA_ADDR VARCHAR(30),\\n CITY_ID NUMBER);\\n\\nALTER TABLE BRANCH ADD CONSTRAINT UNIQUE_BRANCH_NAME UNIQUE (BRA_NAME);\\n\\\\\\n```\\n\\nNote the `/` at the end of the query statement\\n\\n### Change varchar Column to CLOB\\n\\nGiven that the operation of moving from a varchar column to a CLOB is disallowed, the most straightforward way would be\\nto create a new column and move the data from the old column to the new column:\\n\\n```sql\\nALTER TABLE atable ADD (tmpdetails  CLOB);\\nUPDATE atable SET tmpdetails=details;\\nCOMMIT;\\nALTER TABLE atable DROP COLUMN details;\\nALTER TABLE atable RENAME COLUMN tmpdetails TO details;\\n```"},{"id":"read-avro-command-line","metadata":{"permalink":"/blog/read-avro-command-line","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-08-17-26-read-avro-command-line.md","source":"@site/blog/2020-08-17-26-read-avro-command-line.md","title":"Reading and Writing Avro Files from the Command Line","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2020-08-17T00:00:00.000Z","formattedDate":"August 17, 2020","tags":[{"label":"Java","permalink":"/blog/tags/java"},{"label":"Apache Avro","permalink":"/blog/tags/apache-avro"}],"readingTime":4.85,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"read-avro-command-line","title":"Reading and Writing Avro Files from the Command Line","authors":"jiaqi","tags":["Java","Apache Avro"]},"unlisted":false,"prevItem":{"title":"Programming Oracle Database","permalink":"/blog/oracle-programming"},"nextItem":{"title":"Refer to Environment Variables in POM","permalink":"/blog/env-var-in-pom"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nReading and Writing Avro Files from the Command Line\\n====================================================\\n\\n[Apache Avro](http://avro.apache.org/) is becoming one of the most popular data serialization formats nowadays, and this\\nholds true particularly for Hadoop-based big data platforms because tools like Pig, Hive and of course Hadoop itself\\nnatively support reading and writing data in Avro format. Many users seem to enjoy Avro but I have heard many complaints\\nabout not being able to conveniently read or write Avro files with command line tools \u2013 \\"Avro is nice, but why do I have\\nto write Java or Python code just to quickly see what\'s in a binary Avro file, or discover at least its Avro schema?\\"\\n\\nTo those users it comes as a surprise that Avro actually ships with exactly such command line tools but apparently they\\nare not prominently advertised or documented as such. In this short article I will show a few hands-on examples on how\\nto read, write, compress and convert data from and to binary Avro using Avro Tools 1.11.3.\\n\\nWhat We Want To Do\\n------------------\\n\\nHere is an overview of what we want to do:\\n\\n- We will start with an example Avro schema and a corresponding data file in plain-text JSON format.\\n- We will use Avro Tools to convert the JSON file into binary Avro, without and with compression (Snappy), and from\\n  binary Avro back to JSON.\\n\\nGetting Avro Tools\\n------------------\\n\\nYou can get a copy of the latest stable Avro Tools jar file from the\\n[Avro Releases](http://avro.apache.org/releases.html#Download) page. The actual file is in the `java` subdirectory of a\\ngiven Avro release version. Here is a direct link to\\n[avro-tools-1.11.3.jar](https://dlcdn.apache.org/avro/avro-1.11.3/java/avro-tools-1.11.3.jar) (11 MB) on the US Apache\\nmirror site.\\n\\nSave `avro-tools-1.11.3.jar` to a directory of your choice. I will use `~/avro-tools-1.11.3.jar` for the examples shown\\nbelow.\\n\\nTools Included in Avro Tools\\n----------------------------\\n\\nJust run Avro Tools without any parameters to see what\'s included:\\n\\n```bash\\n$ java -jar ~/avro-tools-1.11.3.jar\\n[...snip...]\\nAvailable tools:\\n      compile  Generates Java code for the given schema.\\n       concat  Concatenates avro files without re-compressing.\\n   fragtojson  Renders a binary-encoded Avro datum as JSON.\\n     fromjson  Reads JSON records and writes an Avro data file.\\n     fromtext  Imports a text file into an avro data file.\\n      getmeta  Prints out the metadata of an Avro data file.\\n    getschema  Prints out schema of an Avro data file.\\n          idl  Generates a JSON schema from an Avro IDL file\\n       induce  Induce schema/protocol from Java class/interface via reflection.\\n   jsontofrag  Renders a JSON-encoded Avro datum as binary.\\n      recodec  Alters the codec of a data file.\\n  rpcprotocol  Output the protocol of a RPC service\\n   rpcreceive  Opens an RPC Server and listens for one message.\\n      rpcsend  Sends a single RPC message.\\n       tether  Run a tethered mapreduce job.\\n       tojson  Dumps an Avro data file as JSON, one record per line.\\n       totext  Converts an Avro data file to a text file.\\n  trevni_meta  Dumps a Trevni file\'s metadata as JSON.\\ntrevni_random  Create a Trevni file filled with random instances of a schema.\\ntrevni_tojson  Dumps a Trevni file as JSON.\\n```\\n\\nLikewise run any particular tool without parameters to see its usage/help output. For example, here is the help of the\\n`fromjson` tool:\\n\\n```bash\\n$ java -jar ~/avro-tools-1.11.3.jar fromjson\\nExpected 1 arg: input_file\\nOption                                  Description\\n------                                  -----------\\n--codec                                 Compression codec (default: null)\\n--schema                                Schema\\n--schema-file                           Schema File\\n```\\n\\nNote that most of the tools write to `STDOUT`, so normally you would like to pipe their output to a file via the Bash\\n`>` redirection operator (particularly when working with large files).\\n\\nExample Data\\n------------\\n\\nIn the next sections I will use the following example data to demonstrate Avro Tools. You can also download the example\\nfiles [here](https://github.com/miguno/avro-cli-examples).\\n\\n### Avro Schema\\n\\nThe schema below defines a tuple of `(username, tweet, timestamp)` as the format of our example data records\\n\\nFile: `twitter.avsc`:\\n\\n```json\\n{\\n  \\"type\\" : \\"record\\",\\n  \\"name\\" : \\"twitter_schema\\",\\n  \\"namespace\\" : \\"com.miguno.avro\\",\\n  \\"fields\\" : [ {\\n    \\"name\\" : \\"username\\",\\n    \\"type\\" : \\"string\\",\\n    \\"doc\\"  : \\"Name of the user account on Twitter.com\\"\\n  }, {\\n    \\"name\\" : \\"tweet\\",\\n    \\"type\\" : \\"string\\",\\n    \\"doc\\"  : \\"The content of the user\'s Twitter message\\"\\n  }, {\\n    \\"name\\" : \\"timestamp\\",\\n    \\"type\\" : \\"long\\",\\n    \\"doc\\"  : \\"Unix epoch time in seconds\\"\\n  } ],\\n  \\"doc:\\" : \\"A basic schema for storing Twitter messages\\"\\n}\\n```\\n\\n### Data records in JSON format\\n\\nHere is some corresponding example data with two records that follow the schema defined in the previous section. We\\nstore this data in the file `twitter.json`.\\n\\nExample data in `twitter.json` in JSON format:\\n\\n```json\\n{\\"username\\":\\"miguno\\",\\"tweet\\":\\"Rock: Nerf paper, scissors is fine.\\",\\"timestamp\\": 1366150681}\\n{\\"username\\":\\"BlizzardCS\\",\\"tweet\\":\\"Works as intended.  Terran is IMBA.\\",\\"timestamp\\": 1366154481}\\n```\\n\\nConverting To and From Binary Avro\\n----------------------------------\\n\\n### JSON to Binary Avro\\n\\nWithout compression:\\n\\n```bash\\njava -jar ~/avro-tools-1.11.3.jar fromjson --schema-file twitter.avsc twitter.json > twitter.avro\\n```\\n\\nWith Snappy compression:\\n\\n```bash\\njava -jar ~/avro-tools-1.11.3.jar fromjson --codec snappy --schema-file twitter.avsc twitter.json > twitter.snappy.avro\\n```\\n\\n### Binary Avro to JSON\\n\\nThe same command will work on both uncompressed and compressed data.\\n\\n```bash\\njava -jar ~/avro-tools-1.11.3.jar tojson twitter.avro > twitter.json\\njava -jar ~/avro-tools-1.11.3.jar tojson twitter.snappy.avro > twitter.json\\n```\\n\\n### Retrieve Avro Schema from Binary Avro\\n\\nThe same command will work on both uncompressed and compressed data.\\n\\n```bash\\njava -jar ~/avro-tools-1.11.3.jar getschema twitter.avro > twitter.avsc\\njava -jar ~/avro-tools-1.11.3.jar getschema twitter.snappy.avro > twitter.avsc\\n```"},{"id":"env-var-in-pom","metadata":{"permalink":"/blog/env-var-in-pom","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2019-08-23-env-var-in-pom.md","source":"@site/blog/2019-08-23-env-var-in-pom.md","title":"Refer to Environment Variables in POM","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2019-08-23T00:00:00.000Z","formattedDate":"August 23, 2019","tags":[{"label":"Java","permalink":"/blog/tags/java"},{"label":"Maven","permalink":"/blog/tags/maven"}],"readingTime":1.43,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"env-var-in-pom","title":"Refer to Environment Variables in POM","authors":"jiaqi","tags":["Java","Maven"]},"unlisted":false,"prevItem":{"title":"Reading and Writing Avro Files from the Command Line","permalink":"/blog/read-avro-command-line"},"nextItem":{"title":"Java System Properties & Environment Variables API\'s","permalink":"/blog/java-env-properties"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nEnvironment Variables\\n---------------------\\n\\nTo refer to environment variables from the pom.xml, we can use the `${env.VARIABLE_NAME}` syntax.\\n\\nFor instance, let\'s use it to externalize the Java version in the build process:\\n\\n```xml\\n<build>\\n    <plugins>\\n        <plugin>\\n            <groupId>org.apache.maven.plugins</groupId>\\n            <artifactId>maven-compiler-plugin</artifactId>\\n            <version>3.8.1</version>\\n            <configuration>\\n                <source>${env.JAVA_VERSION}</source>\\n                <target>${env.JAVA_VERSION}</target>\\n            </configuration>\\n        </plugin>\\n    </plugins>\\n</build>\\n```\\n\\nWe should remember to pass the Java version information via environment variables. If we fail to do so, then we won\'t be\\nable to build the project.\\n\\nTo run the Maven goals or phases against such a build file, we should first export the environment variable. For\\ninstance\\n\\n```bash\\nexport JAVA_VERSION=17\\nmvn clean package\\n```\\n\\nIn order to provide a default when the `JAVA_VERSION` environment variable is missing we can use a Maven profile:\\n\\n```xml\\n<profiles>\\n    <profile>\\n        <id>default-java</id>\\n        <activation>\\n            <property>\\n                <name>!env.JAVA_VERSION</name>\\n            </property>\\n        </activation>\\n        <build>\\n            <plugins>\\n                <plugin>\\n                    <groupId>org.apache.maven.plugins</groupId>\\n                    <artifactId>maven-compiler-plugin</artifactId>\\n                    <version>3.8.1</version>\\n                    <configuration>\\n                        <source>1.8</source>\\n                        <target>1.8</target>\\n                    </configuration>\\n                </plugin>\\n            </plugins>\\n        </build>\\n    </profile>\\n</profiles>\\n```\\n\\nAs shown above, we\'re creating a profile and making it active only if the `JAVA_VERSION` environment variable is missing\\n(`!env.JAVA_VERSION` part). If that happens, then this new plugin definition will override the existing one."},{"id":"java-env-properties","metadata":{"permalink":"/blog/java-env-properties","editUrl":"https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2019-08-07-java-env-properties.md","source":"@site/blog/2019-08-07-java-env-properties.md","title":"Java System Properties & Environment Variables API\'s","description":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)","date":"2019-08-07T00:00:00.000Z","formattedDate":"August 7, 2019","tags":[{"label":"Java","permalink":"/blog/tags/java"}],"readingTime":2.155,"hasTruncateMarker":true,"authors":[{"name":"Jack","title":"Maintainer of ChatbotWS","url":"https://github.com/QubitPi","imageURL":"https://avatars.githubusercontent.com/u/16126939?v=4","key":"jiaqi"}],"frontMatter":{"slug":"java-env-properties","title":"Java System Properties & Environment Variables API\'s","authors":"jiaqi","tags":["Java"]},"unlisted":false,"prevItem":{"title":"Refer to Environment Variables in POM","permalink":"/blog/env-var-in-pom"}},"content":"[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)\\n\\n[//]: # (Licensed under the Apache License, Version 2.0 &#40;the \\"License\\"&#41;;)\\n[//]: # (you may not use this file except in compliance with the License.)\\n[//]: # (You may obtain a copy of the License at)\\n\\n[//]: # (    http://www.apache.org/licenses/LICENSE-2.0)\\n\\n[//]: # (Unless required by applicable law or agreed to in writing, software)\\n[//]: # (distributed under the License is distributed on an \\"AS IS\\" BASIS,)\\n[//]: # (WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.)\\n[//]: # (See the License for the specific language governing permissions and)\\n[//]: # (limitations under the License.)\\n\\n\x3c!--truncate--\x3e\\n\\nSystem Properties\\n-----------------\\n\\nThe Java platform uses a **Properties** object to provide information about the local system and configuration, and we\\ncall it **System Properties**.\\n\\nSystem Properties include information such as the current user, the current version of the Java runtime, and the file\\npath-name separator.\\n\\nIn the below code, we use `System.getProperty(\\"log_dir\\")` to read the value of the property `log_dir`. We also make use\\nof the default value parameter, so if the property doesn\'t exist, getProperty returns `/tmp/log`:\\n\\n```java\\nString log_dir = System.getProperty(\\"log_dir\\",\\"/tmp/log\\");\\n```\\n\\nTo update System Properties at runtime, we use the **System.setProperty** method:\\n\\n```java\\nSystem.setProperty(\\"log_dir\\", \\"/tmp/log\\");\\n```\\n\\nWe can pass our own properties or configurations values to the application using the **propertyName** command line\\nargument:\\n\\n```java\\njava -jar jarName -DpropertyName=value\\n```\\n\\nFor example\\n\\n```java\\njava -jar app -Dfoo=\\"bar\\"\\n```\\n\\nEnvironment Variables\\n---------------------\\n\\nEnvironment Variables are key/value pairs like Properties. Many Operating Systems use Environment Variables to allow\\n_configuration information to be passed into applications_.\\n\\nThe way to set an environment variable differs from one operating system to another. For example, on Linux, we use\\n\\n```bash\\nexport MY_ENV_VAR=foo\\n```\\n\\n_When creating a process, it inherits a clone environment of its parent process by default_.\\n\\nTo obtain a single environment variable programmatically, we can call **getenv** with the variable name:\\n\\n```java\\nString log_dir = System.getenv(\\"log_dir\\");\\n```\\n\\n:::caution\\n\\ngetenv() returns a _read-only_ Map. Trying to add values to the map throws an UnsupportedOperationException.\\n\\n:::\\n\\nThe Differences\\n---------------\\n\\nAlthough both are essentially maps that provide String values for String keys, let\'s look at a few differences:\\n\\n1. We can update Properties at runtime, while Environment Variables are an immutable copy of the Operating System\'s\\n   variables.\\n2. Properties are contained only within the Java platform, while Environment Variables are global at the Operating\\n   System level, available to all applications running on the same machine.\\n3. Properties must exist when packaging the application, but we can create Environment Variables on the Operating\\n   System at almost any point."}]}')}}]);