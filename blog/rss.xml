<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>ChatbotWS Blog</title>
        <link>https://chatbot.qubitpi.org/blog</link>
        <description>ChatbotWS Blog</description>
        <lastBuildDate>Fri, 21 Apr 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[(RestAssured) Match JSON Ignoring Order]]></title>
            <link>https://chatbot.qubitpi.org/blog/restassured-json</link>
            <guid>https://chatbot.qubitpi.org/blog/restassured-json</guid>
            <pubDate>Fri, 21 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>Use RestAssured's JsonPath to parse the JSON file into a Map and then compare it with Hamcrest Matchers. This way the
order didn't matter.</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token import static namespace" style="opacity:0.7">org</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static namespace" style="opacity:0.7">hamcrest</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static class-name">Matchers</span><span class="token import static punctuation" style="color:#393A34">.</span><span class="token import static">equalTo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">restassured</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">path</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">json</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">JsonPath</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">JsonPath</span><span class="token plain"> expectedJson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">JsonPath</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">File</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"/path/to/expected.json"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">given</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">body</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">equalTo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expectedJson</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Java</category>
            <category>Testing</category>
        </item>
        <item>
            <title><![CDATA[Provider v.s. @Provider]]></title>
            <link>https://chatbot.qubitpi.org/blog/provider</link>
            <guid>https://chatbot.qubitpi.org/blog/provider</guid>
            <pubDate>Sat, 24 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>A <strong>Provider</strong> is an interface defined in <a href="https://qubitpi.github.io/javax-inject/api/javax/inject/Provider.html" target="_blank" rel="noopener noreferrer">JSR 330</a>. It is part of the <em>general</em> dependency
injection concept in Java.</p>
<p>Whether we are on Java SR or EE, Provider will always be loadable from classpath. For example, the <a href="https://qubitpi.github.io/glassfish-hk2/" target="_blank" rel="noopener noreferrer">HK2</a> is an
implementation of JSR-330 in a JavaSE environment and it conforms to the JSR 330 standard by loading the
<a href="https://qubitpi.github.io/javax-inject/api/javax/inject/Provider.html" target="_blank" rel="noopener noreferrer">Provider</a> in its implementations.</p>
<p><strong>@Provider</strong>, on the other hand, is a
<a href="https://github.com/jakartaee/rest/blob/master/jaxrs-api/src/main/java/jakarta/ws/rs/ext/Provider.java" target="_blank" rel="noopener noreferrer"><em>Java EE/Jakarta EE concept</em></a>.
If we are developing Java EE applications, we can use both (<code>Provider</code> &amp; <code>@Provider</code>) at the same time.</p>]]></content:encoded>
            <category>Java</category>
        </item>
        <item>
            <title><![CDATA[Bearer Authentication]]></title>
            <link>https://chatbot.qubitpi.org/blog/bearer-authentication</link>
            <guid>https://chatbot.qubitpi.org/blog/bearer-authentication</guid>
            <pubDate>Mon, 12 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p><strong>Bearer authentication</strong> (also called <strong>token authentication</strong>) is an
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication" target="_blank" rel="noopener noreferrer">HTTP authentication scheme</a> that involves security tokens called bearer tokens. The name
"Bearer authentication" can be understood as "give access to the bearer of this token." The bearer token is a cryptic
string, usually generated by the server in response to a login request. The client must send this token in the
<code>Authorization</code> header when making requests to protected resources:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">Authorization: Bearer </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">token</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The Bearer authentication scheme was originally created as part of <a href="https://swagger.io/docs/specification/authentication/oauth2/" target="_blank" rel="noopener noreferrer">OAuth 2.0</a> in <a href="https://tools.ietf.org/html/rfc6750" target="_blank" rel="noopener noreferrer">RFC 6750</a>, but
is sometimes also used on its own. Similarly to <a href="https://swagger.io/docs/specification/authentication/basic-authentication/" target="_blank" rel="noopener noreferrer">Basic authentication</a>, Bearer authentication
should only be used over HTTPS (SSL).</p>]]></content:encoded>
            <category>Security</category>
        </item>
        <item>
            <title><![CDATA[Tired of Null Pointer Exceptions? Consider Using Java SE 8's "Optional"]]></title>
            <link>https://chatbot.qubitpi.org/blog/java-optional</link>
            <guid>https://chatbot.qubitpi.org/blog/java-optional</guid>
            <pubDate>Wed, 07 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>Make your code more readable and protect it against null pointer exceptions.</p>
<p>A wise man once said you are not a real Java programmer until you've dealt with a null pointer exception. Joking aside,
the null reference is the source of many problems because it is often used to denote the absence of a value. Java SE 8
introduces a new class called <strong>java.util.Optional</strong> that can alleviate some of these problems.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="dangers-of-null">Dangers of Null<a href="https://chatbot.qubitpi.org/blog/java-optional#dangers-of-null" class="hash-link" aria-label="Direct link to Dangers of Null" title="Direct link to Dangers of Null">​</a></h2>
<p>Let's start with an example to see the dangers of null by considering a nested object structure for a <code>Computer</code>, as
illustrated in Figure below</p>
<p><img loading="lazy" alt="Error loading java-optional-computer.png" src="https://chatbot.qubitpi.org/assets/images/java-optional-computer-1bc0c3f95c53bca9751cccc2d7c17534.png" class="img_kerH"></p>
<p>What's possibly problematic with the following code?</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> computer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSoundcard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This code looks pretty reasonable. However, many computers (for example, the Raspberry Pi) don't actually ship with a
sound card. So what is the result of <code>getSoundcard()</code>?</p>
<p>A common (bad) practice is to return the null reference to indicate the absence of a sound card. Unfortunately, this
means the call to <code>getUSB()</code> will try to return the USB port of a null reference, which will result in a
<code>NullPointerException</code> at runtime and stop your program from running further. Imagine if your program was running on a
customer's machine; what would your customer say if the program suddenly failed?</p>
<p>To give some historical context, Tony Hoare - one of the giants of computer science - wrote, "I call it my
billion-dollar mistake. It was the invention of the null reference in 1965. I couldn't resist the temptation to put in
a null reference, simply because it was so easy to implement."</p>
<p>What can you do to prevent unintended null pointer exceptions? You can be defensive and add checks to prevent null
dereferences, as shown below:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"UNKNOWN"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">computer </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Soundcard</span><span class="token plain"> soundcard </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> computer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSoundcard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">soundcard </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">USB</span><span class="token plain"> usb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> soundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> usb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, you can see that the code quickly becomes very ugly due to the nested checks. Unfortunately, we need a lot of
boilerplate code to make sure we don't get a NullPointerException. In addition, it's just annoying that these checks get
in the way of the business logic. In fact, they are decreasing the overall readability of our program.</p>
<p>Furthermore, it is an error-prone process; what if you forget to check that one property could be null? I will argue in
this post that using null to represent the absence of a value is a wrong approach. What we need is a better way to
model the absence and presence of a value.</p>
<p>To give some context, let's briefly look at what other programming languages have to offer.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="what-alternatives-to-null-are-there">What Alternatives to Null Are There<a href="https://chatbot.qubitpi.org/blog/java-optional#what-alternatives-to-null-are-there" class="hash-link" aria-label="Direct link to What Alternatives to Null Are There" title="Direct link to What Alternatives to Null Are There">​</a></h2>
<p>Languages such as Groovy have a <em>safe navigation operator</em> represented by "?." to safely navigate through potential
null references. (Note that it is soon to be included in C#, too, and it was proposed for Java SE 7 but didn't make it
into that release.) It works as follows:</p>
<div class="language-groovy codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-groovy codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">String version = computer?.getSoundcard()?.getUSB()?.getVersion()</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, the variable "version" will be assigned to null if <code>computer</code> is null, or <code>getSoundcard()</code> returns null,
or <code>getUSB()</code> returns null. You don't need to write complex nested conditions to check for null.</p>
<p>In addition, Groovy also includes the <em>Elvis operator</em> "?:" (if you look at it sideways, you'll recognize Elvis' famous
hair), which can be used for simple cases when a default value is needed. In the following, if the expression that uses
the safe navigation operator returns null, the default value "UNKNOWN" is returned; otherwise, the available version
tag is returned.</p>
<div class="language-groovy codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-groovy codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">String version = computer?.getSoundcard()?.getUSB()?.getVersion() ?: "UNKNOWN"</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Other functional languages, such as Haskell and Scala, take a different view. Haskell includes a <strong>Maybe</strong> type, which
essentially encapsulates an optional value. A value of type Maybe can contain either a value of a given type or
nothing. There is no concept of a null reference. Scala has a similar construct called <strong>Option[T]</strong> to encapsulate
the presence or absence of a value of type <code>T</code>. You then have to explicitly check whether a value is present or not
using operations available on the <code>Option</code> type, which enforces the idea of "null checking." <strong>You can no longer
"forget to do it" because it is enforced by the type system</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="java-8-optional-in-a-nutshell">Java 8 <em>Optional</em> in a Nutshell<a href="https://chatbot.qubitpi.org/blog/java-optional#java-8-optional-in-a-nutshell" class="hash-link" aria-label="Direct link to java-8-optional-in-a-nutshell" title="Direct link to java-8-optional-in-a-nutshell">​</a></h2>
<p>Java SE 8 introduces a new class called <code>java.util.Optional&lt;T&gt;</code> that is inspired from the ideas of Haskell and Scala.
It is a class that encapsulates an optional value, as illustrated in figure below. You can view <code>Optional</code> as a
single-value container that either contains a value or doesn't (it is then said to be "empty"):</p>
<p><img loading="lazy" alt="Error loading java-optional-eg.png" src="https://chatbot.qubitpi.org/assets/images/java-optional-eg-8885f6b471abfed0f95a6847eb88afaa.png" class="img_kerH"></p>
<p>We can update our model to make use of Optional, as shown in Listing 2:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Computer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Soundcard</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> soundcard</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Soundcard</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSoundcard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Soundcard</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">USB</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> usb</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">USB</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">USB</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The code above immediately shows that a computer might or might not have a sound card (the sound card is optional). In
addition, a sound card can optionally have a USB port. This is an improvement, because this new model can now reflect
clearly whether a given value is allowed to be missing.</p>
<p>But what can you actually do with an <code>Optional&lt;Soundcard&gt;</code> object? After all, you want to get to the USB port's version
number. In a nutshell, the <code>Optional</code> class includes methods to explicitly deal with the cases where a value is present
or absent. However, the advantage compared to null references is that the <code>Optional</code> class forces us to think about the
case when the value is not present. As a consequence, we can prevent unintended null pointer exceptions.</p>
<p>It is important to note that the intention of the <code>Optional</code> class is not to replace every single null reference.
Instead, its purpose is to help design more-comprehensible APIs so that by just reading the signature of a method, you
can tell whether you can expect an optional value. This forces you to actively unwrap an <code>Optional</code> to deal with the
absence of a value.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="using-optional">Using Optional<a href="https://chatbot.qubitpi.org/blog/java-optional#using-optional" class="hash-link" aria-label="Direct link to Using Optional" title="Direct link to Using Optional">​</a></h2>
<p>The Groovy code above can be written with Optional in Java as</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> computer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flatMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Computer</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getSoundcard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flatMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Soundcard</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">USB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">orElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UNKNOWN"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="creating-optional-objects">Creating Optional Objects<a href="https://chatbot.qubitpi.org/blog/java-optional#creating-optional-objects" class="hash-link" aria-label="Direct link to Creating Optional Objects" title="Direct link to Creating Optional Objects">​</a></h3>
<p>First, how do you create Optional objects? There are several ways:</p>
<p>Here is an empty Optional:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Soundcard</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> sc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Optional</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And here is an <code>Optional</code> with a non-null value:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Soundcard</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> sc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Optional</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Soundcard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the case above, if soundcard were null, a NullPointerException would be immediately thrown (rather than getting a
latent error once you try to access properties of the soundcard)</p>
<p>By using <strong>ofNullable</strong>, however, you can create an Optional object that may hold a null value:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Soundcard</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> sc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Optional</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ofNullable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">soundcard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If soundcard were null, the resulting <code>Optional</code> object would be empty.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="do-something-if-a-value-is-present">Do Something If a Value Is Present<a href="https://chatbot.qubitpi.org/blog/java-optional#do-something-if-a-value-is-present" class="hash-link" aria-label="Direct link to Do Something If a Value Is Present" title="Direct link to Do Something If a Value Is Present">​</a></h3>
<p>Now that you have an Optional object, you can access the methods available to explicitly deal with the presence or
absence of values. Instead of having to remember to do a null check, as follows:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">SoundCard</span><span class="token plain"> soundcard </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">soundcard </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">soundcard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can use the <strong>ifPresent()</strong> method, as follows:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Soundcard</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> soundcard </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">soundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ifPresent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You no longer need to do an explicit null check; it is enforced by the type system. If the Optional object were empty,
nothing would be printed.</p>
<p>You can also use the <strong>isPresent()</strong> method to find out whether a value is present in an Optional object. In addition,
there's a <strong>get()</strong> method that returns the value contained in the Optional object, if it is present. <em>Otherwise,
it throws a NoSuchElementException</em>. The two methods can be combined, as follows, to prevent exceptions:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">soundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isPresent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">soundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>However, this is not the recommended use of Optional because it's not much of an improvement over nested null checks,
and there are more idiomatic alternatives, which we explore below.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="default-values-and-actions">Default Values and Actions<a href="https://chatbot.qubitpi.org/blog/java-optional#default-values-and-actions" class="hash-link" aria-label="Direct link to Default Values and Actions" title="Direct link to Default Values and Actions">​</a></h3>
<p>A typical pattern is to return a default value if you determine that the result of an operation is null. In general,
you can use the ternary operator, as follows, to achieve this:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Soundcard</span><span class="token plain"> soundcard </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> maybeSoundcard </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> maybeSoundcard </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Soundcard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"basic_sound_card"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using an Optional object, you can rewrite this code by using the <strong>orElse()</strong> method, which provides a default value if
Optional is empty:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Soundcard</span><span class="token plain"> soundcard </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> maybeSoundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">orElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Soundcard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"defaut"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Similarly, you can use the <strong>orElseThrow()</strong> method, which instead of providing a default value if Optional is empty,
throws an exception:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Soundcard</span><span class="token plain"> soundcard </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> maybeSoundCard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">orElseThrow</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">IllegalStateException</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="rejecting-certain-values-using-the-filter-method">Rejecting Certain Values Using the filter Method<a href="https://chatbot.qubitpi.org/blog/java-optional#rejecting-certain-values-using-the-filter-method" class="hash-link" aria-label="Direct link to Rejecting Certain Values Using the filter Method" title="Direct link to Rejecting Certain Values Using the filter Method">​</a></h3>
<p>Often you need to call a method on an object and check some property. For example, you might need to check whether the
USB port is a particular version. To do this in a safe way, you first need to check whether the reference pointing to a
USB object is null and then call the <code>getVersion()</code> method, as follows:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">USB</span><span class="token plain"> usb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3.0"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ok"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This pattern can be rewritten using the <strong>filter</strong> method on an Optional object, as follows:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">USB</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> maybeUSB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">maybeUSB</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3.0"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ifPresent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ok"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>filter</code> method takes a predicate as an argument. If a value is present in the <code>Optional</code> object and it matches the
predicate, the filter method returns that value; otherwise, it returns an empty <code>Optional</code> object.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="extracting-and-transforming-values-using-the-map-method">Extracting and Transforming Values Using the map Method<a href="https://chatbot.qubitpi.org/blog/java-optional#extracting-and-transforming-values-using-the-map-method" class="hash-link" aria-label="Direct link to Extracting and Transforming Values Using the map Method" title="Direct link to Extracting and Transforming Values Using the map Method">​</a></h3>
<p>Another common pattern is to extract information from an object. For example, from a <code>Soundcard</code> object, you might want
to extract the USB object and then further check whether it is of the correct version. You would typically write the
following code:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">soundcard </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">USB</span><span class="token plain"> usb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> soundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3.0"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ok"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can rewrite this pattern of "checking for null and extracting" (here, the <code>Soundcard</code> object) using the map method.</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">USB</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> usb </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> maybeSoundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Soundcard</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There's a direct parallel to the <code>map</code> method used with streams. There, you pass a function to the <code>map</code> method, which
applies this function to each element of a stream. However, nothing happens if the stream is empty. The <code>map</code> method of
the <code>Optional</code> class does exactly the same: the value contained inside <code>Optional</code> is "transformed" by the function
passed as an argument (here, a method reference to extract the USB port), while nothing happens if <code>Optional</code> is empty.</p>
<p>Finally, we can combine the <code>map</code> method with the <code>filter</code> method to reject a USB port whose version is different than
3.0:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">maybeSoundcard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Soundcard</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"3.0"</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">usb</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ifPresent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"ok"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="cascading-optional-objects-using-the-flatmap-method">Cascading Optional Objects Using the flatMap Method<a href="https://chatbot.qubitpi.org/blog/java-optional#cascading-optional-objects-using-the-flatmap-method" class="hash-link" aria-label="Direct link to Cascading Optional Objects Using the flatMap Method" title="Direct link to Cascading Optional Objects Using the flatMap Method">​</a></h3>
<p>We've seen a few patterns that can be refactored to use Optional. So how can we write the following code in a safe way?</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> computer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSoundcard</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Notice that all this code does is extract one object from another one, which is exactly what the map method is for.
Earlier in the article, we changed our model so a Computer has an <code>Optional&lt;Soundcard&gt;</code> and a Soundcard has an
<code>Optional&lt;USB&gt;</code>, so we should be able to write the following:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> computer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Computer</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getSoundcard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Soundcard</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">USB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">orElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UNKNOWN"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Unfortunately, this code doesn't compile. Why? The variable computer is of type <code>Optional&lt;Computer&gt;</code>, so it is
perfectly correct to call the <code>map</code> method. However, <code>getSoundcard()</code> returns an object of type <code>Optional&lt;Soundcard&gt;</code>.
This means the result of the <code>map</code> operation is an object of type <code>Optional&lt;Optional&lt;Soundcard&gt;&gt;</code>. As a result, the
call to <code>getUSB()</code> is invalid because the outermost Optional contains as its value another Optional, which of course
doesn't support the <code>getUSB()</code> method</p>
<p>So how can we solve this problem? Again, we can look at a pattern you might have used previously with streams: the
<strong>flatMap</strong> method. With streams, the <code>flatMap</code> method takes a function as an argument, which returns another stream.
This function is applied to each element of a stream, which would result in a stream of streams. However, <code>flatMap</code> has
the effect of replacing each generated stream by the contents of that stream. In other words, all the separate streams
that are generated by the function get amalgamated or "flattened" into one single stream. What we want here is
something similar, but we want to "flatten" a two-level Optional into one.</p>
<p>Well, here's good news: <code>Optional</code> also supports a <code>flatMap</code> method. Its purpose is to apply the transformation
function on the value of an <code>Optional</code> and then flatten the resulting two-level Optional into a single one.</p>
<p>So, to make our code correct, we need to rewrite it as follows using <code>flatMap</code>:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> computer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flatMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Computer</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getSoundcard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flatMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Soundcard</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getUSB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">USB</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">orElse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UNKNOWN"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The first flatMap ensures that an <code>Optional&lt;Soundcard&gt;</code> is returned instead of an <code>Optional&lt;Optional&lt;Soundcard&gt;&gt;</code>, and
the second flatMap achieves the same purpose to return an <code>Optional&lt;USB&gt;</code>. Note that the third call just needs to be a
map() because getVersion() returns a String rather than an <code>Optional</code> object.</p>]]></content:encoded>
            <category>Java</category>
        </item>
        <item>
            <title><![CDATA[Happy Path]]></title>
            <link>https://chatbot.qubitpi.org/blog/happy-path</link>
            <guid>https://chatbot.qubitpi.org/blog/happy-path</guid>
            <pubDate>Sun, 03 Jul 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>In the context of software or information modeling, a happy path (sometimes called happy flow) is a default scenario
featuring no exceptional or error conditions. For example, the happy path for a function validating credit card numbers
would be where none of the validation rules raise an error, thus letting execution continue successfully to the end,
generating a positive response.</p>
<p>Process steps for a happy path are also used in the context of a <a href="https://en.wikipedia.org/wiki/Use_case" target="_blank" rel="noopener noreferrer">use case</a>. In
contrast to the happy path, process steps for alternate paths and exception paths may also be documented.</p>
<p>Happy path test is a well-defined test case using known input, which executes without exception and produces an expected
output. Happy path testing can show that a system meets its functional requirements but it doesn't guarantee a graceful
handling of error conditions or aid in finding hidden bugs.</p>
<blockquote>
<p>Happy day (or sunny day) scenario and golden path are synonyms for happy path.</p>
</blockquote>
<p>In use case analysis, there is only one happy path, but there may be any number of additional alternate path scenarios
which are all valid optional outcomes. If valid alternatives exist, the happy path is then identified as the default or
most likely positive alternative. The analysis may also show one or more exception paths. An exception path is taken as
the result of a fault condition. Use cases and the resulting interactions are commonly modeled in graphical languages
such as the Unified Modeling Language (UML) or SysML</p>]]></content:encoded>
            <category>Testing</category>
        </item>
        <item>
            <title><![CDATA[Defensive Copy]]></title>
            <link>https://chatbot.qubitpi.org/blog/defensive-copy</link>
            <guid>https://chatbot.qubitpi.org/blog/defensive-copy</guid>
            <pubDate>Wed, 05 Jan 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>A mutable object is simply an object which can change its state after construction. For example, <code>StringBuilder</code> and
<code>Date</code> are mutable objects, while <code>String</code> and <code>Integer</code> are immutable objects.</p>
<p>A class may have a mutable object as a field. There are two possible cases for how the state of a mutable object field
can change:</p>
<ol>
<li>its state can be changed only by the native class - the native class <strong>creates the mutable object field</strong>, and is the
only class which is directly aware of its existence</li>
<li>its state can be changed both by the native class and by its callers - the native class simply <strong>points to a mutable
object</strong> which was created elsewhere</li>
</ol>
<p>Both cases are valid design choices, but you must be aware of which one is appropriate for each case.</p>
<p><strong>If the <em>mutable</em> object field's state should be changed only by the native class, then a defensive copy of the mutable
object must be made any time it's passed into (constructors and set methods) or out of ("get" methods) the class</strong>. If
this is not done, then it's simple for the caller to break encapsulation, by changing the state of an object which is
simultaneously visible to both the class and its caller.</p>
<div class="theme-admonition theme-admonition-info admonition_dFHE alert alert--info"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_sFKi"><p>It is implied that the defensive copying is only required when the state is mutable</p></div></div>
<p>For example, <code>Planet</code> has a mutable object field <code>fDateOfDiscovery</code>, which is defensively copied in all constructors,
and in <code>getDateOfDiscovery</code>. <code>Planet</code> represents an immutable class, and has no "set" methods for its fields. Note that
if the defensive copy of <code>DateOfDiscovery</code> is not made, then <code>Planet</code> is no longer immutable!</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Date</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">* Planet is an immutable class, since there is no way to change</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">* its state after construction.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Planet</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Final primitive data is always immutable.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> mass</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * An immutable object field. (String objects never change state.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * A mutable object field. In this case, the state of this mutable field</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * is to be changed only by this class. (In other cases, it makes perfect</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * sense to allow the state of a field to be changed outside the native</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * class; this is the case when a field acts as a "pointer" to an object</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * created elsewhere.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * java.util.Date is used here only because its convenient for illustrating</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * a point about mutable objects. In new code, you should use</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * java.time classes, not java.util.Date.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token plain"> dateOfDiscovery</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Planet</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> mass</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token plain"> dateOfDiscovery</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mass </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mass</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//make a private copy of aDateOfDiscovery</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//this is the only way to keep the fDateOfDiscovery</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//field private, and shields this class from any changes that</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">//the caller may make to the original aDateOfDiscovery object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dateOfDiscovery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dateOfDiscovery</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * Returns a primitive value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * The caller can do whatever they want with the return value, without</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * affecting the internals of this class. Why? Because this is a primitive</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * value. The caller sees its "own" double that simply has the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * same value as fMass.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getMass</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> mass</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * Returns an immutable object.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * The caller gets a direct reference to the internal field. But this is not</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * dangerous, since String is immutable and cannot be changed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  /**</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  * Returns a mutable object - likely bad style.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  *</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  * The caller gets a direct reference to the internal field. This is usually dangerous,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  * since the Date object state can be changed both by this class and its caller.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  * That is, this class is no longer in complete control of dateOfDiscovery.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  public Date getDateOfDiscovery() {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//      return dateOfDiscovery;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * Returns a mutable object - good style.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * Returns a defensive copy of the field.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * The caller of this method can do anything they want with the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * returned Date object, without affecting the internals of this</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * class in any way. Why? Because they do not have a reference to</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * fDate. Rather, they are playing with a second Date that initially has the</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    * same data as fDate.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getDateOfDiscovery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dateOfDiscovery</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Java</category>
        </item>
        <item>
            <title><![CDATA[Understanding Weak References]]></title>
            <link>https://chatbot.qubitpi.org/blog/weak-references</link>
            <guid>https://chatbot.qubitpi.org/blog/weak-references</guid>
            <pubDate>Thu, 30 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="strong-references">Strong References<a href="https://chatbot.qubitpi.org/blog/weak-references#strong-references" class="hash-link" aria-label="Direct link to Strong References" title="Direct link to Strong References">​</a></h2>
<p>A <strong>strong reference</strong> is an ordinary Java reference, the kind you use every day. For example, the code:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">StringBuffer</span><span class="token plain"> buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">StringBuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>creates a new <code>StringBuffer</code> and stores a strong reference to it in the variable <code>buffer</code>. Yes, yes, this is kiddie
stuff, but bear with me. <em>The important part about strong references -- the part that makes them "strong" -- is how they
interact with the garbage collector</em>. Specifically, if an object is reachable via a chain of strong references (strongly
reachable), it is not eligible for garbage collection. As you don't want the garbage collector destroying objects you're
working on, this is normally exactly what you want.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="when-strong-references-are-too-strong">When Strong References are Too Strong<a href="https://chatbot.qubitpi.org/blog/weak-references#when-strong-references-are-too-strong" class="hash-link" aria-label="Direct link to When Strong References are Too Strong" title="Direct link to When Strong References are Too Strong">​</a></h2>
<p>It's not uncommon for an application to use classes that it can't reasonably extend. The class might simply be marked
<code>final</code>, or it could be something more complicated, such as an interface returned by a factory method backed by an
unknown (and possibly even unknowable) number of concrete implementations. Suppose you have to use a class <code>Widget</code> and,
for whatever reason, it isn't possible or practical to extend <code>Widget</code> to add new functionality.</p>
<p>What happens when you need to keep track of extra information about the object? In this case, suppose we find ourselves
needing to keep track of each Widget's serial number, but the Widget class doesn't actually have a serial number
property -- and because Widget isn't extensible, we can't add one. No problem at all, that's what <code>HashMaps</code> are for:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">serialNumberMap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">widget</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> widgetSerialNumber</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This might look okay on the surface, but the strong reference to widget will almost certainly cause problems. We have to
know (with 100% certainty) when a particular Widget's serial number is no longer needed, so we can remove its entry from
the map. Otherwise we're going to have a memory leak (if we don't remove Widgets when we should) or we're going to
inexplicably find ourselves missing serial numbers (if we remove Widgets that we're still using). If these problems
sound familiar, they should: they are exactly the problems that users of non-garbage-collected languages face when
trying to manage memory, and we're not supposed to have to worry about this in a more civilized language like Java.</p>
<p>Another common problem with strong references is caching, particular with very large structures like images. Suppose you
have an application which has to work with user-supplied images, like the web site design tool I work on. Naturally you
want to cache these images, because loading them from disk is very expensive and you want to avoid the possibility of
having two copies of the (potentially gigantic) image in memory at once. Because an image cache is supposed to prevent
us from reloading images when we don't absolutely need to, you will quickly realize that the cache should always contain
a reference to any image which is already in memory. With ordinary strong references, though, that reference itself will
force the image to remain in memory, which requires you (just as above) to somehow determine when the image is no longer
needed in memory and remove it from the cache, so that it becomes eligible for garbage collection. Once again you are
forced to duplicate the behavior of the garbage collector and manually determine whether or not an object should be in
memory.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="weak-references">Weak References<a href="https://chatbot.qubitpi.org/blog/weak-references#weak-references" class="hash-link" aria-label="Direct link to Weak References" title="Direct link to Weak References">​</a></h2>
<p>A <strong>weak reference</strong>, simply put, is a reference that isn't strong enough to force an object to remain in memory. Weak
references allow you to leverage the garbage collector's ability to determine reachability for you, so you don't have to
do it yourself. You create a weak reference like this:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">WeakReference</span><span class="token plain"> weakWidget </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WeakReference</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">widget</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and then elsewhere in the code you can use <code>weakWidget.get()</code> to get the actual Widget object. Of course the weak
reference isn't strong enough to prevent garbage collection, so you may find (if there are no strong references to the
widget) that <code>weakWidget.get()</code> suddenly starts returning <code>null</code>.</p>
<p>To solve the "widget serial number" problem above, the easiest thing to do is use the built-in <code>WeakHashMap</code> class.
<code>WeakHashMap</code> works exactly like <code>HashMap</code>, except that the keys (not the values!) are referred to using weak
references. If a <code>WeakHashMap</code> key becomes garbage, its entry is removed automatically. This avoids the pitfalls
described earlier and requires no changes other than the switch from <code>HashMap</code> to a <code>WeakHashMap</code>. If you're following
the standard convention of referring to your maps via the Map interface, no other code needs to even be aware of the
change.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="reference-queues">Reference Queues<a href="https://chatbot.qubitpi.org/blog/weak-references#reference-queues" class="hash-link" aria-label="Direct link to Reference Queues" title="Direct link to Reference Queues">​</a></h2>
<p>Once a <code>WeakReference</code> starts returning <code>null</code>, the object it pointed to has become garbage and the <code>WeakReference</code>
object is pretty much useless. This generally means that some sort of cleanup is required; <code>WeakHashMap</code>, for example,
has to remove such defunct entries to avoid holding onto an ever-increasing number of dead <code>WeakReferences</code>.</p>
<p>The <code>ReferenceQueue</code> class makes it easy to keep track of dead references. If you pass a <code>ReferenceQueue</code> into a weak
reference's constructor, the reference object will be automatically inserted into the reference queue when the object to
which it pointed becomes garbage. You can then, at some regular interval, process the <code>ReferenceQueue</code> and perform
whatever cleanup is needed for dead references.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="different-degrees-of-weakness">Different Degrees of Weakness<a href="https://chatbot.qubitpi.org/blog/weak-references#different-degrees-of-weakness" class="hash-link" aria-label="Direct link to Different Degrees of Weakness" title="Direct link to Different Degrees of Weakness">​</a></h2>
<p>Up to this point I've just been referring to "weak references", but there are actually <strong>4 degrees of reference
strength</strong> (in order from strongest to weakest):</p>
<ol>
<li>strong</li>
<li>soft</li>
<li>weak</li>
<li>phantom</li>
</ol>
<p>We've already discussed strong and weak references, so let's take a look at the other two.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="soft-references">Soft References<a href="https://chatbot.qubitpi.org/blog/weak-references#soft-references" class="hash-link" aria-label="Direct link to Soft References" title="Direct link to Soft References">​</a></h2>
<p>A <strong>soft reference</strong> is exactly like a weak reference, except that it is less eager to throw away the object to which it
refers. An object which is only weakly reachable will be discarded at the next garbage collection cycle, but an object
which is softly reachable will generally stick around for a while.</p>
<p>Soft references aren't required to behave any differently than weak references, but in practice softly reachable objects
are generally retained as long as memory is in plentiful supply. <strong>This makes them an excellent foundation for a
cache</strong>, such as the image cache described above, since you can let the garbage collector worry about both how reachable
the objects are and how badly it needs the memory they are consuming.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="phantom-references">Phantom References<a href="https://chatbot.qubitpi.org/blog/weak-references#phantom-references" class="hash-link" aria-label="Direct link to Phantom References" title="Direct link to Phantom References">​</a></h2>
<p>A <strong>phantom reference</strong> is quite different than either soft reference or weak reference. Its grip on its object is so
tenuous that you can't even retrieve the object - its <code>get()</code> method always returns <code>null</code>. <strong>The only use for such a
reference is keeping track of when it gets enqueued into a <code>ReferenceQueue</code>, as at that point you know the object to
which it pointed is dead</strong>. How is that different from weak reference, though?</p>
<p>The difference is in exactly when the enqueuing happens. <code>WeakReferences</code> are enqueued as soon as the object to which
they point becomes weakly reachable. This is before finalization or garbage collection has actually happened; in theory
the object could even be "resurrected" by an unorthodox <code>finalize()</code> method, but the <code>WeakReference</code> would remain dead.
<code>PhantomReferences</code> are enqueued only when the object is physically removed from memory, and the <code>get()</code> method always
returns <code>null</code> specifically to prevent you from being able to "resurrect" an almost-dead object.</p>
<p>What good are <code>PhantomReferences</code>? I'm only aware of two serious cases for them: first, they allow you to determine
exactly when an object was removed from memory. They are in fact the only way to determine that. This isn't generally
that useful, but might come in handy in certain very specific circumstances like manipulating large images: if you know
for sure that an image should be garbage collected, you can wait until it actually is before attempting to load the next
image, and therefore make the dreaded <code>OutOfMemoryError</code> less likely.</p>
<p>Second, phantom references avoid a fundamental problem with finalization: <code>finalize()</code> methods can "resurrect" objects
by creating new strong references to them. So what, you say? Well, the problem is that an object which overrides
<code>finalize()</code> must now be determined to be garbage in at least two separate garbage collection cycles in order to be
collected. When the first cycle determines that it is garbage, it becomes eligible for finalization. Because of the
(slim, but unfortunately real) possibility that the object was "resurrected" during finalization, the garbage collector
has to run again before the object can actually be removed. And because finalization might not have happened in a timely
fashion, an arbitrary number of garbage collection cycles might have happened while the object was waiting for
finalization. This can mean serious delays in actually cleaning up garbage objects, and is why you can get
<code>OutOfMemoryErrors</code> even when most of the heap is garbage.</p>
<p>With phantom reference, this situation is impossible -- when a <code>PhantomReference</code> is enqueued, there is absolutely no
way to get a pointer to the now-dead object (which is good, because it isn't in memory any longer). Because
<code>PhantomReference</code> cannot be used to resurrect an object, the object can be instantly cleaned up during the first
garbage collection cycle in which it is found to be phantomly reachable. You can then dispose whatever resources you
need to at your convenience.</p>
<p>Arguably, the <code>finalize()</code> method should never have been provided in the first place. phantom references are definitely
safer and more efficient to use, and eliminating <code>finalize()</code> would have made parts of the VM considerably simpler. But,
they're also more work to implement, so I confess to still using <code>finalize()</code> most of the time. The good news is that at
least you have a choice.</p>]]></content:encoded>
            <category>Java</category>
        </item>
        <item>
            <title><![CDATA[Querydsl - A Type-Safe Query Writer for Java]]></title>
            <link>https://chatbot.qubitpi.org/blog/querydsl</link>
            <guid>https://chatbot.qubitpi.org/blog/querydsl</guid>
            <pubDate>Mon, 05 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>Sponsored by <a href="http://www.mysema.com/#buzzwords" target="_blank" rel="noopener noreferrer">Mysema</a>, <a href="https://querydsl.com/" target="_blank" rel="noopener noreferrer">Querydsl</a> is similar to Hibernate,
which offers programmable and type-safe query construction. For example</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Tuple</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> tuples </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> queryFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">yearOfBirth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Querydsl was born out of the need to maintain HQL queries in a typesafe way. Incremental construction of HQL queries
requires String concatenation and results in hard to read code. Unsafe references to domain types and properties via
plain Strings were another issue with String based HQL construction.</p>
<p>With a changing domain model type-safety brings huge benefits in software development. Domain changes are directly
reflected in queries and autocomplete in query construction makes query construction faster and safer.</p>
<p>HQL for Hibernate was the first target language for Querydsl, but nowadays it supports JPA, JDO, JDBC, Lucene, Hibernate
Search, MongoDB, Collections and RDFBean as backends.</p>
<p>Type safety is the core principle of Querydsl. Queries are constructed based on generated query types that reflect the
properties of your domain types. Also function/method invocations are constructed in a fully type-safe manner.</p>
<p>Consistency is another important principle. The query paths and operations are the same in all implementations and also
the Query interfaces have a common base interface. <strong>This means the domain types are defined only once and they will be
ready to be used against SQL, Lucene, MongoDB, etc</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpa">JPA<a href="https://chatbot.qubitpi.org/blog/querydsl#jpa" class="hash-link" aria-label="Direct link to JPA" title="Direct link to JPA">​</a></h2>
<p>Querydsl defines a general statically typed syntax for querying on top of persisted domain model data.
<a href="https://en.wikipedia.org/wiki/Java_Data_Objects" target="_blank" rel="noopener noreferrer">JDO</a> and JPA are the primary integration technologies for Querydsl.
This guide describes how to use Querydsl in combination with JPA.</p>
<p><strong>Querydsl for JPA is an alternative to both JPQL and Criteria queries. It combines the dynamic nature of Criteria
queries with the expressiveness of JPQL and all that in a fully typesafe manner</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="maven-integration">Maven integration<a href="https://chatbot.qubitpi.org/blog/querydsl#maven-integration" class="hash-link" aria-label="Direct link to Maven integration" title="Direct link to Maven integration">​</a></h3>
<p>Add the following to your Maven project:</p>
<div class="language-xml codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-xml codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.querydsl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">querydsl-apt</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${querydsl.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">provided</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">scope</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.querydsl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">querydsl-jpa</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${querydsl.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.slf4j</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">slf4j-log4j12</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.6.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.mysema.maven</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">apt-maven-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.1.3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">process</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goal</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">goals</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">outputDirectory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">target/generated-sources/java</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">outputDirectory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">processor</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.querydsl.apt.jpa.JPAAnnotationProcessor</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">processor</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">execution</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">executions</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>The JPAAnnotationProcessor finds domain types annotated with the <code>javax.persistence.Entity</code> annotation and generates
query types for them</strong>.</p>
<div class="theme-admonition theme-admonition-warning admonition_dFHE alert alert--warning"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_sFKi"><p>If we use Hibernate annotations in our domain types we should use the APT processor of
<code>com.querydsl.apt.hibernate.HibernateAnnotationProcessor</code> instead.</p></div></div>
<p>To generate source codes the query types, run <code>mvn clean install</code> and you will get your Query types generated into
<code>target/generated-sources/java</code>.</p>
<p>Now you are able to construct JPA query instances and instances of the query domain model. For example, let's assume
that your project has the following domain type:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Entity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Customer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> firstName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> lastName</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setFirstName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> fn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        firstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setLastName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> ln</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ln</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Querydsl will generate a query type with the simple name <code>QCustomer</code> into the same package as <code>Customer</code>. <code>QCustomer</code> can
be used as a <strong>statically typed variable</strong> in Querydsl queries as a representative for the <code>Customer</code> type.</p>
<p><code>QCustomer</code> has a default instance variable which can be accessed as a static field:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">QCustomer</span><span class="token plain"> customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">QCustomer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively you can define your own Customer variables like this:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">QCustomer</span><span class="token plain"> customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QCustomer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"myCustomer"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="querying">Querying<a href="https://chatbot.qubitpi.org/blog/querydsl#querying" class="hash-link" aria-label="Direct link to Querying" title="Direct link to Querying">​</a></h3>
<p>The queries should be created via a <code>JPAQueryFactory</code> instance.</p>
<p>To retrieve the customer with the first name Bob you would construct a query like this:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">QCustomer</span><span class="token plain"> customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">QCustomer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Customer</span><span class="token plain"> bob </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> queryFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">selectFrom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Bob"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetchOne</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Note that the <code>selectFrom</code> call defines the query source and projection</p>
</blockquote>
<p>To create a query with multiple sources you use the query like this:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">QCustomer</span><span class="token plain"> customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">QCustomer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">QCompany</span><span class="token plain"> company </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">QCompany</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">company</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> company</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To use multiple filters use it like this</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">queryFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">selectFrom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Bob"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Wilson"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or like this</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">queryFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">selectFrom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Bob"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">and</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Wilson"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to combine the filters via "or" then use the following pattern</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">queryFactory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">selectFrom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Bob"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">or</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">eq</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Wilson"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="join">JOIN<a href="https://chatbot.qubitpi.org/blog/querydsl#join" class="hash-link" aria-label="Direct link to JOIN" title="Direct link to JOIN">​</a></h4>
<p>Querydsl supports the following join variants in JPQL:</p>
<ul>
<li>inner join</li>
<li>join</li>
<li>left join</li>
<li>right join.</li>
</ul>
<p>Join is typesafe and follows the following pattern:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">QCat</span><span class="token plain"> cat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">QCat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cat</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">QCat</span><span class="token plain"> mate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QCat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"mate"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">QCat</span><span class="token plain"> kitten </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QCat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"kitten"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">queryFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">selectFrom</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">innerJoin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mate</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">leftJoin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kittens</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kitten</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The native JPQL version of the query would be</p>
<p>select cat from Cat as cat
inner join cat.mate as mate
left outer join cat.kittens as kitten</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="quering-lucene">Quering Lucene<a href="https://chatbot.qubitpi.org/blog/querydsl#quering-lucene" class="hash-link" aria-label="Direct link to Quering Lucene" title="Direct link to Quering Lucene">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="lucene-feature-maven-integration">Lucene Feature Maven integration<a href="https://chatbot.qubitpi.org/blog/querydsl#lucene-feature-maven-integration" class="hash-link" aria-label="Direct link to Lucene Feature Maven integration" title="Direct link to Lucene Feature Maven integration">​</a></h3>
<p>Querydsl Lucene can be used via the querydsl-lucene3 module for Lucene 3, querydsl-lucene4 for Lucene 4 and
querydsl-lucene5 for Lucene 5</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="lucene-3">Lucene 3<a href="https://chatbot.qubitpi.org/blog/querydsl#lucene-3" class="hash-link" aria-label="Direct link to Lucene 3" title="Direct link to Lucene 3">​</a></h4>
<div class="language-xml codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-xml codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.querydsl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">querydsl-lucene3</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${querydsl.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.slf4j</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">slf4j-log4j12</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.6.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="lucene-4">Lucene 4<a href="https://chatbot.qubitpi.org/blog/querydsl#lucene-4" class="hash-link" aria-label="Direct link to Lucene 4" title="Direct link to Lucene 4">​</a></h4>
<div class="language-xml codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-xml codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.querydsl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">querydsl-lucene4</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${querydsl.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.slf4j</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">slf4j-log4j12</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.6.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="lucene-5">Lucene 5<a href="https://chatbot.qubitpi.org/blog/querydsl#lucene-5" class="hash-link" aria-label="Direct link to Lucene 5" title="Direct link to Lucene 5">​</a></h4>
<div class="language-xml codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-xml codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.querydsl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">querydsl-lucene5</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${querydsl.version}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.slf4j</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">slf4j-log4j12</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.6.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="querying-lucene">Querying Lucene<a href="https://chatbot.qubitpi.org/blog/querydsl#querying-lucene" class="hash-link" aria-label="Direct link to Querying Lucene" title="Direct link to Querying Lucene">​</a></h3>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">QDocument</span><span class="token plain"> doc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">QDocument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"doc"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">IndexSearcher</span><span class="token plain"> searcher </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">IndexSearcher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LuceneQuery</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LuceneQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> searcher</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Document</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> documents </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">year</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">between</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"1800"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"2000"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">and</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">doc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Huckle"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which is transformed into the following Lucene query:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">+year:[1800 TO 2000] +title:huckle*</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="troubleshooting">Troubleshooting<a href="https://chatbot.qubitpi.org/blog/querydsl#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="oracle-not-a-group-by-expression-error">[Oracle] "not a GROUP BY expression" Error<a href="https://chatbot.qubitpi.org/blog/querydsl#oracle-not-a-group-by-expression-error" class="hash-link" aria-label="Direct link to [Oracle] &quot;not a GROUP BY expression&quot; Error" title="Direct link to [Oracle] &quot;not a GROUP BY expression&quot; Error">​</a></h3>
<p>Suppose you have a SQL query that retrieves all unique names of a "Person" table. This query works perfectly in MySQL:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> name</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Oracle, databases, requires all projected columns to be in <code>GROUP BY</code> clause, i.e. the same query must be modified to
the following:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that we've appended <code>id</code> column in the <code>GROUP BY</code> clause.</p>
<p>Oracle, in this case, brings up an important issue for Querydsl. <strong>How do we comply with DRY principle while maintaining
2 copies of columns, one in projection and one in group-by clause, in the code level</strong>?</p>
<p>The answer is deduplicating by reducing the 2 copies into 1 single-source of truth and use that to re-generate
projections and <code>GROUP BY</code> clause.</p>
<p>For example, we could define projected columns first before specifying projections and group-bys:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Returns an object including all of the projections for a query.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * The object is a mapping from projected column to its column type.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return a new map</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@NotNull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Class</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getQueryDslProjections</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Stream</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">of</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AbstractMap</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">SimpleImmutableEntry</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"id"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AbstractMap</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">SimpleImmutableEntry</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"name"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Map</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Entry</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Entry</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that in order to generate projections and group bys later, all we need is the name(display/alias) of the column
and the field type of the Database bean, as shown above.</p>
<p>To generate projections, we could use <a href="https://querydsl.com/static/querydsl/4.4.0/reference/html_single/#d0e2066" target="_blank" rel="noopener noreferrer">dynamic path</a>
to dynamic bind columns to our query:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Generate the same group-by columns as the projected columns determined by {@link #getQueryDslProjections()}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * For example, if the projection is</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * &lt;pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * {@code</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * SELECT person.id, person.name FROM ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * }</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * &lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Then this method returns</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * &lt;pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * GROUP BY person.id, person.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * &lt;/pre&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * The purpose of this method is to make Oracle-compatible GROUP-BY, which must includes all projected columns</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param projections a mapping from path suffix and the field type of the suffix path. For example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * {@code id: Long.class, graph: String.class}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @return an array of group-by columns</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@NotNull</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token annotation punctuation" style="color:#393A34">@SuppressWarnings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"SuspiciousToArrayCall"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">Expression</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getGroupBys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@NotNull</span><span class="token plain">  </span><span class="token class-name">Map</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics"> </span><span class="token generics class-name">Class</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> projections</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Objects</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requireNonNull</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">projections</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"projections"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">PathBuilder</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Person</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> root </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PathBuilder</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"person"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> projections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">entrySet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entry </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">String</span><span class="token plain"> property </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">Class</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> root</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">property</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Expression</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">projections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For projections, we use the dynamic expression again and specify the column alias in the return result using <code>as()</code>
show below:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">jpa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">select</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">Projections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">bean</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token class-name">Person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                projections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">entrySet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entry </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token class-name">String</span><span class="token plain"> property </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token class-name">Class</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> entry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> root</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">property</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">property</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Expression</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">projections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">qPerson</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">leftJoin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="error-executing-an-updatedelete-query">[Error] Executing an update/delete query<a href="https://chatbot.qubitpi.org/blog/querydsl#error-executing-an-updatedelete-query" class="hash-link" aria-label="Direct link to [Error] Executing an update/delete query" title="Direct link to [Error] Executing an update/delete query">​</a></h3>
<p>In order to translate this query in QueryDsl:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> myThings </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> firstColumn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'newValue'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> secondColumn </span><span class="token operator" style="color:#393A34">in</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'interesting'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'stuff'</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We have to use <code>new JPAUpdateClause(session, myThings)</code>:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">JPAUpdateClause</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics">myThings</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> update </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">JPAUpdateClause</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">session</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> myThings</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">update</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myThings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstColumn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"newValue"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">where</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myThings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">secondColumn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">in</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">interestingValues</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">execute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Java</category>
        </item>
        <item>
            <title><![CDATA[Java 8 Stream]]></title>
            <link>https://chatbot.qubitpi.org/blog/java-stream</link>
            <guid>https://chatbot.qubitpi.org/blog/java-stream</guid>
            <pubDate>Fri, 30 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="combining-a-collection-of-predicates">Combining a Collection of Predicates<a href="https://chatbot.qubitpi.org/blog/java-stream#combining-a-collection-of-predicates" class="hash-link" aria-label="Direct link to Combining a Collection of Predicates" title="Direct link to Combining a Collection of Predicates">​</a></h2>
<p>We chain a collection of Predicates by reducing them. In the following example, we have a list of predicates that we
combined using <code>Predicate.and()</code>:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">whenFilterListWithCollectionOfPredicatesUsingAnd_thenSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Predicate</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> allPredicates </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Predicate</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allPredicates</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"A"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allPredicates</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"d"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    allPredicates</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> names</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">allPredicates</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Predicate</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">and</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">assertEquals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">assertThat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Alexander"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that we use our base identity as:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">x</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token boolean" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That will be, however, different if we want to combine them using Predicate.or():</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">whenFilterListWithCollectionOfPredicatesUsingOr_thenSuccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> names</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">allPredicates</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">reduce</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Predicate</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">or</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">assertEquals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">assertThat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">contains</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Adam"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"Alexander"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="collecting-stream-containing-null-to-list">Collecting Stream containing "null" to List<a href="https://chatbot.qubitpi.org/blog/java-stream#collecting-stream-containing-null-to-list" class="hash-link" aria-label="Direct link to Collecting Stream containing &quot;null&quot; to List" title="Direct link to Collecting Stream containing &quot;null&quot; to List">​</a></h2>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sorted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Comparator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">comparingInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Person</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getDriverLicense</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If this stream contains a kid who doesn't know how to drive, the <code>Collectors.toList()</code> might see a <code>null</code> value, which
causes <code>NullPointerException</code>, because <code>Collectors.toList()</code> gives us a list implementation that doesn't permit <code>null</code>
elements. <code>ArrayList</code>, however, permits <code>null</code> elements according to its JavaDoc. The solution them would be</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sorted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Comparator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">comparingInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Person</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getDriverLicense</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toCollection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ArrayList</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that the last line is changed so that the collect procedure returns an uer-specified list implementation, which is
<code>ArrayList</code></p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="sorting">Sorting<a href="https://chatbot.qubitpi.org/blog/java-stream#sorting" class="hash-link" aria-label="Direct link to Sorting" title="Direct link to Sorting">​</a></h2>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> age</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">User</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> users </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Arrays</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"C"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"D"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"A"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"B"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">User</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"E"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">User</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> sortedList </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> users</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sorted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Comparator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">comparingInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">User</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getAge</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="remove-duplicates-from-a-list-of-objects-based-on-property">Remove Duplicates from a List of Objects based on Property<a href="https://chatbot.qubitpi.org/blog/java-stream#remove-duplicates-from-a-list-of-objects-based-on-property" class="hash-link" aria-label="Direct link to Remove Duplicates from a List of Objects based on Property" title="Direct link to Remove Duplicates from a List of Objects based on Property">​</a></h2>
<p>You can get a stream from the List and put in in the TreeSet from which you provide a custom comparator that compares
the property uniquely. Then if you really need a list you can put then back this collection into an ArrayList:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token import static namespace" style="opacity:0.7">java</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static namespace" style="opacity:0.7">util</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static class-name">Comparator</span><span class="token import static punctuation" style="color:#393A34">.</span><span class="token import static">comparingInt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token import static namespace" style="opacity:0.7">java</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static namespace" style="opacity:0.7">util</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static namespace" style="opacity:0.7">stream</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static class-name">Collectors</span><span class="token import static punctuation" style="color:#393A34">.</span><span class="token import static">collectingAndThen</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token import static namespace" style="opacity:0.7">java</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static namespace" style="opacity:0.7">util</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static namespace" style="opacity:0.7">stream</span><span class="token import static namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import static class-name">Collectors</span><span class="token import static punctuation" style="color:#393A34">.</span><span class="token import static">toCollection</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Employee</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> unique </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> employee</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">collectingAndThen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token function" style="color:#d73a49">toCollection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TreeSet</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">comparingInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Employee</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">getId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token class-name">ArrayList</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Given the example:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Employee</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> employee </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Arrays</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">asList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"John"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Bob"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Alice"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It will output:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token char">'John'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Employee</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">=</span><span class="token char">'Alice'</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="convert-iterable-to-stream">Convert Iterable to Stream<a href="https://chatbot.qubitpi.org/blog/java-stream#convert-iterable-to-stream" class="hash-link" aria-label="Direct link to Convert Iterable to Stream" title="Direct link to Convert Iterable to Stream">​</a></h2>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">StreamSupport</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">iterable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">spliterator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">moreStreamOps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="convert-two-dimensional-array-to-list">Convert Two Dimensional Array to List<a href="https://chatbot.qubitpi.org/blog/java-stream#convert-two-dimensional-array-to-list" class="hash-link" aria-label="Direct link to Convert Two Dimensional Array to List" title="Direct link to Convert Two Dimensional Array to List">​</a></h2>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Foo</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> collection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Arrays</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//'array' is two-dimensional</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flatMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Arrays</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="preserve-order-in-stream-with-collect">Preserve Order in Stream with collect<a href="https://chatbot.qubitpi.org/blog/java-stream#preserve-order-in-stream-with-collect" class="hash-link" aria-label="Direct link to Preserve Order in Stream with collect" title="Direct link to Preserve Order in Stream with collect">​</a></h2>
<p>Say we would like to process a list such as ["blah", "blah", "yep"] and get ["blah (2 times)", "yep"], we will collect
them to a <code>LinkedHashMap</code> to get the expected result:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> messages</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">groupingBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Function</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">identity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">LinkedHashMap</span><span class="token operator" style="color:#393A34">::</span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">summingInt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">entrySet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">" ("</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">" times)"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Java</category>
        </item>
        <item>
            <title><![CDATA[PUT v.s. POST]]></title>
            <link>https://chatbot.qubitpi.org/blog/put-vs-post</link>
            <guid>https://chatbot.qubitpi.org/blog/put-vs-post</guid>
            <pubDate>Sun, 25 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>We should choose between PUT and POST based on <a href="http://en.wikipedia.org/wiki/Idempotent" target="_blank" rel="noopener noreferrer">idempotence</a> of the action.</p>
<p><strong>PUT</strong> implies putting a resource - completely replacing whatever is available at the given URL with a different thing.
By definition, a PUT is idempotent. Do it as many times as you like, and the result is the same. <code>x=5</code> is idempotent.
You can PUT a resource whether it previously exists, or not (eg, to Create, or to Update)!</p>
<p>**POST updates a resource, adds a subsidiary resource, or causes a change. A POST is not idempotent, in the way that
<code>x++</code> is not idempotent.</p>
<p>By this argument, PUT is for creating when you know the URL of the thing you will create. POST can be used to create
when you know the URL of the "factory" or manager for the category of things you want to create.</p>
<p>so:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">POST /expense-report</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">PUT /expense-report/10929</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Webservice</category>
        </item>
        <item>
            <title><![CDATA[JQPL]]></title>
            <link>https://chatbot.qubitpi.org/blog/jpql</link>
            <guid>https://chatbot.qubitpi.org/blog/jpql</guid>
            <pubDate>Wed, 28 Oct 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>The Java Persistence Query Language (JPQL) is a platform-independent object-oriented query language defined by JPA.
JPQL is similar to SQL, but operates on objects, attributes and relationships instead of tables and columns.</p>
<p>The Java Persistence query language (JPQL) is used to define searches against persistent entities independent of the
mechanism used to store those entities. As such, JPQL is "portable", and not constrained to any particular data store
(<a href="https://chatbot.qubitpi.org/blog/jpql#avoid-grouping-by-subset-of-columns-from-select">although in some cases it does get constrained</a>). The Java
Persistence query language is an extension of the Enterprise JavaBeans query language, EJB QL, adding operations
such as bulk deletes and updates, join operations, aggregates, projections, and subqueries. Furthermore, JPQL
queries can be declared statically in metadata, or can be dynamically built in code</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="caveats">Caveats<a href="https://chatbot.qubitpi.org/blog/jpql#caveats" class="hash-link" aria-label="Direct link to Caveats" title="Direct link to Caveats">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="avoid-grouping-by-subset-of-columns-from-select">Avoid GROUPing BY subset of columns from SELECT<a href="https://chatbot.qubitpi.org/blog/jpql#avoid-grouping-by-subset-of-columns-from-select" class="hash-link" aria-label="Direct link to Avoid GROUPing BY subset of columns from SELECT" title="Direct link to Avoid GROUPing BY subset of columns from SELECT">​</a></h3>
<p><strong>JPQL is not portable when it comes to <code>GROUP BY</code> clause.</strong>. Let's say we have query that reads everyone who has
lived in Washington. It is common in the U.S., however, that cities share common name. For example, there are more
than 80 locations whose names are "Washington". When a person move from <em>Washington, Maine</em> to <em>Washington,
Massachusetts</em>, the <code>Address</code> table will have 2 rows with the same combinations of <code>ssn</code> and <code>city</code> columns.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Person person </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> Address address </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">city </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">city</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">city </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Washington"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ssn</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://stackoverflow.com/questions/30700316/sql-not-a-group-by-expression-with-oraclesql-and-innerquery-error" target="_blank" rel="noopener noreferrer">This query will work for MySQL but not Oracle</a>,
because Oracle requires</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-statement-types">JPQL Statement Types<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-statement-types" class="hash-link" aria-label="Direct link to JPQL Statement Types" title="Direct link to JPQL Statement Types">​</a></h2>
<p>A JPQL statement may be</p>
<ol>
<li>a <code>SELECT</code> statement, or</li>
<li>an <code>UPDATE</code> statement,</li>
<li>or a <code>DELETE</code> statement</li>
</ol>
<p>In BNF syntax, a query language statement is defined as:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">QL_statement ::= select_statement | update_statement | delete_statement</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-select-statement">JPQL Select Statement<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-select-statement" class="hash-link" aria-label="Direct link to JPQL Select Statement" title="Direct link to JPQL Select Statement">​</a></h3>
<p>A select statement is a string which consists of the following clauses:</p>
<ul>
<li>a <code>SELECT</code> clause, which determines the type of the objects or values to be selected;</li>
<li>a <code>FROM</code> clause, which provides declarations that designate the domain to which the expressions specified in the
other</li>
<li>clauses of the query apply;</li>
<li>an <em>optional</em> <code>WHERE</code> clause, which may be used to restrict the results that are returned by the query;</li>
<li>an <em>optional</em> <code>GROUP BY</code> clause, which allows query results to be aggregated in terms of groups;</li>
<li>an <em>optional</em> <code>HAVING</code> clause, which allows filtering over aggregated groups;</li>
<li>an <em>optional</em> <code>ORDER BY</code> clause, which may be used to order the results that are returned by the query.</li>
</ul>
<p>In BNF syntax, a select statement is defined as:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">select_statement ::= select_clause from_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-update-and-delete-statements">JPQL Update and Delete Statements<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-update-and-delete-statements" class="hash-link" aria-label="Direct link to JPQL Update and Delete Statements" title="Direct link to JPQL Update and Delete Statements">​</a></h3>
<p>Update and delete statements provide bulk operations over sets of entities. In BNF syntax, these operations are
defined as:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">update_statement ::= update_clause [where_clause]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete_statement ::= delete_clause [where_clause</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-abstract-schema-types-and-query-domains">JPQL Abstract Schema Types and Query Domains<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-abstract-schema-types-and-query-domains" class="hash-link" aria-label="Direct link to JPQL Abstract Schema Types and Query Domains" title="Direct link to JPQL Abstract Schema Types and Query Domains">​</a></h2>
<p>The Java Persistence query language is a typed language, and every expression has a type. The type of an expression
is derived from the structure of the expression, the abstract schema types of the identification variable
declarations, the types to which the persistent fields and relationships evaluate, and the types of literals. The
abstract schema type of an entity is derived from the entity class and the metadata information provided by Java
language annotations or in the XML descriptor.</p>
<p>Informally, the abstract schema type of an entity can be characterized as follows:</p>
<ul>
<li>For every persistent field or get accessor method (for a persistent property) of the entity class, there is a
field ("state-field") whose abstract schema type corresponds to that of the field or the result type of the
accessor method.</li>
<li>For every persistent relationship field or get accessor method (for a persistent relationship property) of the
entity class, there is a field ("association-field") whose type is the abstract schema type of the related entity
(or, if the relationship is a one-to-many or many-to-many, a collection of such). Abstract schema types are
specific to the query language data model. <strong>The persistence provider is not required to implement or otherwise
materialize an abstract schema type</strong>. The domain of a query consists of the abstract schema types of all
entities that are defined in the same persistence unit. The domain of a query may be restricted by the
navigability of the relationships of the entity on which it is based. The association-fields of an entity's
abstract schema type determine navigability. Using the association-fields and their values, a query can select
related entities and use their abstract schema types in the query.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-entity-naming">JPQL Entity Naming<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-entity-naming" class="hash-link" aria-label="Direct link to JPQL Entity Naming" title="Direct link to JPQL Entity Naming">​</a></h3>
<p>Entities are designated in query strings by their entity names. The entity name is defined by the name element of
the Entity annotation (or the entity-name XML descriptor element), and defaults to the unqualified name of the
entity class. Entity names are scoped within the persistence unit and must be unique within the persistence unit.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-schema-example">JPQL Schema Example<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-schema-example" class="hash-link" aria-label="Direct link to JPQL Schema Example" title="Direct link to JPQL Schema Example">​</a></h3>
<p>This example assumes that the application developer provides several entity classes representing magazines,
publishers, authors, and articles. The abstract schema types for these entities are <code>Magazine</code>, <code>Publisher</code>,
<code>Author</code>, and <code>Article</code>.</p>
<p>The entity <code>Publisher</code> has a one-to-many relationships with <code>Magazine</code>. There is also a one-to-many relationship
between <code>Magazine</code> and <code>Article</code>. The entity <code>Article</code> is related to <code>Author</code> in a one-to-one relationship.</p>
<p>Queries to select magazines can be defined by navigating over the association-fields and state-fields defined by
<code>Magazine</code> and <code>Author</code>. A query to find all magazines that have unpublished articles is as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> art</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">published </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">FALSE</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The next query navigates over the association-field authors of the abstract schema type <code>Magazine</code> to find
articles, and uses the state-field <code>published</code> of <code>Article</code> to select those magazines that have at least one
article that is
published. Although predefined reserved identifiers, such as <code>DISTINCT</code>, <code>FROM</code>, <code>AS</code>, <code>JOIN</code>, <code>WHERE</code>, and <code>FALSE</code>,
appear in upper case in this example, predefined reserved identifiers are case insensitive. The <code>SELECT</code> clause of this
example designates the return type of this query to be of type <code>Magazine</code>. Because the same persistence unit defines the
abstract persistence schemas of the related entities, the developer can also specify a query over <code>articles</code> that
utilizes the abstract schema type for products, and hence the state-fields and association-fields of both the abstract
schema types <code>Magazine</code> and <code>Author</code>. For example, if the abstract schema type <code>Author</code> has a state-field named
<code>firstName</code>, a query over <code>articles</code> can be specified using this state-field. Such a query might be to find all
magazines that have articles authored by someone with the first name "John".</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author auth </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'John'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Because <code>Magazine</code> is related to <code>Author</code> by means of the relationships between <code>Magazine</code> and <code>Article</code> and between
<code>Article</code> and <code>Author</code>, navigation using the association-fields authors and product is used to express the query.
This query is specified by using the abstract schema name <code>Magazine</code>, which designates the abstract schema type
over which the query ranges. The basis for the navigation is provided by the association-fields authors and product
of the abstract schema types <code>Magazine</code> and <code>Article</code> respectively.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-from-clause-and-navigational-declarations">JPQL FROM Clause and Navigational Declarations<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-from-clause-and-navigational-declarations" class="hash-link" aria-label="Direct link to JPQL FROM Clause and Navigational Declarations" title="Direct link to JPQL FROM Clause and Navigational Declarations">​</a></h2>
<p>The <code>FROM</code> clause of a query defines the domain of the query by declaring identification variables. An
identification variable is an identifier declared in the <code>FROM</code> clause of a query. The domain of the query may be
constrained by path expressions. Identification variables designate instances of a particular entity abstract
schema type. The <code>FROM</code> clause can contain multiple identification variable declarations separated by a comma (,):</p>
<ul>
<li><code>from_clause ::= FROM identification_variable_declaration {, {identification_variable_declaration | collection_member_declaration}}*</code></li>
<li><code>identification_variable_declaration ::= range_variable_declaration { join | fetch_join }*</code></li>
<li><code>range_variable_declaration ::= abstract_schema_name [AS] identification_variable</code></li>
<li><code>join ::= join_spec join_association_path_expression [AS] identification_variable</code></li>
<li><code>fetch_join ::= join_spec FETCH join_association_path_expression</code></li>
<li><code>join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression</code></li>
<li><code>join_spec ::= [ LEFT [OUTER] | INNER ] JOIN</code></li>
<li><code>collection_member_declaration ::= IN (collection_valued_path_expression) [AS] identification_variable</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-from-identifiers">JPQL FROM Identifiers<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-from-identifiers" class="hash-link" aria-label="Direct link to JPQL FROM Identifiers" title="Direct link to JPQL FROM Identifiers">​</a></h3>
<p>An identifier is a character sequence of unlimited length. <strong>The character sequence must begin with a Java
identifier</strong> start character, and all other characters must be Java identifier part characters. An identifier start
character is any character for which the method <code>Character.isJavaIdentifierStart</code> returns <code>true</code>. This includes the
underscore (<code>_</code>) character and the dollar-sign (<code>$</code>) character. An identifier-part character is any character for
which the method <code>Character.isJavaIdentifierPart</code> returns true . The question-mark (<code>?</code>) character is reserved for
use by the Java Persistence query language. The following are reserved identifiers:</p>
<ul>
<li><code>SELECT</code></li>
<li><code>FROM</code></li>
<li><code>WHERE</code></li>
<li><code>UPDATE</code></li>
<li><code>DELETE</code></li>
<li><code>JOIN</code></li>
<li><code>OUTER</code></li>
<li><code>INNER</code></li>
<li><code>LEFT</code></li>
<li><code>GROUP</code></li>
<li><code>BY</code></li>
<li><code>HAVING</code></li>
<li><code>FETCH</code></li>
<li><code>DISTINCT</code></li>
<li><code>OBJECT</code></li>
<li><code>NULL</code></li>
<li><code>TRUE</code></li>
<li><code>FALSE</code></li>
<li><code>NOT</code></li>
<li><code>AND</code></li>
<li><code>OR</code></li>
<li><code>BETWEEN</code></li>
<li><code>LIKE</code></li>
<li><code>IN</code></li>
<li><code>AS</code></li>
<li><code>UNKNOWN</code></li>
<li><code>EMPTY</code></li>
<li><code>MEMBER</code></li>
<li><code>OF</code></li>
<li><code>IS</code></li>
<li><code>AVG</code></li>
<li><code>MAX</code></li>
<li><code>MIN</code></li>
<li><code>SUM</code></li>
<li><code>COUNT</code></li>
<li><code>ORDER</code></li>
<li><code>BY</code></li>
<li><code>ASC</code></li>
<li><code>DESC</code></li>
<li><code>MOD</code></li>
<li><code>UPPER</code></li>
<li><code>LOWER</code></li>
<li><code>TRIM</code></li>
<li><code>POSITION</code></li>
<li><code>CHARACTER_LENGTH</code></li>
<li><code>CHAR_LENGTH</code></li>
<li><code>BIT_LENGTH</code></li>
<li><code>CURRENT_TIME</code></li>
<li><code>CURRENT_DATE</code></li>
<li><code>CURRENT_TIMESTAMP</code></li>
<li><code>NEW</code></li>
<li><code>EXISTS</code></li>
<li><code>ALL</code></li>
<li><code>ANY</code></li>
<li><code>SOME</code></li>
</ul>
<p>Reserved identifiers are case insensitive. Reserved identifiers must not be used as identification variables. It is
recommended that other SQL reserved words not be used as identification variables in queries, as they may be used as
reserved identifiers in future releases of the specification.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-identification-variables">JPQL Identification Variables<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-identification-variables" class="hash-link" aria-label="Direct link to JPQL Identification Variables" title="Direct link to JPQL Identification Variables">​</a></h3>
<p>An identification variable is a valid identifier declared in the <code>FROM</code> clause of a query. All identification
variables must be declared in the <code>FROM</code> clause. Identification variables cannot be declared in other clauses. An
identification variable must not be a reserved identifier or have the same name as any entity in the same
persistence unit: Identification variables are case insensitive. An identification variable evaluates to a value of
the type of the expression used in declaring the variable. For example, consider the previous query:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'John'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>FROM</code> clause declaration <code>mag.articles art</code>, the identification variable <code>art</code> evaluates to any <code>Article</code>
value directly reachable from <code>Magazine</code>. The association-field articles is a collection of instances of the
abstract schema type <code>Article</code> and the identification variable <code>art</code> refers to an element of this collection. The
type of <code>auth</code> is the abstract schema type of <code>Author</code>. An identification variable ranges over the abstract schema
type of an entity. An identification variable designates an instance of an entity abstract schema type or an
element of a collection of entity abstract schema type instances. Identification variables are existentially
quantified in a query. An identification variable always designates a reference to a single value. It is declared
in one of three ways:</p>
<ol>
<li>in a range variable declaration,</li>
<li>in a join clause, or</li>
<li>in a collection member declaration.</li>
</ol>
<p>The identification variable declarations are evaluated from left to right in the <code>FROM</code> clause, and an
identification variable declaration can use the result of a preceding identification variable declaration of the
query string.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-range-declarations">JPQL Range Declarations<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-range-declarations" class="hash-link" aria-label="Direct link to JPQL Range Declarations" title="Direct link to JPQL Range Declarations">​</a></h3>
<p>The syntax for declaring an identification variable as a range variable is similar to that of SQL; optionally, it
uses the <code>AS</code> keyword:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">range_variable_declaration ::= abstract_schema_name [AS] identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Range variable declarations allow the developer to designate a "root" for objects which may not be reachable by
navigation. In order to select values by comparing more than one instance of an entity abstract schema type, more
than one identification variable ranging over the abstract schema type is needed in the <code>FROM</code> clause.</p>
<p>The following query returns magazines whose prices are greater than the price of magazines published by "Adventure"
publishers. This example illustrates the use of two different identification variables in the <code>FROM</code> clause, both
of the abstract schema type <code>Magazine</code>. The <code>SELECT</code> clause of this query determines that it is the magazines with
prices greater than those of "Adventure" publisher's that are returned.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Magazine mag2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mag2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> mag2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publisher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Adventure'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-path-expressions">JPQL Path Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-path-expressions" class="hash-link" aria-label="Direct link to JPQL Path Expressions" title="Direct link to JPQL Path Expressions">​</a></h3>
<p><strong>An identification variable followed by the navigation operator (.) and a state-field or association-field is a
path expression.</strong> The type of the path expression is the type computed as the result of navigation; that is, the
type of the state-field or association-field to which the expression navigates. Depending on navigability, a path
expression that leads to an association-field may be further composed. Path expressions can be composed from other
path expressions if the original path expression evaluates to a single-valued type (not a collection) corresponding
to an association-field. <strong>Path-expression navigability is composed using "inner join" semantics. That is, if the
value of a non-terminal association-field in the path expression is <code>null</code>, the path is considered to have no
value, and does not participate in the determination of the result</strong>. The syntax for single-valued path expressions
and collection-valued path expressions is as follows:</p>
<ul>
<li><code>single_valued_path_expression ::= state_field_path_expression | single_valued_association_path_expression</code></li>
<li><code>state_field_path_expression ::= {identification_variable | single_valued_association_path_expression}.state_field</code></li>
<li><code>single_valued_association_path_expression ::= identification_variable.{single_valued_association_field.}*single_valued_association_field</code></li>
<li><code>collection_valued_path_expression ::= identification_variable.{single_valued_association_field.}*collection_valued_association_field</code></li>
<li><code>state_field ::= {embedded_class_state_field.}*simple_state_field</code></li>
</ul>
<p>A single_valued_association_field is designated by the name of an association-field in a one-to-one or many-to-one
relationship. The type of a single_valued_association_field and thus a single_valued_association_path_expression is
the abstract schema type of the related entity. A collection_valued_association_field is designated by the name of
an association-field in a one-to-many or a many-to-many relationship. The type of a
<code>collection_valued_association_field</code> is a collection of values of the abstract schema type of the related entity.
An <code>embedded_class_state_field</code> is designated by the name of an entity-state field that corresponds to an embedded
class. Navigation to a related entity results in a value of the related entity's abstract schema type.</p>
<p>The evaluation of a path expression terminating in a state-field results in the abstract schema type corresponding
to the Java type designated by the state-field. It is syntactically illegal to compose a path expression from a path
expression that evaluates to a collection. For example, if <code>mag</code> designates <code>Magazine</code>, the path expression
<code>mag.articles.author</code> is illegal since navigation to authors results in a collection. This case should produce an
error when the query string is verified. To handle such a navigation, an identification variable must be declared
in the <code>FROM</code> clause to range over the elements of the articles collection. Another path expression must be used to
navigate over each such element in the <code>WHERE</code> clause of the query, as in the following query, which returns all
authors that have any articles in any magazines:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> art</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-joins">JPQL Joins<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-joins" class="hash-link" aria-label="Direct link to JPQL Joins" title="Direct link to JPQL Joins">​</a></h3>
<p><strong>An <a href="https://www.w3schools.com/sql/sql_join_inner.asp" target="_blank" rel="noopener noreferrer">inner join</a> may be implicitly specified by the use of a
artesian product in the FROM clause and a join condition in the <code>WHERE</code> clause</strong>.</p>
<p>The syntax for explicit join operations is as follows:</p>
<ul>
<li><code>join ::= join_spec join_association_path_expression [AS] identification_variable</code></li>
<li><code>fetch_join ::= join_spec FETCH join_association_path_expression</code></li>
<li><code>join_spec ::= [ LEFT [OUTER] | INNER ] JOIN</code></li>
<li><code>join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression</code></li>
</ul>
<p>The following inner and outer join operation types are supported.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-inner-joins-relationship-joins">JPQL Inner Joins (Relationship Joins)<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-inner-joins-relationship-joins" class="hash-link" aria-label="Direct link to JPQL Inner Joins (Relationship Joins)" title="Direct link to JPQL Inner Joins (Relationship Joins)">​</a></h4>
<p>The syntax for the inner join operation is</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> join_association_path_expression </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">AS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example, the query below joins over the relationship between publishers and magazines. This type of join
typically equates to a join over a foreign key relationship in the database.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The keyword INNER may optionally be used:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is equivalent to the following query using the earlier <code>IN</code> construct. It selects those publishers with
revenue of over 1 million for which at least one magazine exists:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> OBJECT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-outer-joins">JPQL Outer Joins<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-outer-joins" class="hash-link" aria-label="Direct link to JPQL Outer Joins" title="Direct link to JPQL Outer Joins">​</a></h4>
<p><a href="https://www.w3schools.com/sql/sql_join_left.asp" target="_blank" rel="noopener noreferrer"><code>LEFT JOIN</code> and <code>LEFT OUTER JOIN</code> are synonymous</a>. They enable the
retrieval of a set of entities where matching values in the join condition may be absent. The syntax for a left
outer join is</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">OUTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> join_association_path_expression </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">AS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The keyword <code>OUTER</code> may optionally be used:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">OUTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>An important use case for <code>LEFT JOIN</code> is in enabling the prefetching of related data items as a side effect of a
query. This is accomplished by specifying the <code>LEFT JOIN</code> as a <code>FETCH JOIN</code></strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-fetch-joins">JPQL Fetch Joins<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-fetch-joins" class="hash-link" aria-label="Direct link to JPQL Fetch Joins" title="Direct link to JPQL Fetch Joins">​</a></h4>
<p>A <code>FETCH JOIN</code> enables the fetching of an association as a side effect of the execution of a query. A <code>FETCH JOIN</code>
is specified over an entity and its related entities. The syntax for a fetch join is</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">fetch_join ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">OUTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FETCH</span><span class="token plain"> join_association_path_expression</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The association referenced by the right side of the <code>FETCH JOIN</code> clause must be an association that belongs to an
entity that is returned as a result of the query. It is not permitted to specify an identification variable for the
entities referenced by the right side of the <code>FETCH JOIN</code> clause, and hence references to the implicitly fetched
entities cannot appear elsewhere in the query. The following query returns a set of magazines. As a side effect,
the associated articles for those magazines are also retrieved, even though they are not part of the explicit query
result. The persistent fields or properties of the articles that are eagerly fetched are fully initialized. The
initialization of the relationship properties of the articles that are retrieved is determined by the metadata for
the <code>Article</code> entity class.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FETCH</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A fetch join has the same join semantics as the corresponding inner or outer join, except that the related objects
specified on the right-hand side of the join operation are not returned in the query result or otherwise referenced
in the query. Hence, for example, if magazine id 1 has five articles, the above query returns five references to the
magazine 1 entity.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-collection-member-declarations">JPQL Collection Member Declarations<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-collection-member-declarations" class="hash-link" aria-label="Direct link to JPQL Collection Member Declarations" title="Direct link to JPQL Collection Member Declarations">​</a></h3>
<p>An identification variable declared by a <code>collection_member_declaration</code> ranges over values of a collection
obtained by navigation using a path expression. Such a path expression represents a navigation involving the
association-fields of an entity abstract schema type. Because a path expression can be based on another path
expression, the navigation can use the association-fields of related entities. An identification variable of a
collection member declaration is declared using a special operator, the reserved identifier <code>IN</code>. The argument to
the <code>IN</code> operator is a collection-valued path expression. The path expression evaluates to a collection type
specified as a result of navigation to a collection-valued association-field of an entity abstract schema type. The
syntax for declaring a collection member identification variable is as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">collection_member_declaration ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">collection_valued_path_expression</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">AS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example, the query</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Grisham'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>may equivalently be expressed as follows, using the IN operator:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> art</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Grisham'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, articles is the name of an association-field whose value is a collection of instances of the
abstract schema type <code>Article</code>. The identification variable <code>art</code> designates a member of this collection, a single
<code>Article</code> abstract schema type instance. In this example, mag is an identification variable of the abstract schema
type <code>Magazine</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-polymorphism">JPQL Polymorphism<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-polymorphism" class="hash-link" aria-label="Direct link to JPQL Polymorphism" title="Direct link to JPQL Polymorphism">​</a></h3>
<p>Java Persistence queries are automatically polymorphic. The <code>FROM</code> clause of a query designates not only instances
of the specific entity classes to which the query explicitly refers but of subclasses as well. The instances
returned by a query include instances of the subclasses that satisfy the query criteria.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-where-clause">JPQL <code>WHERE</code> Clause<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-where-clause" class="hash-link" aria-label="Direct link to jpql-where-clause" title="Direct link to jpql-where-clause">​</a></h2>
<p>The <code>WHERE</code> clause of a query consists of a conditional expression used to select objects or values that satisfy the
expression. The <code>WHERE</code> clause restricts the result of a select statement or the scope of an update or delete
operation. A <code>WHERE</code> clause is defined as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">where_clause ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> conditional_expression</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>GROUP BY</code> construct enables the aggregation of values according to the properties of an entity class. The
<code>HAVING</code> construct enables conditions to be specified that further restrict the query result as restrictions upon
the groups. The syntax of the <code>HAVING</code> clause is as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">having_clause ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HAVING</span><span class="token plain"> conditional_expression</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-conditional-expressions">JPQL Conditional Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-conditional-expressions" class="hash-link" aria-label="Direct link to JPQL Conditional Expressions" title="Direct link to JPQL Conditional Expressions">​</a></h3>
<p>The following sections describe the language constructs that can be used in a conditional expression of the <code>WHERE</code>
clause or <code>HAVING</code> clause. State-fields that are mapped in serialized form or as lobs may not be portably used in
conditional expressions</p>
<div class="theme-admonition theme-admonition-note admonition_dFHE alert alert--secondary"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_sFKi"><p>The implementation is not expected to perform such query operations involving such fields in memory rather than in
the database.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-literals">JPQL Literals<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-literals" class="hash-link" aria-label="Direct link to JPQL Literals" title="Direct link to JPQL Literals">​</a></h4>
<p>A string literal is enclosed in single quotes -- for example: 'literal'. A string literal that includes a single
quote is represented by two single quotes -- for example: 'literal''s'. String literals in queries, like Java
String literals, use unicode character encoding. The use of Java escape notation is not supported in query string
literals. Exact numeric literals support the use of Java integer literal syntax as well as SQL exact numeric
literal syntax. Approximate literals support the use Java floating point literal syntax as well as SQL approximate
numeric literal syntax. Enum literals support the use of Java enum literal syntax. <strong>The enum class name must be
specified</strong>. Appropriate suffixes may be used to indicate the specific type of a numeric literal in accordance with
the Java Language Specification. The boolean literals are TRUE and FALSE. Although predefined reserved literals
appear in upper case, they are case insensitive.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-identification-variables-wherehaving">JPQL Identification Variables (WHERE/HAVING)<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-identification-variables-wherehaving" class="hash-link" aria-label="Direct link to JPQL Identification Variables (WHERE/HAVING)" title="Direct link to JPQL Identification Variables (WHERE/HAVING)">​</a></h4>
<p>All identification variables used in the <code>WHERE</code> or <code>HAVING</code> clause of a <code>SELECT</code> or <code>DELETE</code> statement must be
declared in the <code>FROM</code> clause, as described in <a href="https://chatbot.qubitpi.org/blog/jpql#jpql-identification-variables">JPQL Identification Variables</a>. The
identification variables used in the <code>WHERE</code> clause of an <code>UPDATE</code> statement must be declared in the <code>UPDATE</code>
clause. Identification variables are existentially quantified in the <code>WHERE</code> and <code>HAVING</code> clause. This means that an
identification variable represents a member of a collection or an instance of an entity's abstract schema type. An
identification variable never designates a collection in its entirety.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-path-expressions-wherehaving">JPQL Path Expressions (WHERE/HAVING)<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-path-expressions-wherehaving" class="hash-link" aria-label="Direct link to JPQL Path Expressions (WHERE/HAVING)" title="Direct link to JPQL Path Expressions (WHERE/HAVING)">​</a></h4>
<p>It is illegal to use a <code>collection_valued_path_expression</code> within a <code>WHERE</code> or <code>HAVING</code> clause as part of a
conditional expression except in an <code>empty_collection_comparison_expression</code>, in a <code>collection_member_expression</code>,
or as an argument to the <code>SIZE</code> operator.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-input-parameters">JPQL Input Parameters<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-input-parameters" class="hash-link" aria-label="Direct link to JPQL Input Parameters" title="Direct link to JPQL Input Parameters">​</a></h4>
<p>Either positional or named parameters may be used. Positional and named parameters may not be mixed in a single
query. <strong>Input parameters can only be used in the <code>WHERE</code> clause or <code>HAVING</code> clause of a query</strong>.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-positional-parameters">JPQL Positional Parameters<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-positional-parameters" class="hash-link" aria-label="Direct link to JPQL Positional Parameters" title="Direct link to JPQL Positional Parameters">​</a></h5>
<p>The following rules apply to positional parameters.</p>
<ul>
<li>Input parameters are designated by the question mark (<code>?</code>) prefix followed by an integer. For example: <code>?1</code>.</li>
<li>Input parameters are numbered starting from 1. Note that the same parameter can be used more than once in the
query string and that the ordering of the use of parameters within the query string need not conform to the order
of the positional parameters.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-named-parameters">JPQL Named Parameters<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-named-parameters" class="hash-link" aria-label="Direct link to JPQL Named Parameters" title="Direct link to JPQL Named Parameters">​</a></h5>
<p>A named parameter is an identifier that is prefixed by the ":" symbol. It follows the rules for identifiers defined
in <a href="https://chatbot.qubitpi.org/blog/jpql#jpql-from-identifiers">JPQL FROM Identifiers</a>. Named parameters are case sensitive.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> :rev</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-conditional-expression-composition">JPQL Conditional Expression Composition<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-conditional-expression-composition" class="hash-link" aria-label="Direct link to JPQL Conditional Expression Composition" title="Direct link to JPQL Conditional Expression Composition">​</a></h4>
<p>Conditional expressions are composed of other conditional expressions, comparison operations, logical operations,
path expressions that evaluate to boolean values, boolean literals, and boolean input parameters. Arithmetic
expressions can be used in comparison expressions. Arithmetic expressions are composed of other arithmetic
expressions, arithmetic operations, path expressions that evaluate to numeric values, numeric literals, and numeric
input parameters. Arithmetic operations use numeric promotion. Standard bracketing () for ordering expression
evaluation is supported. Conditional expressions are defined as follows:</p>
<ul>
<li><code>conditional_expression ::= conditional_term | conditional_expression OR conditional_term</code></li>
<li><code>conditional_term ::= conditional_factor | conditional_term AND conditional_factor</code></li>
<li><code>conditional_factor ::= [ NOT ] conditional_primary</code></li>
<li><code>conditional_primary ::= simple_cond_expression | (conditional_expression)</code></li>
<li><code>simple_cond_expression ::= comparison_expression | between_expression | like_expression | in_expression | null_comparison_expression | empty_collection_comparison_expression | collection_member_expression | exists_expression</code></li>
</ul>
<p>Aggregate functions can only be used in conditional expressions in a HAVING clause.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-operators-and-operator-precedence">JPQL Operators and Operator Precedence<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-operators-and-operator-precedence" class="hash-link" aria-label="Direct link to JPQL Operators and Operator Precedence" title="Direct link to JPQL Operators and Operator Precedence">​</a></h4>
<p>The operators are listed below in order of decreasing precedence.</p>
<ul>
<li>Navigation operator (.)</li>
<li>Arithmetic operators: +, - unary *, / multiplication and division +, - addition and subtraction</li>
<li>Comparison operators : <code>=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&lt;&gt;</code> (not equal), <code>[NOT] BETWEEN</code>, <code>[NOT] LIKE</code>, <code>[NOT] IN</code>, <code>IS [NOT] NULL</code>, <code>IS [NOT] EMPTY</code>, <code>[NOT] MEMBER [OF]</code></li>
<li>Logical operators: <code>NOT</code> <code>AND</code> <code>OR</code></li>
</ul>
<p>The following sections describe other operators used in specific expressions.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-between-expressions">JPQL Between Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-between-expressions" class="hash-link" aria-label="Direct link to JPQL Between Expressions" title="Direct link to JPQL Between Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>[NOT] BETWEEN</code> in a conditional expression is as follows:</p>
<ul>
<li><code>arithmetic_expression [NOT] BETWEEN arithmetic_expression AND arithmetic_expression | string_expression [NOT] BETWEEN string_expression AND string_expression | datetime_expression [NOT] BETWEEN datetime_expression AND datetime_expression</code></li>
</ul>
<p>The BETWEEN expression <code>x BETWEEN y AND z</code> is semantically equivalent to <code>y &lt;= x AND x &lt;= z</code>,</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-in-expressions">JPQL In Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-in-expressions" class="hash-link" aria-label="Direct link to JPQL In Expressions" title="Direct link to JPQL In Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>[NOT] IN</code> in a conditional expression is as follows:</p>
<ul>
<li><code>in_expression ::= state_field_path_expression [NOT] IN ( in_item {, in_item}* | subquery)</code></li>
<li><code>in_item ::= literal | input_parameter</code></li>
</ul>
<p>The <code>state_field_path_expression</code> must have a</p>
<ul>
<li>string,</li>
<li>numeric, or</li>
<li>enum value.</li>
</ul>
<p>The literal and/or input_parameter values must be like the same abstract schema type of the
<code>state_field_path_expression</code> in type. The results of the subquery must be like the same abstract schema type of the
<code>state_field_path_expression</code> in type. For example,, <code>o.country IN ('UK', 'US', 'France')</code></p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-like-expressions">JPQL Like Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-like-expressions" class="hash-link" aria-label="Direct link to JPQL Like Expressions" title="Direct link to JPQL Like Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>[NOT] LIKE</code> in a conditional expression is as follows:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">string_expression [NOT] LIKE pattern_value [ESCAPE escape_character]</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>The <code>string_expression</code> must have a string value</strong>. The <code>pattern_value</code> is a string literal or a string-valued
input parameter in which an underscore (<code>_</code>) stands for any single character, a percent (<code>%</code>) character stands for
any sequence of characters (including the empty sequence), and all other characters stand for themselves. The
optional <code>escape_character</code> is a single-character string literal or a character-valued input parameter (i.e., char
or Character) and is used to escape the special meaning of the underscore and percent characters in pattern_value. Examples are:</p>
<ul>
<li><code>asentence.word LIKE 'l_se'</code> - is true for 'lose' and false for 'loose'</li>
<li><code>aword.underscored LIKE '\_%' ESCAPE '\'</code> - is true for '_foo' and false for 'bar'</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-null-comparison-expressions">JPQL Null Comparison Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-null-comparison-expressions" class="hash-link" aria-label="Direct link to JPQL Null Comparison Expressions" title="Direct link to JPQL Null Comparison Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>IS NULL</code> in a conditional expression is as follows:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">{single_valued_path_expression | input_parameter } IS [NOT] NULL</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A null comparison expression tests whether or not the single-valued path expression or input parameter is a <code>NULL</code>
value.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-empty-collection-comparison-expressions">JPQL Empty Collection Comparison Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-empty-collection-comparison-expressions" class="hash-link" aria-label="Direct link to JPQL Empty Collection Comparison Expressions" title="Direct link to JPQL Empty Collection Comparison Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>IS EMPTY</code> in an <code>empty_collection_comparison_expression</code> is as follows:</p>
<ul>
<li><code>collection_valued_path_expression IS [NOT] EMPTY</code></li>
</ul>
<p>This expression tests whether or not the collection designated by the collection-valued path expression is empty
(i.e, has no elements).</p>
<p>For example, the following query will return all magazines that don't have any articles at all:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> EMPTY</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the value of the collection-valued path expression in an empty collection comparison expression is unknown, the
value of the empty comparison expression is unknown.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-collection-member-expressions">JPQL Collection Member Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-collection-member-expressions" class="hash-link" aria-label="Direct link to JPQL Collection Member Expressions" title="Direct link to JPQL Collection Member Expressions">​</a></h4>
<p>The use of the comparison <code>collection_member_expression</code> is as follows: syntax for the operator MEMBER OF in an</p>
<ul>
<li><code>collection_member_expression ::= entity_expression [NOT] MEMBER [OF] collection_valued_path_expression</code></li>
<li><code>entity_expression ::= single_valued_association_path_expression | simple_entity_expression</code></li>
<li><code>simple_entity_expression ::= identification_variable | input_parameter</code></li>
</ul>
<p>This expression tests whether the designated value is a member of the collection specified by the collection-valued
path expression. If the collection valued path expression designates an empty collection, the value of the <code>MEMBER OF</code> expression is <code>FALSE</code> and the value of the <code>NOT MEMBER OF</code> expression is <code>TRUE</code>. Otherwise, if the value of the
collection-valued path expression or single-valued association-field path expression in the collection member
expression is <code>NULL</code> or unknown, the value of the collection member expression is unknown.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-exists-expressions">JPQL Exists Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-exists-expressions" class="hash-link" aria-label="Direct link to JPQL Exists Expressions" title="Direct link to JPQL Exists Expressions">​</a></h4>
<p>An <code>EXISTS</code> expression is a predicate that is true only if the result of the subquery consists of one or more
values and that is false otherwise. The syntax of an exists expression is</p>
<ul>
<li><code>exists_expression ::= [NOT] EXISTS (subquery)</code></li>
</ul>
<p>The use of the reserved word <code>OF</code> is optional in this expression.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-all-or-any-expressions">JPQL All or Any Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-all-or-any-expressions" class="hash-link" aria-label="Direct link to JPQL All or Any Expressions" title="Direct link to JPQL All or Any Expressions">​</a></h4>
<p>An ALL conditional expression is a predicate that is true if the comparison operation is true for all values in the
result of the subquery or <strong>the result of the subquery is empty</strong>. An ALL conditional expression is false if the
result of the comparison is false for at least one row, and is unknown if neither true nor false. An ANY
conditional expression is a predicate that is true if the comparison operation is true for some value in the result
of the subquery. An ANY conditional expression is false <strong>if the result of the subquery is empty</strong> or if the
comparison operation is false for every value in the result of the subquery, and is unknown if neither true nor
false. <strong>The keyword SOME is synonymous with ANY</strong>. The comparison operators used with ALL or ANY conditional
expressions are <code>=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;&gt;</code>. The result of the subquery must be like that of the other argument to
the comparison operator in type.</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">all_or_any_expression ::= { ALL | ANY | SOME} (subquery)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example select the authors who make the highest salary for their magazine:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">salary </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">salary </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author a </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazine </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazine</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-subqueries">JPQL Subqueries<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-subqueries" class="hash-link" aria-label="Direct link to JPQL Subqueries" title="Direct link to JPQL Subqueries">​</a></h4>
<p>Subqueries may be used in the <code>WHERE</code> or <code>HAVING</code> clause. The syntax for subqueries is as follows:</p>
<ul>
<li><code>subquery ::= simple_select_clause subquery_from_clause [where_clause] [groupby_clause] [having_clause]</code></li>
<li>Subqueries are restricted to the WHERE and HAVING clauses in this release. Support for subqueries in the FROM
clause will be considered in a later release of the specification.</li>
<li><code>simple_select_clause ::= SELECT [DISTINCT] simple_select_expression</code></li>
<li><code>subquery_from_clause ::= FROM subselect_identification_variable_declaration {, subselect_identification_variable_declaration}*</code></li>
<li><code>subselect_identification_variable_declaration ::= identification_variable_declaration | association_path_expression [AS] identification_variable | collection_member_declaration</code></li>
<li><code>simple_select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable</code></li>
</ul>
<p>Examples:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> spouseAuth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author spouseAuth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> spouseAuth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spouse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">art</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-functional-expressions">JPQL Functional Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-functional-expressions" class="hash-link" aria-label="Direct link to JPQL Functional Expressions" title="Direct link to JPQL Functional Expressions">​</a></h4>
<p>The JPQL includes the following built-in functions, which may be used in the <code>WHERE</code> or <code>HAVING</code> clause of a query.
If the value of any argument to a functional expression is null or unknown, the value of the functional expression
is unknown.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-string-functions">JPQL String Functions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-string-functions" class="hash-link" aria-label="Direct link to JPQL String Functions" title="Direct link to JPQL String Functions">​</a></h5>
<ul>
<li><code>functions_returning_strings ::= CONCAT(string_primar y, string_primary) | SUBSTRING(string_primar y, simple_arithmetic_expression, simple_arithmetic_expression) | TRIM([[trim_specification] [trim_character] FROM] string_primary) | LOWER(string_primar y) | UPPER(string_primar y)</code></li>
<li><code>trim_specification ::= LEADING | TRAILING | BOTH</code></li>
<li><code>functions_returning_numerics ::= LENGTH(string_primar y) | LOCATE(string_primar y, string_primar y[, simple_arithmetic_expression])</code></li>
</ul>
<p>The <code>CONCAT</code> function returns a string that is a concatenation of its arguments. The second and third arguments of
the <code>SUBSTRING</code> function denote the starting position and length of the substring to be returned. These arguments
are integers. The first position of a string is denoted by 1. The <code>SUBSTRING</code> function returns a string. The <code>TRIM</code>
function trims the specified character from a string. If the character to be trimmed is not specified, it is
assumed to be space (or blank). The optional <code>trim_character</code> is a single-character string literal or a
character-valued input parameter (i.e., char or Character). If a trim specification is not provided, BOTH is
assumed. The <code>TRIM</code> function returns the trimmed string. The <code>LOWER</code> and <code>UPPER</code> functions convert a string to
lower and upper case, respectively. They return a string. The <code>LOCATE</code> function returns the position of a given
string within a string, starting the search at a specified position. It returns the first position at which the
string was found as an integer. The first argument is the string to be located; the second argument is the string
to be searched; the optional third argument is an integer that represents the string position at which the search
is started (by default, the beginning of the string to be searched). The first position in a string is denoted by
"1." If the string is not found, 0 is returned. The <code>LENGTH</code> function returns the length of the string in characters
"2." as an integer.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-arithmetic-functions">JPQL Arithmetic Functions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-arithmetic-functions" class="hash-link" aria-label="Direct link to JPQL Arithmetic Functions" title="Direct link to JPQL Arithmetic Functions">​</a></h5>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">functions_returning_numerics ::= ABS(simple_arithmetic_expression) | SQRT(simple_arithmetic_expression) | MOD(simple_arithmetic_expression, simple_arithmetic_expression) | SIZE(collection_valued_path_expression)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>ABS</code> function takes a numeric argument and returns a number (integer, float, or double) of the same type as the
argument to the function. The <code>SQRT</code> function takes a numeric argument and returns a double.</p>
<p>The <code>MOD</code> function takes two integer arguments and returns an integer. The <code>SIZE</code> function returns an integer
value, the number of elements of the collection. If the collection is empty, the <code>SIZE</code> function evaluates to zero.
Numeric arguments to these functions may correspond to the numeric Java object types as well as the primitive
numeric types.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-datetime-functions">JPQL Datetime Functions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-datetime-functions" class="hash-link" aria-label="Direct link to JPQL Datetime Functions" title="Direct link to JPQL Datetime Functions">​</a></h5>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">functions_returning_datetime:= CURRENT_DATE | CURRENT_TIME | CURRENT_TIMESTAMP</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The datetime functions return the value of current date, time, and timestamp on the database server.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-group-by-having">JPQL <code>GROUP BY</code>, <code>HAVING</code><a href="https://chatbot.qubitpi.org/blog/jpql#jpql-group-by-having" class="hash-link" aria-label="Direct link to jpql-group-by-having" title="Direct link to jpql-group-by-having">​</a></h2>
<p>The <code>GROUP BY</code> construct enables the aggregation of values according to a set of properties. The <code>HAVING</code> construct
enables conditions to be specified that further restrict the query result. <strong>Such conditions are restrictions upon
the groups</strong>. The syntax of the <code>GROUP BY</code> and <code>HAVING</code> clauses is as follows:</p>
<ul>
<li><code>groupby_clause ::= GROUP BY groupby_item {, groupby_item}*</code></li>
<li><code>groupby_item ::= single_valued_path_expression | identification_variable</code></li>
<li><code>having_clause ::= HAVING conditional_expression</code></li>
</ul>
<p>If a query contains both a <code>WHERE</code> clause and a <code>GROUP BY</code> clause, the effect is that of first applying the where
clause, and then forming the groups and filtering them according to the <code>HAVING</code> clause. The <code>HAVING</code> clause causes
those groups to be retained that satisfy the condition of the <code>HAVING</code> clause. The requirements for the <code>SELECT</code>
clause when <code>GROUP BY</code> is used follow those of SQL: namely, <strong>any item that appears in the <code>SELECT</code> clause (other
than as an argument to an aggregate function) must also appear in the <code>GROUP BY</code> clause</strong>. In forming the groups,
null values are treated as the same for grouping purposes. Grouping by an entity is permitted. In this case, the
entity must contain no serialized state fields or lob-valued state fields. The <code>HAVING</code> clause must specify search
conditions over the grouping items or aggregate functions that apply to grouping items.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-select-clause">JPQL <code>SELECT</code> Clause<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-select-clause" class="hash-link" aria-label="Direct link to jpql-select-clause" title="Direct link to jpql-select-clause">​</a></h2>
<p>The <code>SELECT</code> clause denotes the query result. More than one value may be returned from the <code>SELECT</code> clause of a
query. The <code>SELECT</code> clause may contain one or more of the following elements:</p>
<ul>
<li>a single range variable or identification variable that ranges over an entity abstract schema type,</li>
<li>a single-valued path expression,</li>
<li>an aggregate select expression,</li>
<li>a constructor expression.</li>
</ul>
<p>The <code>SELECT</code> clause has the following syntax:</p>
<ul>
<li><code>select_clause ::= SELECT [DISTINCT] select_expression {, select_expression}*</code></li>
<li><code>select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable | OBJECT(identification_variable) | constructor_expression</code></li>
<li><code>constructor_expression ::= NEW constructor_name ( constructor_item {, constructor_item}* )</code></li>
<li><code>constructor_item ::= single_valued_path_expression | aggregate_expression</code></li>
<li><code>aggregate_expression ::= { AVG | MAX | MIN | SUM } ([DISTINCT] state_field_path_expression) | COUNT ([DISTINCT] identification_variable | state_field_path_expression | single_valued_association_path_expression)</code></li>
</ul>
<p>For example:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.00</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_dFHE alert alert--warning"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_sFKi"><p>⚠️ Note that the <code>SELECT</code> clause must be specified to return only single-valued expressions. The query below is
therefore not valid</p><div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT mag.authors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM Magazine AS mag</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>The <code>DISTINCT</code> keyword is used to specify that duplicate values must be eliminated from the query result. If
<code>DISTINCT</code> is not specified, duplicate values are not eliminated. Standalone identification variables in the
<code>SELECT</code> clause may optionally be qualified by the <code>OBJECT</code> operator. The <code>SELECT</code> clause must not use the <code>OBJECT</code>
operator to qualify path expressions.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-result-type-of-the-select-clause">JPQL Result Type of the <code>SELECT</code> Clause<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-result-type-of-the-select-clause" class="hash-link" aria-label="Direct link to jpql-result-type-of-the-select-clause" title="Direct link to jpql-result-type-of-the-select-clause">​</a></h3>
<p>The type of the query result specified by the <code>SELECT</code> clause of a query is an entity abstract schema type, a
state-field type, the result of an aggregate function, the result of a construction operation, or some sequence of
these. The result type of the <code>SELECT</code> clause is defined by the the result types of the <code>select_expressions</code>
contained in it. When multiple <code>select_expressions</code> are used in the <code>SELECT</code> clause, the result of the query is of
type <code>Object[]</code>, and the elements in this result correspond in order to the order of their specification in the
<code>SELECT</code> clause and in type to the result types of each of the <code>select_expressions</code>. The type of the result of a
<code>select_expression</code> is as follows:</p>
<ul>
<li>A <code>single_valued_path_expression</code> that is a <code>state_field_path_expression</code> results in an object of the same type
as the corresponding state field of the entity. If the state field of the entity is a primitive type, the
corresponding object type is returned.</li>
<li><code>single_valued_path_expression</code> that is a <code>single_valued_association_path_expression</code> results in an entity object
of the type of the relationship field or the subtype of the relationship field of the entity object as determined
by the object/relational mapping.</li>
<li>The result type of an <code>identification_variable</code> is the type of the entity to which that identification variable
corresponds or a subtype as determined by the object/relational mapping.</li>
<li>The result type of <code>aggregate_expression</code> is defined in <a href="https://chatbot.qubitpi.org/blog/jpql#jpql-aggregate-functions">JPQL Aggregate Functions</a></li>
<li>The result type of a <code>constructor_expression</code> is the type of the class for which the constructor is defined. The
types of the arguments to the constructor are defined by the above rules.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-constructor-expressions">JPQL Constructor Expressions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-constructor-expressions" class="hash-link" aria-label="Direct link to JPQL Constructor Expressions" title="Direct link to JPQL Constructor Expressions">​</a></h3>
<p><strong>In the <code>SELECT</code> Clause a constructor may be used in the <code>SELECT</code> list to return one or more Java instances. The
specified class is not required to be an entity or to be mapped to the database. The constructor name must be fully
qualified</strong>.</p>
<p>If an entity class name is specified in the <code>SELECT NEW</code> clause, the resulting entity instances are in the new
state.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> NEW com</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">company</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PublisherInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.00</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-null-values-in-the-query-result">JPQL Null Values in the Query Result<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-null-values-in-the-query-result" class="hash-link" aria-label="Direct link to JPQL Null Values in the Query Result" title="Direct link to JPQL Null Values in the Query Result">​</a></h3>
<p>If the result of a query corresponds to an association-field or state-field whose value is null, that null value is
returned in the result of the query method. The <code>IS NOT NULL</code> construct can be used to eliminate such null values
from the result set of the query.</p>
<div class="theme-admonition theme-admonition-note admonition_dFHE alert alert--secondary"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_sFKi"><p>State-field types defined in terms of Java numeric primitive types cannot produce NULL values in the query result.
A query that returns such a state-field type as a result type must not return a null value.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-aggregate-functions">JPQL Aggregate Functions<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-aggregate-functions" class="hash-link" aria-label="Direct link to JPQL Aggregate Functions" title="Direct link to JPQL Aggregate Functions">​</a></h3>
<p>In the <code>SELECT</code> clause the result of a query may be the result of an aggregate function applied to a path
expression. The following aggregate functions can be used in the <code>SELECT</code> clause of a query:</p>
<ul>
<li><code>AVG</code></li>
<li><code>COUNT</code></li>
<li><code>MAX</code></li>
<li><code>MIN</code></li>
<li><code>SUM</code></li>
</ul>
<p>For all aggregate functions except <code>COUNT</code>, the path expression that is the argument to the aggregate function must
terminate in a state-field. The path expression argument to <code>COUNT</code> may terminate in either a state-field or an
association-field, or the argument to <code>COUNT</code> may be an identification variable. Arguments to the functions <code>SUM</code>
and <code>AVG</code> must be numeric. Arguments to the functions <code>MAX</code> and <code>MIN</code> must correspond to orderable state-field
types (i.e., numeric types, string types, character types, or date types). The Java type that is contained in the
result of a query using an aggregate function is as follows:</p>
<ul>
<li><code>COUNT</code> returns <code>Long</code>.</li>
<li><code>MAX</code> &amp; <code>MIN</code> return the type of the state-field to which they are applied.</li>
<li><code>AVG</code> returns <code>Double</code>.</li>
<li><code>SUM</code> returns <code>Long</code> when applied to state-fields of integral types (other than <code>BigInteger</code>); <code>Double</code> when
applied to state-fields of floating point types; <code>BigInteger</code> when applied to state-fields of type <code>BigInteger</code>;
and <code>BigDecimal</code> when applied to state-fields of type <code>BigDecimal</code>.</li>
</ul>
<p>If <code>SUM</code>, <code>AVG</code>, <code>MAX</code>, or <code>MIN</code> is used, and there are no values to which the aggregate function can be applied,
the result of the aggregate function is <code>NULL</code>. If <code>COUNT</code> is used, and there are no values to which <code>COUNT</code> can be
applied, the result of the aggregate function is 0.</p>
<p>The argument to an aggregate function may be preceded by the keyword <code>DISTINCT</code> to specify that duplicate values
are to be eliminated before the aggregate function is applied. Null values are eliminated before the aggregate
function is applied, regardless of whether the keyword <code>DISTINCT</code> is specified.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-order-by-clause">JPQL <code>ORDER BY</code> Clause<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-order-by-clause" class="hash-link" aria-label="Direct link to jpql-order-by-clause" title="Direct link to jpql-order-by-clause">​</a></h2>
<p>The <code>ORDER BY</code> clause allows the objects or values that are returned by the query to be ordered. The syntax of the
<code>ORDER BY</code> clause is</p>
<ul>
<li><code>orderby_clause ::= ORDER BY orderby_item {, orderby_item}*</code></li>
<li><code>orderby_item ::= state_field_path_expression [ASC | DESC]</code></li>
</ul>
<p>It is legal to specify <code>DISTINCT</code> with <code>MAX</code> or <code>MIN</code>, but it does not affect the result.</p>
<p>When the <code>ORDER BY</code> clause is used in a query, each element of the <code>SELECT</code> clause of the query must be one of the
following:</p>
<ul>
<li>an identification variable x, optionally denoted as <code>OBJECT(x)</code>,</li>
<li>a <code>single_valued_association_path_expression</code>, or a <code>state_field_path_expression</code>. For example:
<code>SELECT pub FROM Publisher pub JOIN pub.magazines mag ORDER BY o.revenue, o.name</code></li>
</ul>
<p>If more than one orderby-item is specified, the left-to-right sequence of the orderby-item elements determines the
precedence, whereby the leftmost orderby-item has highest precedence. The keyword <code>ASC</code> specifies that ascending
ordering be used; the keyword <code>DESC</code> specifies that descending ordering be used. Ascending ordering is the default.
SQL rules for the ordering of null values apply: that is, all null values must appear before all non-null values in
the ordering or all null values must appear after all non-null values in the ordering, but it is not specified
which. The ordering of the query result is preserved in the result of the query method if the <code>ORDER BY</code> clause is
used.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-bulk-update-and-delete">JPQL Bulk Update and Delete<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-bulk-update-and-delete" class="hash-link" aria-label="Direct link to JPQL Bulk Update and Delete" title="Direct link to JPQL Bulk Update and Delete">​</a></h2>
<p>Operations Bulk update and delete operations apply to entities of a single entity class (together with its
subclasses, if any). Only one entity abstract schema type may be specified in the <code>FROM</code> or <code>UPDATE</code> clause. The
syntax of these operations is as follows:</p>
<ul>
<li><code>update_statement ::= update_clause [where_clause]</code></li>
<li><code>update_clause ::= UPDATE abstract_schema_name [[AS] identification_variable] SET update_item {, update_item}*</code></li>
<li><code>update_item ::= [identification_variable.]{state_field | single_valued_association_field} = new_value</code></li>
<li><code>new_value ::= simple_arithmetic_expression | string_primary | datetime_primary | boolean_primary | enum_primary simple_entity_expression | NULL</code></li>
<li><code>delete_statement ::= delete_clause [where_clause]</code></li>
<li><code>delete_clause ::= DELETE FROM abstract_schema_name [[AS] identification_variable]</code></li>
</ul>
<p>The syntax of the <code>WHERE</code> clause is described in <a href="https://chatbot.qubitpi.org/blog/jpql#jpql-where-clause">JPQL WHERE Clause</a>. A delete operation only
applies to entities of the specified class and its subclasses. It does not cascade to related entities. The
<code>new_value</code> specified for an update operation must be compatible in type with the state-field to which it is
assigned. Bulk update maps directly to a database update operation, bypassing optimistic locking checks. Portable
applications must manually update the value of the version column, if desired, and/or manually validate the value
of the version column. <strong>The persistence context is not synchronized with the result of the bulk update or delete.
Caution should be used when executing bulk update or delete operations because they may result in inconsistencies
between the database and the entities in the active persistence context. In general, bulk update and delete
operations should only be performed within a separate transaction or at the beginning of a transaction (before
entities have been accessed whose state might be affected by such operations)</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-null-values">JPQL Null Values<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-null-values" class="hash-link" aria-label="Direct link to JPQL Null Values" title="Direct link to JPQL Null Values">​</a></h2>
<p>When the target of a reference does not exist in the database, its value is regarded as <code>NULL</code>. SQL 92 NULL
semantics defines the evaluation of conditional expressions containing NULL values. The following is a brief
description of these semantics:</p>
<ul>
<li><code>Comparison or arithmetic operations with a NULL value always yield an unknown value.</code></li>
<li><code>Two NULL values are not considered to be equal, the comparison yields an unknown value.</code></li>
<li><code>Comparison or arithmetic operations with an unknown value always yield an unknown value.</code></li>
<li><code>The IS NULL and IS NOT NULL operators convert a NULL state-field or single-valued association-field value into the respective TRUE or FALSE value.</code></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_dFHE alert alert--info"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_sFKi"><p>The JPQL defines the empty string, "", as a string with 0 length, which is not equal to a <code>NULL</code> value. However,
<code>NULL</code> values and empty strings may not always be distinguished when queries are mapped to some databases.
Application developers should therefore not rely on the semantics of query comparisons involving the empty string
and <code>NULL</code> value.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-equality-and-comparison-semantics">JPQL Equality and Comparison Semantics<a href="https://chatbot.qubitpi.org/blog/jpql#jpql-equality-and-comparison-semantics" class="hash-link" aria-label="Direct link to JPQL Equality and Comparison Semantics" title="Direct link to JPQL Equality and Comparison Semantics">​</a></h2>
<p>Only the values of like types are permitted to be compared. A type is like another type if they correspond to the
same Java language type, or if one is a primitive Java language type and the other is the wrappered Java class type
equivalent (e.g., <code>int</code> and <code>Integer</code> are like types in this sense). There is one exception to this rule: it is
valid to compare numeric values for which the rules of numeric promotion apply. Conditional expressions attempting
to compare non-like type values are disallowed except for this numeric case. Note that the arithmetic operators and
comparison operators are permitted to be applied to state-fields and input parameters of the wrappered Java class
equivalents to the primitive numeric Java types. Two entities of the same abstract schema type are equal if and
only if they have the same primary key value. Only equality/inequality comparisons over enums are required to be
supported.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="the-complete-jpql-bnf">The Complete JPQL BNF<a href="https://chatbot.qubitpi.org/blog/jpql#the-complete-jpql-bnf" class="hash-link" aria-label="Direct link to The Complete JPQL BNF" title="Direct link to The Complete JPQL BNF">​</a></h2>
<p>The following is the BNF for the Java Persistence query language, from section 4.14 of the JSR 220 specification.</p>
<ul>
<li><code>QL_statement ::= select_statement | update_statement | delete_statement</code></li>
<li><code>select_statement ::= select_clause from_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]</code></li>
<li><code>update_statement ::= update_clause [where_clause]</code></li>
<li><code>delete_statement ::= delete_clause [where_clause]</code></li>
<li><code>from_clause ::= FROM identification_variable_declaration {, {identification_variable_declaration | collection_member_declaration}}*</code></li>
<li><code>identification_variable_declaration ::= range_variable_declaration { join | fetch_join }*</code></li>
<li><code>range_variable_declaration ::= abstract_schema_name [AS] identification_variable</code></li>
<li><code>join ::= join_spec join_association_path_expression [AS] identification_variable</code></li>
<li><code>fetch_join ::= join_spec FETCH join_association_path_expression</code></li>
<li><code>association_path_expression ::= collection_valued_path_expression | single_valued_association_path_expression</code></li>
<li><code>join_spec ::= [LEFT [OUTER]|INNER] JOIN</code></li>
<li><code>join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression</code></li>
<li><code>join_collection_valued_path_expression ::= identification_variable.collection_valued_association_field</code></li>
<li><code>join_single_valued_association_path_expression ::= identification_variable.single_valued_association_field</code></li>
<li><code>collection_member_declaration ::= IN (collection_valued_path_expression) [AS] identification_variable</code></li>
<li><code>single_valued_path_expression ::= state_field_path_expression | single_valued_association_path_expression</code></li>
<li><code>state_field_path_expression ::= {identification_variable | single_valued_association_path_expression}.state_field</code></li>
<li><code>single_valued_association_path_expression ::= identification_variable.{single_valued_association_field.}* single_valued_association_field</code></li>
<li><code>collection_valued_path_expression ::= identification_variable.{single_valued_association_field.}*collection_valued_association_field</code></li>
<li><code>state_field ::= {embedded_class_state_field.}*simple_state_field</code></li>
<li><code>update_clause ::= UPDATE abstract_schema_name [[AS] identification_variable] SET update_item {, update_item}*</code></li>
<li><code>update_item ::= [identification_variable.]{state_field | single_valued_association_field}= new_value</code></li>
<li><code>new_value ::= simple_arithmetic_expression | string_primary | datetime_primary | boolean_primary | enum_primary simple_entity_expression | NULL</code></li>
<li><code>delete_clause ::= DELETE FROM abstract_schema_name [[AS] identification_variable]</code></li>
<li><code>select_clause ::= SELECT [DISTINCT] select_expression {, select_expression}*</code></li>
<li><code>select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable | OBJECT(identification_variable)| constructor_expression</code></li>
<li><code>constructor_expression ::= NEW constructor_name( constructor_item {, constructor_item}*)</code></li>
<li><code>constructor_item ::= single_valued_path_expression | aggregate_expression</code></li>
<li><code>aggregate_expression ::= {AVG |MAX |MIN |SUM}([DISTINCT] state_field_path_expression) | COUNT ([DISTINCT] identification_variable | state_field_path_expression | single_valued_association_path_expression)</code></li>
<li><code>where_clause ::= WHERE conditional_expression</code></li>
<li><code>groupby_clause ::= GROUP BY groupby_item {, groupby_item}*</code></li>
<li><code>groupby_item ::= single_valued_path_expression | identification_variable</code></li>
<li><code>having_clause ::= HAVING conditional_expression</code></li>
<li><code>orderby_clause ::= ORDER BY orderby_item {, orderby_item}*</code></li>
<li><code>orderby_item ::= state_field_path_expression [ASC |DESC ]</code></li>
<li><code>subquery ::= simple_select_clause subquery_from_clause [where_clause] [groupby_clause] [having_clause]</code></li>
<li><code>subquery_from_clause ::= FROM subselect_identification_variable_declaration {, subselect_identification_variable_declaration}*</code></li>
<li><code>subselect_identification_variable_declaration ::= identification_variable_declaration | association_path_expression [AS] identification_variable | collection_member_declaration</code></li>
<li><code>simple_select_clause ::= SELECT [DISTINCT] simple_select_expression</code></li>
<li><code>simple_select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable</code></li>
<li><code>conditional_expression ::= conditional_term | conditional_expression OR conditional_term</code></li>
<li><code>conditional_term ::= conditional_factor | conditional_term AND conditional_factor</code></li>
<li><code>conditional_factor ::= [NOT ] conditional_primary</code></li>
<li><code>conditional_primary ::= simple_cond_expression |(conditional_expression)</code></li>
<li><code>simple_cond_expression ::= comparison_expression | between_expression | like_expression | in_expression | null_comparison_expression | empty_collection_comparison_expression | collection_member_expression | exists_expression</code></li>
<li><code>between_expression ::= arithmetic_expression [NOT] BETWEEN arithmetic_expression AND arithmetic_expression | string_expression [NOT] BETWEEN string_expression AND string_expression | datetime_expression [NOT] BETWEEN datetime_expression AND datetime_expression</code></li>
<li><code>in_expression ::= state_field_path_expression [NOT] IN( in_item {, in_item}* | subquery)</code></li>
<li><code>in_item ::= literal | input_parameter</code></li>
<li><code>like_expression ::= string_expression [NOT] LIKE pattern_value [ESCAPE escape_character]</code></li>
<li><code>null_comparison_expression ::= {single_valued_path_expression | input_parameter}IS [NOT] NULL</code></li>
<li><code>empty_collection_comparison_expression ::= collection_valued_path_expression IS [NOT] EMPTY</code></li>
<li><code>collection_member_expression ::= entity_expression [NOT] MEMBER [OF] collection_valued_path_expression</code></li>
<li><code>exists_expression ::= [NOT] EXISTS(subquery)</code></li>
<li><code>all_or_any_expression ::= {ALL |ANY |SOME}(subquery)</code></li>
<li><code>comparison_expression ::= string_expressioncomparison_operator{string_expression|all_or_any_expression}| boolean_expression {=|&lt;&gt;} {boolean_expression | all_or_any_expression} | enum_expression {=|&lt;&gt;} {enum_expression | all_or_any_expression} | datetime_expression comparison_operator {datetime_expression | all_or_any_expression} | entity_expression {= |&lt;&gt; } {entity_expression | all_or_any_expression} | arithmetic_expression comparison_operator {arithmetic_expression | all_or_any_expression}</code></li>
<li><code>comparison_operator ::== |&gt; |&gt;= |&lt; |&lt;= |&lt;&gt;</code></li>
<li><code>arithmetic_expression ::= simple_arithmetic_expression |(subquery)</code></li>
<li><code>simple_arithmetic_expression ::= arithmetic_term | simple_arithmetic_expression {+ |- } arithmetic_term</code></li>
<li><code>arithmetic_term ::= arithmetic_factor | arithmetic_term {* |/ } arithmetic_factor</code></li>
<li><code>arithmetic_factor ::= [{+ |-}] arithmetic_primary</code></li>
<li><code>arithmetic_primary ::= state_field_path_expression | numeric_literal | (simple_arithmetic_expression) | input_parameter | functions_returning_numerics | aggregate_expression</code></li>
<li><code>string_expression ::= string_primary |(subquery)</code></li>
<li><code>string_primary ::= state_field_path_expression | string_literal | input_parameter | functions_returning_strings | aggregate_expression</code></li>
<li><code>datetime_expression ::= datetime_primary |(subquery)</code></li>
<li><code>datetime_primary ::= state_field_path_expression | input_parameter | functions_returning_datetime | aggregate_expression</code></li>
<li><code>boolean_expression ::= boolean_primary |(subquery)</code></li>
<li><code>boolean_primary ::= state_field_path_expression | boolean_literal | input_parameter |</code></li>
<li><code>enum_expression ::= enum_primary |(subquery)</code></li>
<li><code>enum_primary ::= state_field_path_expression | enum_literal | input_parameter |</code></li>
<li><code>entity_expression ::= single_valued_association_path_expression | simple_entity_expression</code></li>
<li><code>simple_entity_expression ::= identification_variable | input_parameter</code></li>
<li><code>functions_returning_numerics ::= LENGTH(string_primary)| LOCATE(string_primary,string_primary [, simple_arithmetic_expression]) | ABS(simple_arithmetic_expression) | SQRT(simple_arithmetic_expression) | MOD(simple_arithmetic_expression, simple_arithmetic_expression) | SIZE(collection_valued_path_expression)</code></li>
<li><code>functions_returning_datetime ::= CURRENT_DATE| CURRENT_TIME | CURRENT_TIMESTAMP</code></li>
<li><code>functions_returning_strings ::= CONCAT(string_primary, string_primary) | SUBSTRING(string_primary, simple_arithmetic_expression,simple_arithmetic_expression)| TRIM([[trim_specification] [trim_character] FROM] string_primary) | LOWER(string_primary) | UPPER(string_primary)</code></li>
<li><code>trim_specification ::= LEADING | TRAILING | BOTH</code></li>
</ul>]]></content:encoded>
            <category>Java</category>
            <category>JQPL</category>
        </item>
        <item>
            <title><![CDATA[What is Java EE]]></title>
            <link>https://chatbot.qubitpi.org/blog/java-ee</link>
            <guid>https://chatbot.qubitpi.org/blog/java-ee</guid>
            <pubDate>Mon, 26 Oct 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.oracle.com/java/technologies/java-ee-glance.html" target="_blank" rel="noopener noreferrer">Java EE</a> is a collection of specifications for developing
and deploying enterprise applications.</p>
<p>In general, enterprise applications refer to software hosted on servers that provide the applications that support the
enterprise.</p>
<p>The specifications (defined by Sun) describe services, application programming interfaces (APIs), and protocols.</p>
<p>The Java EE product provider is typically an application-server, web-server, or database-system vendor who provides
classes that implement the interfaces defined in the specifications. These vendors compete on implementations of the
Java EE specifications.</p>
<p>When a company requires Java EE experience what are they really asking for is experience using the technologies that
make up Java EE. Frequently, a company will only be using a subset of the Java EE technologies.</p>
<p>A reference implementation of Java EE is <a href="https://javaee.github.io/glassfish/documentation" target="_blank" rel="noopener noreferrer">GlassFish</a></p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="evolution-of-java-ee">Evolution of Java EE<a href="https://chatbot.qubitpi.org/blog/java-ee#evolution-of-java-ee" class="hash-link" aria-label="Direct link to Evolution of Java EE" title="Direct link to Evolution of Java EE">​</a></h2>
<p>Ever heard of Java EE? How about Java 2EE, J2EE, or now Jakarta EE? Actually, these are all different names for the same
thing: a set of enterprise specifications that extend Java SE. In this section, we discuss the evolution of Java EE.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="history">History<a href="https://chatbot.qubitpi.org/blog/java-ee#history" class="hash-link" aria-label="Direct link to History" title="Direct link to History">​</a></h3>
<p>In the first version of Java, Java enterprise extensions were simply
<a href="http://titanium.cs.berkeley.edu/doc/java-langspec-1.0/" target="_blank" rel="noopener noreferrer">a part of the core JDK</a>.</p>
<p>Then, as part of Java 2 in 1999, these extensions were broken out of the standard binaries, and J2EE, or
<a href="https://www.oracle.com/java/technologies/appmodel.html" target="_blank" rel="noopener noreferrer">Java 2 Platform Enterprise Edition</a>, was born. It would keep
that name until 2006.</p>
<p>For Java 5 in 2006, J2EE was renamed to Java EE or Java Platform Enterprise Edition. That name would stick all the way
to September 2017, when <strong>something major happened</strong>.</p>
<p><strong>In September 2017,
<a href="https://www.redhat.com/en/blog/java-ee-moves-eclipse" target="_blank" rel="noopener noreferrer">Oracle decided to give away the rights for Java EE to the Eclipse Foundation</a>
(the language is still owned by Oracle)</strong>.</p>
<p><img loading="lazy" alt="Error loading java-evolution.png" src="data:image/png;base64,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" class="img_kerH"></p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="in-transition">In Transition<a href="https://chatbot.qubitpi.org/blog/java-ee#in-transition" class="hash-link" aria-label="Direct link to In Transition" title="Direct link to In Transition">​</a></h3>
<p>Actually, the Eclipse Foundation legally <em>had to</em> rename Java EE. That's because Oracle has the rights over the "Java"
brand.</p>
<p>So to choose the new name, the community voted and picked: <strong>Jakarta EE</strong>. In a certain way, it's still JEE.</p>
<p>This is still an evolving story, though, and the dust hasn't completely settled. For example, while Oracle open-sourced
the source code, they did not open-source all the documentation. There's still a lot of discussion over this matter
because of legal issues that make it tricky to open-source documentation related to, for example, JMS and EJB.</p>
<p>It's not clear yet if new Eclipse Foundation documentation will be able to refer to the originals.</p>
<p>Also, curiously, the Eclipse Foundation can't create any new Java packages using the javax namespace, but it can create
new classes and subclasses under the existing ones.</p>
<p>The transition also means <a href="https://www.eclipse.org/projects/efsp/" target="_blank" rel="noopener noreferrer">a new process for adding specifications</a> to Jakarta
EE. To understand it better, let's take a look at what that process was like under Oracle and how it changes under the
Eclipse Foundation in the next section.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="the-future">The Future<a href="https://chatbot.qubitpi.org/blog/java-ee#the-future" class="hash-link" aria-label="Direct link to The Future" title="Direct link to The Future">​</a></h3>
<p>Historically, in order for a feature to make it into "EE", we needed three things:</p>
<ol>
<li>a specification,</li>
<li>a reference implementation, and</li>
<li>tests</li>
</ol>
<p>These three things could be provided by anyone in the community, and an Executive Committee would decide when these were
ready to add to the language.</p>
<p>To better understand the past process, let's take a closer look at what JSRs(specification), Glassfish(implementation),
and the TCK(test) are and how they embodied new EE features.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="the-jcp---efsp">The JCP -&gt; EFSP<a href="https://chatbot.qubitpi.org/blog/java-ee#the-jcp---efsp" class="hash-link" aria-label="Direct link to The JCP -> EFSP" title="Direct link to The JCP -> EFSP">​</a></h3>
<p>In the past, the process by which a new EE feature was born was called the Java Community Process
(<a href="https://jcp.org/en/home/index" target="_blank" rel="noopener noreferrer">JCP</a>).</p>
<p>Java SE still uses the JCP today. But, since EE has changed its ownership, from Oracle to the Eclipse Foundation, we
have a new and separate process for that. It's the Eclipse Foundation Specification Process
(<a href="https://www.eclipse.org/projects/efsp/" target="_blank" rel="noopener noreferrer">EFSP</a>) and it's an extension of the
<a href="https://www.eclipse.org/projects/dev_process" target="_blank" rel="noopener noreferrer">Eclipse Development Process</a>.</p>
<p>There are
<a href="https://blogs.eclipse.org/post/tanja-obradovic/how-eclipse-foundation-specification-process-efsp-different-java-community" target="_blank" rel="noopener noreferrer">some important differences</a>,
though, mostly around "Transparency, Openness, Shared Burden and Vendor Neutrality"". The EFSP organizers, for example,
envision collaborative working groups that are vendor-neutral, a certification process that is self-service, and an
organization that operates and governs as a meritocracy.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jsrs">JSRs<a href="https://chatbot.qubitpi.org/blog/java-ee#jsrs" class="hash-link" aria-label="Direct link to JSRs" title="Direct link to JSRs">​</a></h3>
<p>In the JCP, the first step to adding a feature to EE was to create a JSR or Java Specification Request. The JSR was a
bit like the interface for an EE feature. The JCP Executive Committee reviewed and approved a completed JSR, and then
JSR contributors would code it up and make it available to the community.</p>
<p>A good example of this was <a href="https://jcp.org/en/jsr/detail?id=339" target="_blank" rel="noopener noreferrer">JSR-339</a>  - or JAX-RS - which was originally proposed
in 2011, approved by JCP in 2012 and finally released in 2013.</p>
<p>And while the community could always weigh in while a specification was under discussion, time showed that an
implementation-first approach – like in the case of <a href="https://jcp.org/en/jsr/detail?id=310" target="_blank" rel="noopener noreferrer">JSR 310</a>, <code>java.time</code>, and
Joda Time - tended to create more widely-accepted features and APIs.</p>
<p>So, the EFSP reflects this code-first view in its stated goal: "EFSP will be based on hands-on experimenting and coding
first, as a way to prove something is worthy of documenting in a specification".</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="glassfish">Glassfish<a href="https://chatbot.qubitpi.org/blog/java-ee#glassfish" class="hash-link" aria-label="Direct link to Glassfish" title="Direct link to Glassfish">​</a></h3>
<p>Then, as part of the JCP, a JSR needed a reference implementation. This is a bit like the class that implements the
interface. A reference implementation helps developers of compatible libraries or other organizations that want to
create their own implementation of the spec.</p>
<p>For Java EE features, the JCP used Glassfish for its reference implementations.</p>
<p>And while this centralization on Glassfish simplified the discovery process for implementers, that centralization also
required more governance and had a tendency to favor one vendor over another.</p>
<p>Hence, the EFSP doesn't require a reference implementation, but instead only a compatible implementation. Simply put,
this subtle change makes so that <strong>implementations inside of a central architecture, like Glassfish, won't be
inadvertently preferred by the foundation</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="tck">TCK<a href="https://chatbot.qubitpi.org/blog/java-ee#tck" class="hash-link" aria-label="Direct link to TCK" title="Direct link to TCK">​</a></h3>
<p>Finally, the JCP required that EE features be tested through the Technology Compatibility Kit, or
<a href="https://projects.eclipse.org/projects/ee4j.jakartaee-tck" target="_blank" rel="noopener noreferrer">TCK</a>.</p>
<p>The TCK was a suite of tests to validate a specific EE JSR. Simply put, in order to comply with Java EE, an application
server needs to implement all of its JSRs and pass all the tests on the designated TCK.</p>
<p>Not much changes here. Oracle open-sourced the TCK as well as the EE JSRs. Of course, all future documents and the TCK
will be open-source.</p>]]></content:encoded>
            <category>Java</category>
            <category>Standard</category>
        </item>
        <item>
            <title><![CDATA[MySQL Troubleshooting]]></title>
            <link>https://chatbot.qubitpi.org/blog/mysql-troubleshooting</link>
            <guid>https://chatbot.qubitpi.org/blog/mysql-troubleshooting</guid>
            <pubDate>Wed, 09 Sep 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="i-forgot-password">I Forgot Password<a href="https://chatbot.qubitpi.org/blog/mysql-troubleshooting#i-forgot-password" class="hash-link" aria-label="Direct link to I Forgot Password" title="Direct link to I Forgot Password">​</a></h2>
<p>Let's say you want to login to MySQL shell as root, whose password is lost. You could do</p>
<p>Stop and start mysql with <code>--skip-grant-tables</code> option</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql.server stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql.server start --skip-grant-tables</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>then connect to your mysqld without username/password</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Drop the user (e.g. <code>root</code>). After deleting the user, flush the mysql privileges. then create the user. Assuming we want
to create the user root @ localhost, these would be the commands:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">drop user admin@localhost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FLUSH PRIVILEGES</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">create user admin@localhost identified by </span><span class="token string" style="color:#e3116c">'foo'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UPDATE mysql.user SET </span><span class="token assign-left variable" style="color:#36acaa">Grant_priv</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'Y'</span><span class="token plain">, </span><span class="token assign-left variable" style="color:#36acaa">Super_priv</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'Y'</span><span class="token plain"> WHERE </span><span class="token assign-left variable" style="color:#36acaa">User</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'root'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FLUSH PRIVILEGES</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GRANT ALL ON *.* TO </span><span class="token string" style="color:#e3116c">'root'</span><span class="token plain">@</span><span class="token string" style="color:#e3116c">'localhost'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>then we can login to MySQL with the new password</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">$ mysql </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> localhost </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> root </span><span class="token parameter variable" style="color:#36acaa">-pfoo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">Warning</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> Using a password on the </span><span class="token builtin class-name">command</span><span class="token plain"> line interface can be insecure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to the MySQL monitor.  Commands end with </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> or </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain">g.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Your MySQL connection </span><span class="token function" style="color:#d73a49">id</span><span class="token plain"> is </span><span class="token number" style="color:#36acaa">12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Server version: </span><span class="token number" style="color:#36acaa">8.0</span><span class="token plain">.23 Homebrew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Copyright </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain">, Oracle and/or its affiliates.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Oracle is a registered trademark of Oracle Corporation and/or its</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">affiliates. Other names may be trademarks of their respective</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">owners.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type </span><span class="token string" style="color:#e3116c">'help;'</span><span class="token plain"> or </span><span class="token string" style="color:#e3116c">'\h'</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> help. Type </span><span class="token string" style="color:#e3116c">'\c'</span><span class="token plain"> to </span><span class="token function" style="color:#d73a49">clear</span><span class="token plain"> the current input statement.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If <code>mysql</code> still complains about access denied after <code>mysql.server start --skip-grant-tables</code>, uninstall mysql and
mysql-client with</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">brew uninstall mysql mysql-client</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then do not install mysql through homebrew, but from
<a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener noreferrer">MySQL official page</a> instead.</p>
<div class="theme-admonition theme-admonition-caution admonition_dFHE alert alert--warning"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_sFKi"><p>It is very important to remember that the installation will show us a temporary root password. Please DO make sure to
copy this as we will be needing it to reset our root password later</p></div></div>
<p>We will, however, still install mysql-client using homebrew"</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> mysql-client</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then we can do</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> localhost </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> root </span><span class="token parameter variable" style="color:#36acaa">-p</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>MySQL won't allow us to do anything further unless we reset password using the temporary one given during the
installation step:</p>
<div class="language-mysql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-mysql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">SET PASSWORD = PASSWORD('your_new_password');</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Exit mysql shell and re-enter it. We shall start using MySQL now.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="implicit-default-handling"><a href="https://dev.mysql.com/doc/refman/8.0/en/data-type-defaults.html" target="_blank" rel="noopener noreferrer">Implicit Default Handling</a><a href="https://chatbot.qubitpi.org/blog/mysql-troubleshooting#implicit-default-handling" class="hash-link" aria-label="Direct link to implicit-default-handling" title="Direct link to implicit-default-handling">​</a></h2>
<p>For data entry into a <code>NOT NULL</code> column that has no explicit <code>DEFAULT</code> clause, if an <code>INSERT</code> or <code>REPLACE</code> statement
includes no value for the column, or an <code>UPDATE</code> statement sets the column to <code>NULL</code>, MySQL handles the column according
to the <strong>SQL mode</strong> in effect at the time:</p>
<ul>
<li>If strict SQL mode is enabled, an error occurs for transactional tables and the statement is rolled back. For
nontransactional tables, an error occurs, but if this happens for the second or subsequent row of a multiple-row
statement, the preceding rows are inserted.</li>
<li>If strict mode is not enabled, MySQL sets the column to the <strong>implicit default value</strong> for the column data type.</li>
</ul>
<p><a href="https://dba.stackexchange.com/a/194135" target="_blank" rel="noopener noreferrer">Running through a quick check</a>:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> sql_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> a </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- all of these insert the value 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Whipe it and set strict mode,</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">TRUNCATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> sql_mode</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'strict_all_tables'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Retry,</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DEFAULT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR </span><span class="token number" style="color:#36acaa">1364</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HY000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: Field </span><span class="token string" style="color:#e3116c">'a'</span><span class="token plain"> doesn</span><span class="token string" style="color:#e3116c">'t have a default value</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">-- still inserts "implicit default", doesn'</span><span class="token plain">t gaf about strict </span><span class="token keyword" style="color:#00009f">mode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Query OK</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">row</span><span class="token plain"> affected </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.01</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> foo </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR </span><span class="token number" style="color:#36acaa">1364</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HY000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">: Field </span><span class="token string" style="color:#e3116c">'a'</span><span class="token plain"> doesn't have a </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">value</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You'll see now only one row in the table which is a result of the
<a href="https://dba.stackexchange.com/q/194120/2639" target="_blank" rel="noopener noreferrer">goofy syntax</a> that is still permitted with "strict mode".</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="left-join-comes-out-with-duplicate-rows"><a href="https://stackoverflow.com/questions/22769641/left-join-without-duplicate-rows-from-left-table" target="_blank" rel="noopener noreferrer">Left Join Comes Out with Duplicate Rows</a><a href="https://chatbot.qubitpi.org/blog/mysql-troubleshooting#left-join-comes-out-with-duplicate-rows" class="hash-link" aria-label="Direct link to left-join-comes-out-with-duplicate-rows" title="Direct link to left-join-comes-out-with-duplicate-rows">​</a></h2>
<p>The cause of the duplicate rows is that the left table has rows that have more than 1 associated rows in the right
table.</p>
<p>The solution is to <code>GROUP BY</code> the results.</p>
<p>For example, take a look at the following query:</p>
<div class="language-csv codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-csv codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">tbl_contents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">content_id  content_title    content_text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10002   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10003   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10004   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10005   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10006   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10007   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10008   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10009   New case Study   New case Study</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10010   SEO News Title   SEO News Text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10011   SEO News Title   SEO News Text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10012   Publish Contents SEO News Text</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-csv codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-csv codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">tbl_media</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">media_id    media_title  content_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1000    New case Study   10012</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1001    SEO News Title   10010</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1002    SEO News Title   10011</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1003    Publish Contents 10012</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> M</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">media_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tbl_contents C </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> tbl_media M </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> M</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Content_DatePublished </span><span class="token keyword" style="color:#00009f">ASC</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-csv codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-csv codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">10002   New case Study  2014-03-31 13:39:29.280 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10003   New case Study  2014-03-31 14:23:06.727 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10004   New case Study  2014-03-31 14:25:53.143 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10005   New case Study  2014-03-31 14:26:06.993 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10006   New case Study  2014-03-31 14:30:18.153 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10007   New case Study  2014-03-31 14:30:42.513 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10008   New case Study  2014-03-31 14:31:56.830 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10009   New case Study  2014-03-31 14:35:18.040 NULL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10010   SEO News Title  2014-03-31 15:22:15.983 1001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10011   SEO News Title  2014-03-31 15:22:30.333 1002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10012   Publish         2014-03-31 15:25:11.753 1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10012   Publish         2014-03-31 15:25:11.753 1003</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We see that <code>10012</code> are coming up twice..., because some rows in tbl_contents has more than 1 associated rows in
tbl_media. To eliminate the duplicate:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_title</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Content_DatePublished</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    M</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">media_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tbl_contents C </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> tbl_media M </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> M</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Content_DatePublished </span><span class="token keyword" style="color:#00009f">ASC</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="loading-large-file-into-database-causes-mysql-server-has-gone-away">Loading Large File into Database Causes "MySQL Server has gone away"<a href="https://chatbot.qubitpi.org/blog/mysql-troubleshooting#loading-large-file-into-database-causes-mysql-server-has-gone-away" class="hash-link" aria-label="Direct link to Loading Large File into Database Causes &quot;MySQL Server has gone away&quot;" title="Direct link to Loading Large File into Database Causes &quot;MySQL Server has gone away&quot;">​</a></h2>
<p>According to <a href="https://dev.mysql.com/doc/refman/8.0/en/gone-away.html" target="_blank" rel="noopener noreferrer">documentation</a> and personal experience, the most
common reason is that you send a query to the server that is incorrect or <a href="https://chatbot.qubitpi.org/blog/mysql-troubleshooting#large-packet">too large</a>. If MySQL Server
receives a packet that is too large or out of order, it assumes that something has gone wrong with the client and
closes the connection. If you need big queries (for example, if you are working with big BLOB columns), you can
increase the query limit by setting the server's <code>max_allowed_packet</code> variable, which has a default value of 64MB. You
may also need to increase the maximum packet size on the client end.</p>
<p><strong>Both the client and the server have their own <code>max_allowed_packet</code> variable, so if you want to handle big packets,
you must increase this variable both in the client and in the server</strong>.</p>
<p>If you are using the mysql <strong>client program</strong>, its default <code>max_allowed_packet</code> variable is 16MB. To set a larger value,
start mysql like this:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token parameter variable" style="color:#36acaa">--max_allowed_packet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">32M</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That sets the packet size to 32MB.</p>
<p>The server's default <code>max_allowed_packet</code> value is 64MB. You can increase this if the server needs to handle big
queries (for example, if you are working with big BLOB columns). For example, to set the variable to 128MB, start the
server like this:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysqld </span><span class="token parameter variable" style="color:#36acaa">--max_allowed_packet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">128M</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can also use an option file to set <code>max_allowed_packet</code>. For example, to set the size for the server to 128MB, add
the following lines in an option file:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">mysqld</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">max_allowed_packet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">128M</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is safe to increase the value of this variable because the extra memory is allocated only when needed. For example,
MySQL Server allocates more memory only when you issue a long query or when MySQL Server must return a large result row.
The small default value of the variable is a precaution to catch incorrect packets between the client and server and
also to ensure that you do not run out of memory by using large packets accidentally.</p>
<p>You can also get strange problems with large packets if you are using large BLOB values but have not given MySQL Sever
access to enough memory to handle the query. If you suspect this is the case, try adding <code>ulimit -d 256000</code> to the
beginning of the <code>mysqld_safe</code> script and restarting MySQL Server.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="large-packet">Large Packet<a href="https://chatbot.qubitpi.org/blog/mysql-troubleshooting#large-packet" class="hash-link" aria-label="Direct link to Large Packet" title="Direct link to Large Packet">​</a></h3>
<p>A communication packet is</p>
<ul>
<li>a single SQL statement sent to the MySQL server, or</li>
<li>a single row that is sent to the client, or</li>
<li>a binary log event sent from a master replication server to a slave.</li>
</ul>
<p>When a MySQL client or the MySQL server receives a packet bigger than <code>max_allowed_packet</code> bytes, it issues an
<code>ER_NET_PACKET_TOO_LARGE</code> error and closes the connection.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="illegal-mix-of-collations-latin1_swedish_ciimplicit-and-utf8mb4_general_cicoercible-for-operation-">Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8mb4_general_ci,COERCIBLE) for operation '='<a href="https://chatbot.qubitpi.org/blog/mysql-troubleshooting#illegal-mix-of-collations-latin1_swedish_ciimplicit-and-utf8mb4_general_cicoercible-for-operation-" class="hash-link" aria-label="Direct link to Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8mb4_general_ci,COERCIBLE) for operation '='" title="Direct link to Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8mb4_general_ci,COERCIBLE) for operation '='">​</a></h2>
<p>Resolving this issues requires understanding of <a href="https://www.mysqltutorial.org/mysql-collation/" target="_blank" rel="noopener noreferrer">MySQL collations</a>.</p>
<p>Go to the database related to the issue and issue the following command</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> show variables WHERE variable_name like </span><span class="token string" style="color:#e3116c">"col%"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Variable_name        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Value             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> collation_connection </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> collation_database   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> utf8_general_ci   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> collation_server     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_general_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> rows </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.02</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You see the database collation is for UTF8.</p>
<p>When you see the error "Illegal mix of collations...", it is complaining about a table whose collation is inconsistent
with what's configured for "collation_database" shown above.</p>
<p>Go to the table that throws the "Illegal mix of collations..." error and issue the following command:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> SELECT table_schema, table_name, column_name, character_set_name, collation_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> FROM information_schema.columns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> WHERE table_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'xyz'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ORDER BY table_schema, table_name,ordinal_position</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------+------------+--------------+--------------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> table_schema      </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> table_name </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> column_name  </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> character_set_name </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> collation_name    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------+------------+--------------+--------------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">id</span><span class="token plain">           </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL              </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> name         </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> gender       </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL              </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> title        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> department   </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> salary       </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL              </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> email        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> phone        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> age          </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> NULL              </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> birthday     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.               </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> xyz        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> location     </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1             </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> latin1_swedish_ci </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-------------------+------------+--------------+--------------------+-------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> rows </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.39</span><span class="token plain"> sec</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You see the table collation has "latin1_swedish_ci", which is not UTF8. You will alter this table so that is aligns with
database level config like this:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> xyz </span><span class="token keyword" style="color:#00009f">CONVERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CHARACTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> utf8 </span><span class="token keyword" style="color:#00009f">COLLATE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'utf8_bin'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In case you would like to alter database level collation, you could try something like</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* Set collations of system variables */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> @</span><span class="token variable" style="color:#36acaa">@collation_connection</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UTF8MB4_GENERAL_CI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> @</span><span class="token variable" style="color:#36acaa">@collation_database</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UTF8MB4_GENERAL_CI</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> @</span><span class="token variable" style="color:#36acaa">@collation_server</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UTF8MB4_GENERAL_CI</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>MySQL</category>
            <category>Database</category>
            <category>JPA</category>
        </item>
        <item>
            <title><![CDATA[MySQL Security]]></title>
            <link>https://chatbot.qubitpi.org/blog/mysql-security</link>
            <guid>https://chatbot.qubitpi.org/blog/mysql-security</guid>
            <pubDate>Tue, 08 Sep 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p>Despite being one of the best-known vulnerabilities, SQL Injection continues to rank on the top spot of the infamous
<a href="https://owasp.org/www-project-top-ten/" target="_blank" rel="noopener noreferrer">OWASP Top 10's list</a> - now part of the more general Injection class.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="how-applications-become-vulnerable-to-sql-injection">How Applications Become Vulnerable to SQL Injection<a href="https://chatbot.qubitpi.org/blog/mysql-security#how-applications-become-vulnerable-to-sql-injection" class="hash-link" aria-label="Direct link to How Applications Become Vulnerable to SQL Injection" title="Direct link to How Applications Become Vulnerable to SQL Injection">​</a></h2>
<p>Injection attacks work because, for many applications, the only way to execute a given computation is to dynamically
generate code that is in turn run by another system or component. If in the process of generating this code we use
untrusted data without proper sanitization, we leave an open door for hackers to exploit</p>
<p>This statement may sound a bit abstract, so let's take look at how this happens in practice with an example:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">AccountDTO</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">unsafeFindAccountsByCustomerId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> customerId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">SQLException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// UNSAFE !!! DON'T DO THIS !!!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> sql </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"select "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"customer_id,acc_number,branch_id,balance "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"from Accounts where customer_id = '"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> customerId</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Connection</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ResultSet</span><span class="token plain"> rs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The problem with this code is obvious: we've put the customerId‘s value into the query with no validation at all.
Nothing bad will happen if we're sure that this value will only come from trusted sources, but can we?</p>
<p>Let's imagine that this function is used in a REST API implementation for an account resource. Exploiting this code is
trivial: all we have to do is to send a value that, when concatenated with the fixed part of the query, change its
intended behavior:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-X</span><span class="token plain"> GET </span><span class="token string" style="color:#e3116c">'http://localhost:8080/accounts?customerId=abc%27%20or%20%271%27=%271'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Assuming the customerId parameter value goes unchecked until it reaches our function, here's what we'd receive:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">abc</span><span class="token string" style="color:#e3116c">' or '</span><span class="token number" style="color:#36acaa">1</span><span class="token string" style="color:#e3116c">' = '</span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When we join this value with the fixed part, we get the final SQL statement that will be executed:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    customer_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    acc_number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    branch_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    balance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    customerId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'abc'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">OR</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'1'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'1'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Probably not what we've wanted...</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="im-using-jpa-i-should-be-safe-no">I'm using JPA. I Should be Safe. No<a href="https://chatbot.qubitpi.org/blog/mysql-security#im-using-jpa-i-should-be-safe-no" class="hash-link" aria-label="Direct link to I'm using JPA. I Should be Safe. No" title="Direct link to I'm using JPA. I Should be Safe. No">​</a></h2>
<p>This is a common misconception. JPA and other ORMs relieves us from creating hand-coded SQL statements, but they won't
prevent us from writing vulnerable code.</p>
<p>Let's see how the JPA version of the previous example looks:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">AccountDTO</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">unsafeJpaFindAccountsByCustomerId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> customerId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> jql </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"from Account where customerId = '"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> customerId </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"'"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TypedQuery</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Account</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> q </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">jql</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Account</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getResultList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">toAccountDTO</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">collect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Collectors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The same issue we've pointed before is also present here: we're using unvalidated input to create a JPA query, so we're
exposed to the same kind of exploit here.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="prevention-techniques">Prevention Techniques<a href="https://chatbot.qubitpi.org/blog/mysql-security#prevention-techniques" class="hash-link" aria-label="Direct link to Prevention Techniques" title="Direct link to Prevention Techniques">​</a></h3>
<p>Now that we know what a SQL injection is, let's see how we can protect our code from this kind of attack. Here we're
focusing on a couple of very effective techniques available in Java and other JVM languages, but similar concepts are
available to other environments, such as PHP, .Net, Ruby and so forth.</p>
<p>For those looking for a complete list of available techniques, including database-specific ones, the
<a href="https://www.owasp.org/" target="_blank" rel="noopener noreferrer">OWASP</a> Project maintains a
<a href="https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html" target="_blank" rel="noopener noreferrer">SQL Injection Prevention Cheat Sheet</a>,
which is a good place to learn more about the subject.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="parameterized-queries">Parameterized Queries<a href="https://chatbot.qubitpi.org/blog/mysql-security#parameterized-queries" class="hash-link" aria-label="Direct link to Parameterized Queries" title="Direct link to Parameterized Queries">​</a></h4>
<p>This technique consists of using prepared statements with the question mark placeholder ("<code>?</code>") in our queries
whenever we need to insert a user-supplied value. This is very effective and, unless there's a bug in the JDBC driver's
implementation, immune to exploits.</p>
<p>Let's rewrite our example function to use this technique:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">AccountDTO</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">safeFindAccountsByCustomerId</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> customerId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> sql </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"select "</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"customer_id, acc_number, branch_id, balance from Accounts"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"where customer_id = ?"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Connection</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">PreparedStatement</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prepareStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> customerId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">ResultSet</span><span class="token plain"> rs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sql</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// omitted - process rows and return an account list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we've used the <code>prepareStatement()</code> method available in the <code>Connection</code> instance to get a
<code>PreparedStatement</code>. This interface extends the regular <code>Statement</code> interface with several methods that allow us to
safely insert user-supplied values in a query before executing it. For JPA, we have a similar feature:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> jql </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"FROM Account WHERE customerId = :customerId"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">TypedQuery</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Account</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> em</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">jql</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Account</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"customerId"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> customerId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Execute query and return mapped results (omitted)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>As a bonus, this approach usually results in a better performing query, since most databases can cache the query plan
associated with a prepared statement.</strong></p>
<p>Please note that this approach only works for placeholders used as values. For instance, we can't use placeholders to
dynamically change the name of a table:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// This WILL NOT WORK !!!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">PreparedStatement</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prepareStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"select count(*) from ?"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tableName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here, JPA won't help either:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// This WILL NOT WORK EITHER !!!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">entityManager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"SELECT COUNT(*) FROM :tableName"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Long</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"tableName"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tableName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSingleResult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In both cases, we'll get a runtime error.</p>
<p>The main reason behind this is the very nature of a prepared statement: database servers use them to cache the query
plan required to pull the result set, which usually is the same for any possible value. This is not true for table names
and other constructs available in the SQL language such as columns used in an order by clause.</p>]]></content:encoded>
            <category>MySQL</category>
            <category>Database</category>
            <category>Security</category>
            <category>JPA</category>
        </item>
        <item>
            <title><![CDATA[How to Deal with Polymorphism in MySQL?]]></title>
            <link>https://chatbot.qubitpi.org/blog/mysql-polymorphism</link>
            <guid>https://chatbot.qubitpi.org/blog/mysql-polymorphism</guid>
            <pubDate>Sun, 06 Sep 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="single-table-inheritance"><a href="http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html" target="_blank" rel="noopener noreferrer">Single Table Inheritance</a><a href="https://chatbot.qubitpi.org/blog/mysql-polymorphism#single-table-inheritance" class="hash-link" aria-label="Direct link to single-table-inheritance" title="Direct link to single-table-inheritance">​</a></h2>
<p><strong>Represents an inheritance hierarchy of classes as a single table that has columns for all the fields of the various
classes</strong>.</p>
<p>For a full description see <em>Patterns of Enterprise Application Architecture - Martin Fowler (The Addison-Wesley
Signature Series)</em> page 278</p>
<p><img loading="lazy" alt="Single Table Inheritance Example Diagram" src="data:image/png;base64,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" class="img_kerH"></p>
<p>Relational databases don't support inheritance, so when mapping from objects to databases we have to consider how to
represent our nice inheritance structures in relational tables. When mapping to a relational database, we try to
minimize the joins that can quickly mount up when processing an inheritance structure in multiple tables. Single Table
Inheritance maps all fields of all classes of an inheritance structure into a single table.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="class-table-inheritance"><a href="http://www.martinfowler.com/eaaCatalog/classTableInheritance.html" target="_blank" rel="noopener noreferrer">Class Table Inheritance</a><a href="https://chatbot.qubitpi.org/blog/mysql-polymorphism#class-table-inheritance" class="hash-link" aria-label="Direct link to class-table-inheritance" title="Direct link to class-table-inheritance">​</a></h2>
<p><strong>Represents an inheritance hierarchy of classes with one table for each class</strong>.</p>
<p>For a full description see <em>Patterns of Enterprise Application Architecture - Martin Fowler (The Addison-Wesley
Signature Series)</em> page 285</p>
<p><img loading="lazy" alt="Single Table Inheritance Example Diagram" src="data:image/png;base64,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" class="img_kerH"></p>
<p>A very visible aspect of the object-relational mismatch is the fact that relational databases don't support inheritance.
You want database structures that map clearly to the objects and allow links anywhere in the inheritance structure.
Class Table Inheritance supports this by using one database table per class in the inheritance structure.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="concrete-table-inheritance"><a href="http://www.martinfowler.com/eaaCatalog/concreteTableInheritance.html" target="_blank" rel="noopener noreferrer">Concrete Table Inheritance</a><a href="https://chatbot.qubitpi.org/blog/mysql-polymorphism#concrete-table-inheritance" class="hash-link" aria-label="Direct link to concrete-table-inheritance" title="Direct link to concrete-table-inheritance">​</a></h2>
<p><strong>Represents an inheritance hierarchy of classes with one table per concrete class in the hierarchy</strong>.</p>
<p>For a full description see <em>Patterns of Enterprise Application Architecture - Martin Fowler (The Addison-Wesley
Signature Series)</em> page 293</p>
<p><img loading="lazy" alt="Concrete Table Inheritance" src="data:image/png;base64,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" class="img_kerH"></p>
<p>As any object purist will tell you, relational databases don't support inheritance - a fact that complicates
object-relational mapping. Thinking of tables from an object instance point of view, a sensible route is to take each
object in memory and map it to a single database row. This implies Concrete Table Inheritance, where there's a table for
each concrete class in the inheritance hierarchy.</p>]]></content:encoded>
            <category>MySQL</category>
            <category>Database</category>
            <category>JPA</category>
        </item>
        <item>
            <title><![CDATA[Programming MySQL]]></title>
            <link>https://chatbot.qubitpi.org/blog/mysql-programming</link>
            <guid>https://chatbot.qubitpi.org/blog/mysql-programming</guid>
            <pubDate>Sat, 29 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="shell">Shell<a href="https://chatbot.qubitpi.org/blog/mysql-programming#shell" class="hash-link" aria-label="Direct link to Shell" title="Direct link to Shell">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="adjust-display-settings-of-mysql-command-line">Adjust Display Settings of MySQL Command Line<a href="https://chatbot.qubitpi.org/blog/mysql-programming#adjust-display-settings-of-mysql-command-line" class="hash-link" aria-label="Direct link to Adjust Display Settings of MySQL Command Line" title="Direct link to Adjust Display Settings of MySQL Command Line">​</a></h3>
<p>You may notice that command line result of mysql is not displaying results properly. Some columns of table are in the
first line and some are in the second line. Output is also broken into two rows. How do we adjust these settings so that
it properly display results?</p>
<p>We can use the <code>\G</code> command (instead of the <code>;</code>) at the end of our SQL queries:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> \G</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It will display your table in row form instead of column form.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="connecting-to-mysql-from-the-command-line">Connecting to MySQL From the Command Line<a href="https://chatbot.qubitpi.org/blog/mysql-programming#connecting-to-mysql-from-the-command-line" class="hash-link" aria-label="Direct link to Connecting to MySQL From the Command Line" title="Direct link to Connecting to MySQL From the Command Line">​</a></h3>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> USERNAME </span><span class="token parameter variable" style="color:#36acaa">-pPASSWORD</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> HOSTNAMEORIP DATABASENAME --default-character-set</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">utf8</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>--default-character-set=utf8</code> option allows the UTF-8 character to be displayed properly in console</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="how-to-pass-password-to-mysql-command-line-in-a-more-secure-way">How to Pass Password to mysql Command Line in a More "Secure" Way<a href="https://chatbot.qubitpi.org/blog/mysql-programming#how-to-pass-password-to-mysql-command-line-in-a-more-secure-way" class="hash-link" aria-label="Direct link to How to Pass Password to mysql Command Line in a More &quot;Secure&quot; Way" title="Direct link to How to Pass Password to mysql Command Line in a More &quot;Secure&quot; Way">​</a></h4>
<p><a href="https://chatbot.qubitpi.org/blog/mysql-programming#connecting-to-mysql-from-the-command-line">Putting passwords on the command line</a> is in-secure, because anyone with
access to <code>/proc</code> can trivially read them as long as the program is running.</p>
<p>The safest way would be to create a new <a href="https://dev.mysql.com/doc/refman/8.0/en/option-file-options.html" target="_blank" rel="noopener noreferrer">config file</a>
and pass it to <code>mysql</code> using either the <code>--defaults-file=</code> or <code>--defaults-extra-file=</code> command line option. The
difference between the two is that the latter is read in addition to the default config files whereas with the former
only the one file passed as the argument is used. The additional configuration file should contain something similar to:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">[client]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user=foo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">password=P@55w0rd</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-caution admonition_dFHE alert alert--warning"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_sFKi"><p>Make sure that you secure this file.</p></div></div>
<p>Then run:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql --defaults-extra-file</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path to the new config file</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --default-character-set</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">utf8 </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> HOSTNAMEORIP DATABASENAME</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="find-databases-containing-a-particular-table-in-mysql">Find databases containing a particular table in MySQL<a href="https://chatbot.qubitpi.org/blog/mysql-programming#find-databases-containing-a-particular-table-in-mysql" class="hash-link" aria-label="Direct link to Find databases containing a particular table in MySQL" title="Direct link to Find databases containing a particular table in MySQL">​</a></h3>
<p>Let's say you would like to locate a table whose name is <code>foo</code>:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    table_schema </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> database_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    table_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'BASE TABLE'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'foo'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    table_schema</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="search-for-a-column-from-database">Search for a Column from Database<a href="https://chatbot.qubitpi.org/blog/mysql-programming#search-for-a-column-from-database" class="hash-link" aria-label="Direct link to Search for a Column from Database" title="Direct link to Search for a Column from Database">​</a></h3>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    table_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    column_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">columns</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    column_name </span><span class="token operator" style="color:#393A34">like</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%SearchedColumn%'</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="save-mysql-query-output-to-file">Save MySQL Query Output to File<a href="https://chatbot.qubitpi.org/blog/mysql-programming#save-mysql-query-output-to-file" class="hash-link" aria-label="Direct link to Save MySQL Query Output to File" title="Direct link to Save MySQL Query Output to File">​</a></h3>
<p>Try executing the query from the your local client and redirect the output to a local file destination:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token parameter variable" style="color:#36acaa">-user</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-pass</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"select cols from table where cols not null"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /tmp/output</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="conditional-insert"><a href="https://stackoverflow.com/a/913929" target="_blank" rel="noopener noreferrer">Conditional Insert</a><a href="https://chatbot.qubitpi.org/blog/mysql-programming#conditional-insert" class="hash-link" aria-label="Direct link to conditional-insert" title="Direct link to conditional-insert">​</a></h3>
<p>Suppose we have <code>x_table</code> with <code>columns (instance, user, item)</code> where instance ID is unique. I want to insert a new row
only if the user already does not have a given item.</p>
<p>For example trying to insert <code>instance=919191 user=123 item=456</code></p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">Insert</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">into</span><span class="token plain"> x_table </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">values</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">919191</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">456</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ONLY </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> there are </span><span class="token keyword" style="color:#00009f">no</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> item</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">456</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If your DBMS does not impose limitations on which table you select from when you execute an insert, try:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> x_table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instance</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">919191</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> dual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> x_table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                               </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">456</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this, <code>dual</code> is a table with one row only (found originally in Oracle, now in mysql too). The logic is that the
<code>SELECT</code> statement generates a single row of data with the required values, but only when the values are not already
found.</p>
<p>Alternatively, look at the MERGE statement.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="implement-paging">Implement Paging<a href="https://chatbot.qubitpi.org/blog/mysql-programming#implement-paging" class="hash-link" aria-label="Direct link to Implement Paging" title="Direct link to Implement Paging">​</a></h3>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/select.html#id1026131" target="_blank" rel="noopener noreferrer">From the MySQL documentation</a>:</p>
<p>The <code>LIMIT</code> clause can be used to constrain the number of rows returned by the <code>SELECT</code> statement. <code>LIMIT</code> takes one or
two numeric arguments, which must both be non-negative integer constants, with these exceptions:</p>
<ul>
<li>Within prepared statements, LIMIT parameters can be specified using ? placeholder markers.</li>
<li>Within stored programs, LIMIT parameters can be specified using integer-valued routine parameters or local variables.</li>
</ul>
<p>With two arguments, the first argument specifies the offset of the first row to return, and the second specifies the
maximum number of rows to return. The offset of the initial row is 0 (not 1):</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> tbl </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Retrieve rows 6-15</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With one argument, the value specifies the number of rows to return from the beginning of the result set:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> tbl </span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># Retrieve first 5 rows</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="listing-tables-by-size">Listing Tables by Size<a href="https://chatbot.qubitpi.org/blog/mysql-programming#listing-tables-by-size" class="hash-link" aria-label="Direct link to Listing Tables by Size" title="Direct link to Listing Tables by Size">​</a></h3>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    table_name </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">Table</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_length </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> index_length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">Size in MB</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"$DB_NAME"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">Size in MB</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where <code>$DB_NAME</code> is the name of the database whose tables are to be listed</p>
<p><a href="https://stackoverflow.com/a/9620273" target="_blank" rel="noopener noreferrer">To check the size of a single table (<code>$TABLE_NAME</code>) of a database (<code>$DB_NAME</code>)</a>:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    table_name </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">Table</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">round</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_length </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> index_length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">Size in MB</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_schema </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"$DB_NAME"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> table_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"$TABLE_NAME"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">Size in MB</span><span class="token identifier punctuation" style="color:#393A34">`</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="scripting">Scripting<a href="https://chatbot.qubitpi.org/blog/mysql-programming#scripting" class="hash-link" aria-label="Direct link to Scripting" title="Direct link to Scripting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="calling-sql-script-file-from-other-sql-script-file">Calling SQL Script File from Other SQL Script File<a href="https://chatbot.qubitpi.org/blog/mysql-programming#calling-sql-script-file-from-other-sql-script-file" class="hash-link" aria-label="Direct link to Calling SQL Script File from Other SQL Script File" title="Direct link to Calling SQL Script File from Other SQL Script File">​</a></h3>
<p>You can use <code>source</code> command. So your script will be something like:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> your_db</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source script</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">sql</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source script</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">s2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">sql</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- so on, so forth</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="user-defined-variables">User-Defined Variables<a href="https://chatbot.qubitpi.org/blog/mysql-programming#user-defined-variables" class="hash-link" aria-label="Direct link to User-Defined Variables" title="Direct link to User-Defined Variables">​</a></h3>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/user-variables.html" target="_blank" rel="noopener noreferrer">User Defined Varibles</a> can be used across scrips like
this:</p>
<p><code>main.sql</code>:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- User-Defined Variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@tom_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@jack_id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source add_data_to_person_table</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">sql</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>person.sql</code>:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Person </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">VALUES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@tom_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TOME"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@jack_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"JACK"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="mysql-functions">MySQL Functions<a href="https://chatbot.qubitpi.org/blog/mysql-programming#mysql-functions" class="hash-link" aria-label="Direct link to MySQL Functions" title="Direct link to MySQL Functions">​</a></h2>
<p>MySQL has many built-in functions.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="if">IF<a href="https://chatbot.qubitpi.org/blog/mysql-programming#if" class="hash-link" aria-label="Direct link to IF" title="Direct link to IF">​</a></h3>
<p>Returns a value if a condition is <code>TRUE</code>, or another value if a condition is <code>FALSE</code>. For example, Return "YES" if the
condition is TRUE, or "NO" if the condition is FALSE:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"YES"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"NO"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This function is useful if we would like to replicate a table and update some column values on the flight:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTO</span><span class="token plain"> some_table</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">column1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> column2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> column3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> column1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> column2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">column3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Blue"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Dark Blue"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Dark Color"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> some_table</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the example above, all rows with column value "Blue" will have "Dark Blue" as the new value for that column; all
other rows will be changed to "Dark Color".</p>
<p>We could have richer modifications, other than 2-branch modification, using
<a href="https://www.w3schools.com/mysql/func_mysql_case.asp" target="_blank" rel="noopener noreferrer">CASE</a></p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="migration">Migration<a href="https://chatbot.qubitpi.org/blog/mysql-programming#migration" class="hash-link" aria-label="Direct link to Migration" title="Direct link to Migration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="copying-tables-or-databases-from-one-mysql-server-to-another">Copying Tables or Databases from One MySQL Server to Another<a href="https://chatbot.qubitpi.org/blog/mysql-programming#copying-tables-or-databases-from-one-mysql-server-to-another" class="hash-link" aria-label="Direct link to Copying Tables or Databases from One MySQL Server to Another" title="Direct link to Copying Tables or Databases from One MySQL Server to Another">​</a></h3>
<p>We could use <code>mysqldump</code> to export the data from one MySQL instance and <code>mysql</code> command line utility to load it into
another.</p>
<p>Suppose we have a <code>person</code> table in "prod" database hosted in "192.168.1.100" and we would like to migrate this table
data into a dev instance ("192.168.1.101") for testing purposes.</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysqldump --column-statistics</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> prod-user-name </span><span class="token parameter variable" style="color:#36acaa">-pprodPassword</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.1.100 prod-database person --default-character-set</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">utf8 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> dump.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> dev-user-name </span><span class="token parameter variable" style="color:#36acaa">-pdevPwssword</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-h</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.1.101 </span><span class="token parameter variable" style="color:#36acaa">--port</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">32228</span><span class="token plain"> dev-database </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> dump.sql</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_dFHE alert alert--secondary"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_sFKi"><p>The <code>--column-statistics=0</code> is set so that it prevents runtime error of</p><div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">mysqldump: Couldn</span><span class="token string" style="color:#e3116c">'t execute. Unknown table '</span><span class="token plain">column_statistics' </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> information_schema</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>]]></content:encoded>
            <category>MySQL</category>
            <category>Database</category>
            <category>JPA</category>
        </item>
        <item>
            <title><![CDATA[Programming Oracle Database]]></title>
            <link>https://chatbot.qubitpi.org/blog/oracle-programming</link>
            <guid>https://chatbot.qubitpi.org/blog/oracle-programming</guid>
            <pubDate>Fri, 28 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="shell">Shell<a href="https://chatbot.qubitpi.org/blog/oracle-programming#shell" class="hash-link" aria-label="Direct link to Shell" title="Direct link to Shell">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="run-oracle-sql-script-and-exit-afterwards">Run Oracle SQL script and Exit Afterwards<a href="https://chatbot.qubitpi.org/blog/oracle-programming#run-oracle-sql-script-and-exit-afterwards" class="hash-link" aria-label="Direct link to Run Oracle SQL script and Exit Afterwards" title="Direct link to Run Oracle SQL script and Exit Afterwards">​</a></h3>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> sqlplus </span><span class="token parameter variable" style="color:#36acaa">-S</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$user</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$pwd</span><span class="token plain">@//</span><span class="token variable" style="color:#36acaa">$server</span><span class="token builtin class-name">:</span><span class="token variable" style="color:#36acaa">$port</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$service_name</span><span class="token plain"> @script.sql</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>One example value of <code>$service_name</code> could be "ORCL". Note that there is a <code>@</code> symble preceding the script
path(<code>script.sql</code>)</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="shell-commands">Shell Commands<a href="https://chatbot.qubitpi.org/blog/oracle-programming#shell-commands" class="hash-link" aria-label="Direct link to Shell Commands" title="Direct link to Shell Commands">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="display-utf8">Display UTF8<a href="https://chatbot.qubitpi.org/blog/oracle-programming#display-utf8" class="hash-link" aria-label="Direct link to Display UTF8" title="Direct link to Display UTF8">​</a></h4>
<p>Whenever a client program (such as <code>sqlplus</code>) connects to the database, it tells the database what characterset it is
using. Some environments may have a very restricted characterset and use something like US7ASCII so they don't get
anything that can upset them.</p>
<p>As you can see in the following example, what is output by a query is dependent on the NLS_LANG setting of a client.</p>
<div class="language-shell codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-shell codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">C:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">set </span><span class="token assign-left variable" style="color:#36acaa">NLS_LANG</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">.US7ASCII</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">sqlplus ???/???@xe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SQL*Plus: Release </span><span class="token number" style="color:#36acaa">10.2</span><span class="token plain">.0.1.0 - Production on Wed Nov </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> 09:31:32 </span><span class="token number" style="color:#36acaa">2010</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> chr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">193</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from dual</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> quit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">set </span><span class="token assign-left variable" style="color:#36acaa">NLS_LANG</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">.AL32UTF8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C:</span><span class="token punctuation" style="color:#393A34">\</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">sqlplus ???/???@xe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SQL*Plus: Release </span><span class="token number" style="color:#36acaa">10.2</span><span class="token plain">.0.1.0 - Production on Wed Nov </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> 09:31:49 </span><span class="token number" style="color:#36acaa">2010</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> chr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">193</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from dual</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┴</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If your client is Windows, then try the above. If it is a unix(ish) platform, try</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">NLS_LANG</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">.AL32UTF8</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="spool-sql-query-output-to-html-format-in-sqlplus-oracle">Spool SQL Query Output to HTML format in SQLPLUS Oracle<a href="https://chatbot.qubitpi.org/blog/oracle-programming#spool-sql-query-output-to-html-format-in-sqlplus-oracle" class="hash-link" aria-label="Direct link to Spool SQL Query Output to HTML format in SQLPLUS Oracle" title="Direct link to Spool SQL Query Output to HTML format in SQLPLUS Oracle">​</a></h4>
<p>In SQLPLUS:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> pages </span><span class="token number" style="color:#36acaa">500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> MARKUP HTML </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spool report1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">Select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> hr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">departments </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> department_id </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spool </span><span class="token keyword" style="color:#00009f">off</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This would generate a "report1.html" file in the directory where SQLPLUS command was invoked and the file looks like
the following:</p>
<p><img loading="lazy" alt="Error loading sqlplus-html.png" src="data:image/png;base64,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" class="img_kerH"></p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="show-tables">Show Tables<a href="https://chatbot.qubitpi.org/blog/oracle-programming#show-tables" class="hash-link" aria-label="Direct link to Show Tables" title="Direct link to Show Tables">​</a></h4>
<p>If you have worked with MySQL, you may be familiar with the <code>SHOW TABLES</code> command that lists all tables in a database:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SHOW</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLES</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Unfortunately, Oracle <strong>does not</strong> directly support the <code>SHOW TABLES</code> command. However, you can list all tables in a
database by querying from various data dictionary views.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="show-tables-owned-by-the-current-user">Show Tables Owned By the Current User<a href="https://chatbot.qubitpi.org/blog/oracle-programming#show-tables-owned-by-the-current-user" class="hash-link" aria-label="Direct link to Show Tables Owned By the Current User" title="Direct link to Show Tables Owned By the Current User">​</a></h5>
<p>To show tables <strong>owned</strong> by the current user, you query from the <code>user_tables</code> view.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> table_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> user_tables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> table_name</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that this view does not show the <code>OWNER</code> column. Also, the user_tables table <strong>does not</strong> contain the other tables
that are <strong>accessible</strong> by the current user.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="show-tables-accessible-by-the-current-user">Show Tables Accessible By the Current User<a href="https://chatbot.qubitpi.org/blog/oracle-programming#show-tables-accessible-by-the-current-user" class="hash-link" aria-label="Direct link to Show Tables Accessible By the Current User" title="Direct link to Show Tables Accessible By the Current User">​</a></h5>
<p>To show all tables that are currently <strong>accessible</strong> by the current user, regardless of owners, you query from the
<code>all_tables</code> view:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> table_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> all_tables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> table_name</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to show all tables of a specific owner, you add the <code>OWNER</code> column in the <code>WHERE</code> clause as shown in the
following query:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> all_tables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> OWNER </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'OT'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> table_name</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="show-all-tables-in-the-oracle-database">Show All Tables in the Oracle Database<a href="https://chatbot.qubitpi.org/blog/oracle-programming#show-all-tables-in-the-oracle-database" class="hash-link" aria-label="Direct link to Show All Tables in the Oracle Database" title="Direct link to Show All Tables in the Oracle Database">​</a></h5>
<p>To show <strong>all tables</strong> in the entire Oracle Database, you query from the <code>dba_tables</code> view as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> table_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> dba_tables</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You will get the following error message if you don't have access to the <code>dba_tables</code> view:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">ORA-00942: table or view does not exist</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this case, you should request your database administrator to grant your account either privileges on the <code>dba_tables</code>
view, or <code>SELECT ANY DICTIONARY</code> privilege, or <code>SELECT_CATALOG_ROLE</code> privilege.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="comparing-dates"><a href="https://stackoverflow.com/a/34061999" target="_blank" rel="noopener noreferrer">Comparing Dates</a><a href="https://chatbot.qubitpi.org/blog/oracle-programming#comparing-dates" class="hash-link" aria-label="Direct link to comparing-dates" title="Direct link to comparing-dates">​</a></h4>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">Select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">From</span><span class="token plain"> Employee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">Where</span><span class="token plain"> to_char</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">employee_date_hired</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'YYYMMMDDD'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">19940620</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">Select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">From</span><span class="token plain"> Employee</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">employee_date_hired </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> TO_DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'20-06-1994'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'DD-MM-YYYY'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="show-last-command-run"><a href="https://stackoverflow.com/a/51193086" target="_blank" rel="noopener noreferrer">Show Last Command Run</a><a href="https://chatbot.qubitpi.org/blog/oracle-programming#show-last-command-run" class="hash-link" aria-label="Direct link to show-last-command-run" title="Direct link to show-last-command-run">​</a></h4>
<p>The 'l' command will show the last run command</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> l</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token number" style="color:#36acaa">1</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> owner</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> dba_tables </span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> owner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To get more than that, turn on history</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> history </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SQL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> history</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> dual</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> sysdate </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> dual</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token number" style="color:#36acaa">3</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">show</span><span class="token plain"> history</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="get-a-list-of-all-tables"><a href="https://stackoverflow.com/a/205746" target="_blank" rel="noopener noreferrer">Get A List of All Tables</a><a href="https://chatbot.qubitpi.org/blog/oracle-programming#get-a-list-of-all-tables" class="hash-link" aria-label="Direct link to get-a-list-of-all-tables" title="Direct link to get-a-list-of-all-tables">​</a></h4>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> OWNER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DBA_TABLES</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is assuming that you have access to the <code>DBA_TABLES</code> data dictionary view. If you do not have those privileges but
need them, you can request that the DBA explicitly grants you privileges on that table, or, that the DBA grants you the
<code>SELECT ANY DICTIONARY</code> privilege or the <code>SELECT_CATALOG_ROLE</code> role (either of which would allow you to query any data
dictionary table). Of course, you may want to exclude certain schemas like <code>SYS</code> and <code>SYSTEM</code> which have large numbers
of Oracle tables that you probably don't care about.</p>
<p>Alternatively, if you do not have access to <code>DBA_TABLES</code>, you can see all the tables that your account has access to
through the <code>ALL_TABLES</code> view:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> OWNER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TABLE_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> ALL_TABLES</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Although, that may be a subset of the tables available in the database (<code>ALL_TABLES</code> shows you the information for all
the tables that your user has been granted access to).</p>
<p>If you are only concerned with the tables that you own, not those that you have access to, you could use <code>USER_TABLES</code>:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TABLE_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> USER_TABLES</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since <code>USER_TABLES</code> only has information about the tables that you own, it does not have an <code>OWNER</code> column - the owner,
by definition, is you.</p>
<p>Oracle also has a number of legacy data dictionary views -- <code>TAB</code>, <code>DICT</code>, <code>TABS</code>, and <code>CAT</code> for example -- that could
be used. In general, I would not suggest using these legacy views unless you absolutely need to backport your scripts to
Oracle 6. Oracle has not changed these views in a long time so they often have problems with newer types of objects. For
example, the <code>TAB</code> and <code>CAT</code> views both show information about tables that are in the user's recycle bin while the
<code>[DBA|ALL|USER]_TABLES</code> views all filter those out. <code>CAT</code> also shows information about materialized view logs with a
<code>TABLE_TYPE</code> of "TABLE" which is unlikely to be what you really want. <code>DICT</code> combines tables and synonyms and doesn't
tell you who owns the object.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="scripting">Scripting<a href="https://chatbot.qubitpi.org/blog/oracle-programming#scripting" class="hash-link" aria-label="Direct link to Scripting" title="Direct link to Scripting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="whenever-sqlerror">WHENEVER SQLERROR<a href="https://chatbot.qubitpi.org/blog/oracle-programming#whenever-sqlerror" class="hash-link" aria-label="Direct link to WHENEVER SQLERROR" title="Direct link to WHENEVER SQLERROR">​</a></h3>
<p>When you have a script that has syntax errors, the script won't exit with error while executing the line that has the
syntax error. We would like to, instead, halt the execution at that point for the script tuning purposes. To do that
<code>WHENEVER SQLERROR</code> could be used.</p>
<p>The commands in the following script cause SQL*Plus to exit and return the SQL error code if the SQL UPDATE command
fails:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">WHENEVER SQLERROR </span><span class="token keyword" style="color:#00009f">EXIT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SQL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SQLCODE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> EMP_DETAILS_VIEW </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> SALARY </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> SALARY</span><span class="token operator" style="color:#393A34">*</span><span class="token number" style="color:#36acaa">1.1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="drop-all-user-tables">Drop All User Tables<a href="https://chatbot.qubitpi.org/blog/oracle-programming#drop-all-user-tables" class="hash-link" aria-label="Direct link to Drop All User Tables" title="Direct link to Drop All User Tables">​</a></h3>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">BEGIN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> cur_rec </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> object_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> object_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> user_objects</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> object_type </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'TABLE'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'VIEW'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'MATERIALIZED VIEW'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'PACKAGE'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'PROCEDURE'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'FUNCTION'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'SEQUENCE'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'SYNONYM'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token string" style="color:#e3116c">'PACKAGE BODY'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                             </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">LOOP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">BEGIN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">IF</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">object_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'TABLE'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">THEN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">EXECUTE</span><span class="token plain"> IMMEDIATE </span><span class="token string" style="color:#e3116c">'DROP '</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">object_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">' "'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">object_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'" CASCADE CONSTRAINTS'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">ELSE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">EXECUTE</span><span class="token plain"> IMMEDIATE </span><span class="token string" style="color:#e3116c">'DROP '</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">object_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">' "'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">object_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                              </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'"'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">END</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">IF</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      EXCEPTION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">WHEN</span><span class="token plain"> OTHERS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">THEN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            DBMS_OUTPUT</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">put_line </span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'FAILED: DROP '</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">object_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">' "'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">object_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                  </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'"'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">END</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">END</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LOOP</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">FOR</span><span class="token plain"> cur_rec </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> all_synonyms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> table_owner </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> dual</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">LOOP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">BEGIN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">EXECUTE</span><span class="token plain"> IMMEDIATE </span><span class="token string" style="color:#e3116c">'DROP PUBLIC SYNONYM '</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> cur_rec</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">synonym_name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">END</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">END</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LOOP</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">END</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">/</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="troubleshooting">Troubleshooting<a href="https://chatbot.qubitpi.org/blog/oracle-programming#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="double-quotes-vs-single-quotes">Double Quotes v.s. Single Quotes<a href="https://chatbot.qubitpi.org/blog/oracle-programming#double-quotes-vs-single-quotes" class="hash-link" aria-label="Direct link to Double Quotes v.s. Single Quotes" title="Direct link to Double Quotes v.s. Single Quotes">​</a></h3>
<p>Unlike MySQL which makes double and single quotes interchangeable.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="oracle-ora-00955-name-is-already-used-by-an-existing-object">Oracle: ORA-00955: name is already used by an existing object<a href="https://chatbot.qubitpi.org/blog/oracle-programming#oracle-ora-00955-name-is-already-used-by-an-existing-object" class="hash-link" aria-label="Direct link to Oracle: ORA-00955: name is already used by an existing object" title="Direct link to Oracle: ORA-00955: name is already used by an existing object">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="cause-1">Cause 1<a href="https://chatbot.qubitpi.org/blog/oracle-programming#cause-1" class="hash-link" aria-label="Direct link to Cause 1" title="Direct link to Cause 1">​</a></h4>
<p>You probably have another object with the same name, for example, 'person'</p>
<p>You can find it by quering <code>person</code>:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> user_objects </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> object_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'person'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then drop it (replace <code>TYPE_OF_OBJECT</code> by the type of the object from the above query):</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> TYPE_OF_OBJECT person</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="cause-2">Cause 2<a href="https://chatbot.qubitpi.org/blog/oracle-programming#cause-2" class="hash-link" aria-label="Direct link to Cause 2" title="Direct link to Cause 2">​</a></h4>
<p>You simply have a stupid <code>/</code> at the end of your statement, such as</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> some_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">person </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">/</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note the <code>/</code> at the end of the query statement</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="ora-02261-such-unique-or-primary-key-already-exists-in-the-table">ORA-02261: such unique or primary key already exists in the table<a href="https://chatbot.qubitpi.org/blog/oracle-programming#ora-02261-such-unique-or-primary-key-already-exists-in-the-table" class="hash-link" aria-label="Direct link to ORA-02261: such unique or primary key already exists in the table" title="Direct link to ORA-02261: such unique or primary key already exists in the table">​</a></h3>
<p>You simply have a stupid <code>/</code> at the end of your statement, such as</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> BRANCH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BRA_CODE NUMBER </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BRA_NAME </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BRA_ADDR </span><span class="token keyword" style="color:#00009f">VARCHAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> CITY_ID NUMBER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> BRANCH </span><span class="token keyword" style="color:#00009f">ADD</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CONSTRAINT</span><span class="token plain"> UNIQUE_BRANCH_NAME </span><span class="token keyword" style="color:#00009f">UNIQUE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BRA_NAME</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note the <code>/</code> at the end of the query statement</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="change-varchar-column-to-clob">Change varchar Column to CLOB<a href="https://chatbot.qubitpi.org/blog/oracle-programming#change-varchar-column-to-clob" class="hash-link" aria-label="Direct link to Change varchar Column to CLOB" title="Direct link to Change varchar Column to CLOB">​</a></h3>
<p>Given that the operation of moving from a varchar column to a CLOB is disallowed, the most straightforward way would be
to create a new column and move the data from the old column to the new column:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> atable </span><span class="token keyword" style="color:#00009f">ADD</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tmpdetails  CLOB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">UPDATE</span><span class="token plain"> atable </span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> tmpdetails</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">details</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">COMMIT</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> atable </span><span class="token keyword" style="color:#00009f">DROP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COLUMN</span><span class="token plain"> details</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> atable </span><span class="token keyword" style="color:#00009f">RENAME</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">COLUMN</span><span class="token plain"> tmpdetails </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> details</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Oracle</category>
            <category>Database</category>
            <category>JPA</category>
        </item>
        <item>
            <title><![CDATA[Reading and Writing Avro Files from the Command Line]]></title>
            <link>https://chatbot.qubitpi.org/blog/read-avro-command-line</link>
            <guid>https://chatbot.qubitpi.org/blog/read-avro-command-line</guid>
            <pubDate>Mon, 17 Aug 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<p><a href="http://avro.apache.org/" target="_blank" rel="noopener noreferrer">Apache Avro</a> is becoming one of the most popular data serialization formats nowadays, and this
holds true particularly for Hadoop-based big data platforms because tools like Pig, Hive and of course Hadoop itself
natively support reading and writing data in Avro format. Many users seem to enjoy Avro but I have heard many complaints
about not being able to conveniently read or write Avro files with command line tools – "Avro is nice, but why do I have
to write Java or Python code just to quickly see what's in a binary Avro file, or discover at least its Avro schema?"</p>
<p>To those users it comes as a surprise that Avro actually ships with exactly such command line tools but apparently they
are not prominently advertised or documented as such. In this short article I will show a few hands-on examples on how
to read, write, compress and convert data from and to binary Avro using Avro Tools 1.11.3.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="what-we-want-to-do">What We Want To Do<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#what-we-want-to-do" class="hash-link" aria-label="Direct link to What We Want To Do" title="Direct link to What We Want To Do">​</a></h2>
<p>Here is an overview of what we want to do:</p>
<ul>
<li>We will start with an example Avro schema and a corresponding data file in plain-text JSON format.</li>
<li>We will use Avro Tools to convert the JSON file into binary Avro, without and with compression (Snappy), and from
binary Avro back to JSON.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="getting-avro-tools">Getting Avro Tools<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#getting-avro-tools" class="hash-link" aria-label="Direct link to Getting Avro Tools" title="Direct link to Getting Avro Tools">​</a></h2>
<p>You can get a copy of the latest stable Avro Tools jar file from the
<a href="http://avro.apache.org/releases.html#Download" target="_blank" rel="noopener noreferrer">Avro Releases</a> page. The actual file is in the <code>java</code> subdirectory of a
given Avro release version. Here is a direct link to
<a href="https://dlcdn.apache.org/avro/avro-1.11.3/java/avro-tools-1.11.3.jar" target="_blank" rel="noopener noreferrer">avro-tools-1.11.3.jar</a> (11 MB) on the US Apache
mirror site.</p>
<p>Save <code>avro-tools-1.11.3.jar</code> to a directory of your choice. I will use <code>~/avro-tools-1.11.3.jar</code> for the examples shown
below.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="tools-included-in-avro-tools">Tools Included in Avro Tools<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#tools-included-in-avro-tools" class="hash-link" aria-label="Direct link to Tools Included in Avro Tools" title="Direct link to Tools Included in Avro Tools">​</a></h2>
<p>Just run Avro Tools without any parameters to see what's included:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.snip</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available tools:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      compile  Generates Java code </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> the given schema.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       concat  Concatenates avro files without re-compressing.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   fragtojson  Renders a binary-encoded Avro datum as JSON.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     fromjson  Reads JSON records and writes an Avro data file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     fromtext  Imports a text </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> into an avro data file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      getmeta  Prints out the metadata of an Avro data file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getschema  Prints out schema of an Avro data file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          idl  Generates a JSON schema from an Avro IDL </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       induce  Induce schema/protocol from Java class/interface via reflection.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   jsontofrag  Renders a JSON-encoded Avro datum as binary.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      recodec  Alters the codec of a data file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rpcprotocol  Output the protocol of a RPC </span><span class="token function" style="color:#d73a49">service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   rpcreceive  Opens an RPC Server and listens </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> one message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      rpcsend  Sends a single RPC message.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       tether  Run a tethered mapreduce job.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       tojson  Dumps an Avro data </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> as JSON, one record per line.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       totext  Converts an Avro data </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> to a text file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  trevni_meta  Dumps a Trevni file's metadata as JSON.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trevni_random  Create a Trevni </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> filled with random instances of a schema.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trevni_tojson  Dumps a Trevni </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> as JSON.</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Likewise run any particular tool without parameters to see its usage/help output. For example, here is the help of the
<code>fromjson</code> tool:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar fromjson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Expected </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> arg: input_file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Option                                  Description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------                                  -----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--codec</span><span class="token plain">                                 Compression codec </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default: null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token parameter variable" style="color:#36acaa">--schema</span><span class="token plain">                                Schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--schema-file                           Schema File</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that most of the tools write to <code>STDOUT</code>, so normally you would like to pipe their output to a file via the Bash
<code>&gt;</code> redirection operator (particularly when working with large files).</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="example-data">Example Data<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#example-data" class="hash-link" aria-label="Direct link to Example Data" title="Direct link to Example Data">​</a></h2>
<p>In the next sections I will use the following example data to demonstrate Avro Tools. You can also download the example
files <a href="https://github.com/miguno/avro-cli-examples" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="avro-schema">Avro Schema<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#avro-schema" class="hash-link" aria-label="Direct link to Avro Schema" title="Direct link to Avro Schema">​</a></h3>
<p>The schema below defines a tuple of <code>(username, tweet, timestamp)</code> as the format of our example data records</p>
<p>File: <code>twitter.avsc</code>:</p>
<div class="language-json codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-json codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"record"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"twitter_schema"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"namespace"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"com.miguno.avro"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"fields"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"username"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"doc"</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Name of the user account on Twitter.com"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"tweet"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"string"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"doc"</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"The content of the user's Twitter message"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"name"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"timestamp"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"type"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"long"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"doc"</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Unix epoch time in seconds"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">"doc:"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"A basic schema for storing Twitter messages"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="data-records-in-json-format">Data records in JSON format<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#data-records-in-json-format" class="hash-link" aria-label="Direct link to Data records in JSON format" title="Direct link to Data records in JSON format">​</a></h3>
<p>Here is some corresponding example data with two records that follow the schema defined in the previous section. We
store this data in the file <code>twitter.json</code>.</p>
<p>Example data in <code>twitter.json</code> in JSON format:</p>
<div class="language-json codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-json codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"username"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"miguno"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"tweet"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Rock: Nerf paper, scissors is fine."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"timestamp"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1366150681</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">"username"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"BlizzardCS"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"tweet"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"Works as intended.  Terran is IMBA."</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">"timestamp"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1366154481</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="converting-to-and-from-binary-avro">Converting To and From Binary Avro<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#converting-to-and-from-binary-avro" class="hash-link" aria-label="Direct link to Converting To and From Binary Avro" title="Direct link to Converting To and From Binary Avro">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="json-to-binary-avro">JSON to Binary Avro<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#json-to-binary-avro" class="hash-link" aria-label="Direct link to JSON to Binary Avro" title="Direct link to JSON to Binary Avro">​</a></h3>
<p>Without compression:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar fromjson --schema-file twitter.avsc twitter.json </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> twitter.avro</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With Snappy compression:</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar fromjson </span><span class="token parameter variable" style="color:#36acaa">--codec</span><span class="token plain"> snappy --schema-file twitter.avsc twitter.json </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> twitter.snappy.avro</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="binary-avro-to-json">Binary Avro to JSON<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#binary-avro-to-json" class="hash-link" aria-label="Direct link to Binary Avro to JSON" title="Direct link to Binary Avro to JSON">​</a></h3>
<p>The same command will work on both uncompressed and compressed data.</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar tojson twitter.avro </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> twitter.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar tojson twitter.snappy.avro </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> twitter.json</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="retrieve-avro-schema-from-binary-avro">Retrieve Avro Schema from Binary Avro<a href="https://chatbot.qubitpi.org/blog/read-avro-command-line#retrieve-avro-schema-from-binary-avro" class="hash-link" aria-label="Direct link to Retrieve Avro Schema from Binary Avro" title="Direct link to Retrieve Avro Schema from Binary Avro">​</a></h3>
<p>The same command will work on both uncompressed and compressed data.</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar getschema twitter.avro </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> twitter.avsc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">java</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-jar</span><span class="token plain"> ~/avro-tools-1.11.3.jar getschema twitter.snappy.avro </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> twitter.avsc</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>Java</category>
            <category>Apache Avro</category>
        </item>
        <item>
            <title><![CDATA[Refer to Environment Variables in POM]]></title>
            <link>https://chatbot.qubitpi.org/blog/env-var-in-pom</link>
            <guid>https://chatbot.qubitpi.org/blog/env-var-in-pom</guid>
            <pubDate>Fri, 23 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="environment-variables">Environment Variables<a href="https://chatbot.qubitpi.org/blog/env-var-in-pom#environment-variables" class="hash-link" aria-label="Direct link to Environment Variables" title="Direct link to Environment Variables">​</a></h2>
<p>To refer to environment variables from the pom.xml, we can use the <code>${env.VARIABLE_NAME}</code> syntax.</p>
<p>For instance, let's use it to externalize the Java version in the build process:</p>
<div class="language-xml codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-xml codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.maven.plugins</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">maven-compiler-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.8.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${env.JAVA_VERSION}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">source</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">${env.JAVA_VERSION}</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We should remember to pass the Java version information via environment variables. If we fail to do so, then we won't be
able to build the project.</p>
<p>To run the Maven goals or phases against such a build file, we should first export the environment variable. For
instance</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">JAVA_VERSION</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">17</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mvn clean package</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In order to provide a default when the <code>JAVA_VERSION</code> environment variable is missing we can use a Maven profile:</p>
<div class="language-xml codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-xml codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">default-java</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">id</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">activation</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">!env.JAVA_VERSION</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">name</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">property</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">activation</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">org.apache.maven.plugins</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">maven-compiler-plugin</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">3.8.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">source</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">1.8</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">target</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">configuration</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugins</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">build</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profile</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">profiles</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As shown above, we're creating a profile and making it active only if the <code>JAVA_VERSION</code> environment variable is missing
(<code>!env.JAVA_VERSION</code> part). If that happens, then this new plugin definition will override the existing one.</p>]]></content:encoded>
            <category>Java</category>
            <category>Maven</category>
        </item>
        <item>
            <title><![CDATA[Java System Properties & Environment Variables API's]]></title>
            <link>https://chatbot.qubitpi.org/blog/java-env-properties</link>
            <guid>https://chatbot.qubitpi.org/blog/java-env-properties</guid>
            <pubDate>Wed, 07 Aug 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_L1yj" id="system-properties">System Properties<a href="https://chatbot.qubitpi.org/blog/java-env-properties#system-properties" class="hash-link" aria-label="Direct link to System Properties" title="Direct link to System Properties">​</a></h2>
<p>The Java platform uses a <strong>Properties</strong> object to provide information about the local system and configuration, and we
call it <strong>System Properties</strong>.</p>
<p>System Properties include information such as the current user, the current version of the Java runtime, and the file
path-name separator.</p>
<p>In the below code, we use <code>System.getProperty("log_dir")</code> to read the value of the property <code>log_dir</code>. We also make use
of the default value parameter, so if the property doesn't exist, getProperty returns <code>/tmp/log</code>:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> log_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"log_dir"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">"/tmp/log"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To update System Properties at runtime, we use the <strong>System.setProperty</strong> method:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setProperty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"log_dir"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/tmp/log"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can pass our own properties or configurations values to the application using the <strong>propertyName</strong> command line
argument:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">java </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">jar jarName </span><span class="token operator" style="color:#393A34">-</span><span class="token class-name">DpropertyName</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">java </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">jar app </span><span class="token operator" style="color:#393A34">-</span><span class="token class-name">Dfoo</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"bar"</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="environment-variables">Environment Variables<a href="https://chatbot.qubitpi.org/blog/java-env-properties#environment-variables" class="hash-link" aria-label="Direct link to Environment Variables" title="Direct link to Environment Variables">​</a></h2>
<p>Environment Variables are key/value pairs like Properties. Many Operating Systems use Environment Variables to allow
<em>configuration information to be passed into applications</em>.</p>
<p>The way to set an environment variable differs from one operating system to another. For example, on Linux, we use</p>
<div class="language-bash codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-bash codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">MY_ENV_VAR</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">foo</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>When creating a process, it inherits a clone environment of its parent process by default</em>.</p>
<p>To obtain a single environment variable programmatically, we can call <strong>getenv</strong> with the variable name:</p>
<div class="language-java codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-java codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> log_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"log_dir"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-caution admonition_dFHE alert alert--warning"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_sFKi"><p>getenv() returns a <em>read-only</em> Map. Trying to add values to the map throws an UnsupportedOperationException.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="the-differences">The Differences<a href="https://chatbot.qubitpi.org/blog/java-env-properties#the-differences" class="hash-link" aria-label="Direct link to The Differences" title="Direct link to The Differences">​</a></h2>
<p>Although both are essentially maps that provide String values for String keys, let's look at a few differences:</p>
<ol>
<li>We can update Properties at runtime, while Environment Variables are an immutable copy of the Operating System's
variables.</li>
<li>Properties are contained only within the Java platform, while Environment Variables are global at the Operating
System level, available to all applications running on the same machine.</li>
<li>Properties must exist when packaging the application, but we can create Environment Variables on the Operating
System at almost any point.</li>
</ol>]]></content:encoded>
            <category>Java</category>
        </item>
    </channel>
</rss>