<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">JQPL | ChatbotWS</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://chatbot.qubitpi.org/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://chatbot.qubitpi.org/img/logo.png"><meta data-rh="true" property="og:url" content="https://chatbot.qubitpi.org/blog/jpql"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="JQPL | ChatbotWS"><meta data-rh="true" name="description" content="[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)"><meta data-rh="true" property="og:description" content="[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-10-28T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/QubitPi"><meta data-rh="true" property="article:tag" content="Java,JQPL"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://chatbot.qubitpi.org/blog/jpql"><link data-rh="true" rel="alternate" href="https://chatbot.qubitpi.org/blog/jpql" hreflang="en"><link data-rh="true" rel="alternate" href="https://chatbot.qubitpi.org/blog/jpql" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9U0KDRI80N-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="ChatbotWS RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="ChatbotWS Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="ChatbotWS" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.8e9c077b.css">
<script src="/assets/js/runtime~main.6a6a3bc8.js" defer="defer"></script>
<script src="/assets/js/main.6ec340ef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_C00H" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="ChatbotWS Logo" class="themedComponent_aX2O themedComponent--light_JaL3"><img src="/img/logo.svg" alt="ChatbotWS Logo" class="themedComponent_aX2O themedComponent--dark_PJtI"></div><b class="navbar__title text--truncate">ChatbotWS</b></a><a class="navbar__item navbar__link" href="/docs/intro">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://chatbot.qubitpi.org/apidocs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ANth"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/QubitPi/chatbot-ws" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ANth"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_xYhg colorModeToggle_XpEf"><button class="clean-btn toggleButton__BAK toggleButtonDisabled_LpFA" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_IpxZ"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_NKFj"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_rIZm"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_La2C"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_LgOa thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_NHdC margin-bottom--md">Recent posts</div><ul class="sidebarItemList_FzW1 clean-list"><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/restassured-json">(RestAssured) Match JSON Ignoring Order</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/provider">Provider v.s. @Provider</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/bearer-authentication">Bearer Authentication</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/java-optional">Tired of Null Pointer Exceptions? Consider Using Java SE 8&#x27;s &quot;Optional&quot;</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/happy-path">Happy Path</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/defensive-copy">Defensive Copy</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/weak-references">Understanding Weak References</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/querydsl">Querydsl - A Type-Safe Query Writer for Java</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/java-stream">Java 8 Stream</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/put-vs-post">PUT v.s. POST</a></li><li class="sidebarItem_nTKB"><a aria-current="page" class="sidebarItemLink_sZwG sidebarItemLinkActive_DRd_" href="/blog/jpql">JQPL</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/java-ee">What is Java EE</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/mysql-troubleshooting">MySQL Troubleshooting</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/mysql-security">MySQL Security</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/mysql-polymorphism">How to Deal with Polymorphism in MySQL?</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/mysql-programming">Programming MySQL</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/oracle-programming">Programming Oracle Database</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/read-avro-command-line">Reading and Writing Avro Files from the Command Line</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/env-var-in-pom">Refer to Environment Variables in POM</a></li><li class="sidebarItem_nTKB"><a class="sidebarItemLink_sZwG" href="/blog/java-env-properties">Java System Properties &amp; Environment Variables API&#x27;s</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="[//]: # (Copyright 2025 Jiaqi Liu. All rights reserved.)"><header><h1 class="title_lnpi" itemprop="headline">JQPL</h1><div class="container_QTz4 margin-vert--md"><time datetime="2020-10-28T00:00:00.000Z" itemprop="datePublished">October 28, 2020</time> · <!-- -->42 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_fC6X"><div class="avatar margin-bottom--sm"><a href="https://github.com/QubitPi" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/16126939?v=4" alt="Jack" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/QubitPi" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jack</span></a></div><small class="avatar__subtitle" itemprop="description">Maintainer of ChatbotWS</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>The Java Persistence Query Language (JPQL) is a platform-independent object-oriented query language defined by JPA.
JPQL is similar to SQL, but operates on objects, attributes and relationships instead of tables and columns.</p>
<p>The Java Persistence query language (JPQL) is used to define searches against persistent entities independent of the
mechanism used to store those entities. As such, JPQL is &quot;portable&quot;, and not constrained to any particular data store
(<a href="#avoid-grouping-by-subset-of-columns-from-select">although in some cases it does get constrained</a>). The Java
Persistence query language is an extension of the Enterprise JavaBeans query language, EJB QL, adding operations
such as bulk deletes and updates, join operations, aggregates, projections, and subqueries. Furthermore, JPQL
queries can be declared statically in metadata, or can be dynamically built in code</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="caveats">Caveats<a href="#caveats" class="hash-link" aria-label="Direct link to Caveats" title="Direct link to Caveats">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="avoid-grouping-by-subset-of-columns-from-select">Avoid GROUPing BY subset of columns from SELECT<a href="#avoid-grouping-by-subset-of-columns-from-select" class="hash-link" aria-label="Direct link to Avoid GROUPing BY subset of columns from SELECT" title="Direct link to Avoid GROUPing BY subset of columns from SELECT">​</a></h3>
<p><strong>JPQL is not portable when it comes to <code>GROUP BY</code> clause.</strong>. Let&#x27;s say we have query that reads everyone who has
lived in Washington. It is common in the U.S., however, that cities share common name. For example, there are more
than 80 locations whose names are &quot;Washington&quot;. When a person move from <em>Washington, Maine</em> to <em>Washington,
Massachusetts</em>, the <code>Address</code> table will have 2 rows with the same combinations of <code>ssn</code> and <code>city</code> columns.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> person</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Person person </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> Address address </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">city </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">city</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> address</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">city </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Washington&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> person</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ssn</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://stackoverflow.com/questions/30700316/sql-not-a-group-by-expression-with-oraclesql-and-innerquery-error" target="_blank" rel="noopener noreferrer">This query will work for MySQL but not Oracle</a>,
because Oracle requires</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-statement-types">JPQL Statement Types<a href="#jpql-statement-types" class="hash-link" aria-label="Direct link to JPQL Statement Types" title="Direct link to JPQL Statement Types">​</a></h2>
<p>A JPQL statement may be</p>
<ol>
<li>a <code>SELECT</code> statement, or</li>
<li>an <code>UPDATE</code> statement,</li>
<li>or a <code>DELETE</code> statement</li>
</ol>
<p>In BNF syntax, a query language statement is defined as:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">QL_statement ::= select_statement | update_statement | delete_statement</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-select-statement">JPQL Select Statement<a href="#jpql-select-statement" class="hash-link" aria-label="Direct link to JPQL Select Statement" title="Direct link to JPQL Select Statement">​</a></h3>
<p>A select statement is a string which consists of the following clauses:</p>
<ul>
<li>a <code>SELECT</code> clause, which determines the type of the objects or values to be selected;</li>
<li>a <code>FROM</code> clause, which provides declarations that designate the domain to which the expressions specified in the
other</li>
<li>clauses of the query apply;</li>
<li>an <em>optional</em> <code>WHERE</code> clause, which may be used to restrict the results that are returned by the query;</li>
<li>an <em>optional</em> <code>GROUP BY</code> clause, which allows query results to be aggregated in terms of groups;</li>
<li>an <em>optional</em> <code>HAVING</code> clause, which allows filtering over aggregated groups;</li>
<li>an <em>optional</em> <code>ORDER BY</code> clause, which may be used to order the results that are returned by the query.</li>
</ul>
<p>In BNF syntax, a select statement is defined as:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">select_statement ::= select_clause from_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-update-and-delete-statements">JPQL Update and Delete Statements<a href="#jpql-update-and-delete-statements" class="hash-link" aria-label="Direct link to JPQL Update and Delete Statements" title="Direct link to JPQL Update and Delete Statements">​</a></h3>
<p>Update and delete statements provide bulk operations over sets of entities. In BNF syntax, these operations are
defined as:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">update_statement ::= update_clause [where_clause]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete_statement ::= delete_clause [where_clause</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-abstract-schema-types-and-query-domains">JPQL Abstract Schema Types and Query Domains<a href="#jpql-abstract-schema-types-and-query-domains" class="hash-link" aria-label="Direct link to JPQL Abstract Schema Types and Query Domains" title="Direct link to JPQL Abstract Schema Types and Query Domains">​</a></h2>
<p>The Java Persistence query language is a typed language, and every expression has a type. The type of an expression
is derived from the structure of the expression, the abstract schema types of the identification variable
declarations, the types to which the persistent fields and relationships evaluate, and the types of literals. The
abstract schema type of an entity is derived from the entity class and the metadata information provided by Java
language annotations or in the XML descriptor.</p>
<p>Informally, the abstract schema type of an entity can be characterized as follows:</p>
<ul>
<li>For every persistent field or get accessor method (for a persistent property) of the entity class, there is a
field (&quot;state-field&quot;) whose abstract schema type corresponds to that of the field or the result type of the
accessor method.</li>
<li>For every persistent relationship field or get accessor method (for a persistent relationship property) of the
entity class, there is a field (&quot;association-field&quot;) whose type is the abstract schema type of the related entity
(or, if the relationship is a one-to-many or many-to-many, a collection of such). Abstract schema types are
specific to the query language data model. <strong>The persistence provider is not required to implement or otherwise
materialize an abstract schema type</strong>. The domain of a query consists of the abstract schema types of all
entities that are defined in the same persistence unit. The domain of a query may be restricted by the
navigability of the relationships of the entity on which it is based. The association-fields of an entity&#x27;s
abstract schema type determine navigability. Using the association-fields and their values, a query can select
related entities and use their abstract schema types in the query.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-entity-naming">JPQL Entity Naming<a href="#jpql-entity-naming" class="hash-link" aria-label="Direct link to JPQL Entity Naming" title="Direct link to JPQL Entity Naming">​</a></h3>
<p>Entities are designated in query strings by their entity names. The entity name is defined by the name element of
the Entity annotation (or the entity-name XML descriptor element), and defaults to the unqualified name of the
entity class. Entity names are scoped within the persistence unit and must be unique within the persistence unit.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-schema-example">JPQL Schema Example<a href="#jpql-schema-example" class="hash-link" aria-label="Direct link to JPQL Schema Example" title="Direct link to JPQL Schema Example">​</a></h3>
<p>This example assumes that the application developer provides several entity classes representing magazines,
publishers, authors, and articles. The abstract schema types for these entities are <code>Magazine</code>, <code>Publisher</code>,
<code>Author</code>, and <code>Article</code>.</p>
<p>The entity <code>Publisher</code> has a one-to-many relationships with <code>Magazine</code>. There is also a one-to-many relationship
between <code>Magazine</code> and <code>Article</code>. The entity <code>Article</code> is related to <code>Author</code> in a one-to-one relationship.</p>
<p>Queries to select magazines can be defined by navigating over the association-fields and state-fields defined by
<code>Magazine</code> and <code>Author</code>. A query to find all magazines that have unpublished articles is as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> art</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">published </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">FALSE</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The next query navigates over the association-field authors of the abstract schema type <code>Magazine</code> to find
articles, and uses the state-field <code>published</code> of <code>Article</code> to select those magazines that have at least one
article that is
published. Although predefined reserved identifiers, such as <code>DISTINCT</code>, <code>FROM</code>, <code>AS</code>, <code>JOIN</code>, <code>WHERE</code>, and <code>FALSE</code>,
appear in upper case in this example, predefined reserved identifiers are case insensitive. The <code>SELECT</code> clause of this
example designates the return type of this query to be of type <code>Magazine</code>. Because the same persistence unit defines the
abstract persistence schemas of the related entities, the developer can also specify a query over <code>articles</code> that
utilizes the abstract schema type for products, and hence the state-fields and association-fields of both the abstract
schema types <code>Magazine</code> and <code>Author</code>. For example, if the abstract schema type <code>Author</code> has a state-field named
<code>firstName</code>, a query over <code>articles</code> can be specified using this state-field. Such a query might be to find all
magazines that have articles authored by someone with the first name &quot;John&quot;.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author auth </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;John&#x27;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Because <code>Magazine</code> is related to <code>Author</code> by means of the relationships between <code>Magazine</code> and <code>Article</code> and between
<code>Article</code> and <code>Author</code>, navigation using the association-fields authors and product is used to express the query.
This query is specified by using the abstract schema name <code>Magazine</code>, which designates the abstract schema type
over which the query ranges. The basis for the navigation is provided by the association-fields authors and product
of the abstract schema types <code>Magazine</code> and <code>Article</code> respectively.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-from-clause-and-navigational-declarations">JPQL FROM Clause and Navigational Declarations<a href="#jpql-from-clause-and-navigational-declarations" class="hash-link" aria-label="Direct link to JPQL FROM Clause and Navigational Declarations" title="Direct link to JPQL FROM Clause and Navigational Declarations">​</a></h2>
<p>The <code>FROM</code> clause of a query defines the domain of the query by declaring identification variables. An
identification variable is an identifier declared in the <code>FROM</code> clause of a query. The domain of the query may be
constrained by path expressions. Identification variables designate instances of a particular entity abstract
schema type. The <code>FROM</code> clause can contain multiple identification variable declarations separated by a comma (,):</p>
<ul>
<li><code>from_clause ::= FROM identification_variable_declaration {, {identification_variable_declaration | collection_member_declaration}}*</code></li>
<li><code>identification_variable_declaration ::= range_variable_declaration { join | fetch_join }*</code></li>
<li><code>range_variable_declaration ::= abstract_schema_name [AS] identification_variable</code></li>
<li><code>join ::= join_spec join_association_path_expression [AS] identification_variable</code></li>
<li><code>fetch_join ::= join_spec FETCH join_association_path_expression</code></li>
<li><code>join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression</code></li>
<li><code>join_spec ::= [ LEFT [OUTER] | INNER ] JOIN</code></li>
<li><code>collection_member_declaration ::= IN (collection_valued_path_expression) [AS] identification_variable</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-from-identifiers">JPQL FROM Identifiers<a href="#jpql-from-identifiers" class="hash-link" aria-label="Direct link to JPQL FROM Identifiers" title="Direct link to JPQL FROM Identifiers">​</a></h3>
<p>An identifier is a character sequence of unlimited length. <strong>The character sequence must begin with a Java
identifier</strong> start character, and all other characters must be Java identifier part characters. An identifier start
character is any character for which the method <code>Character.isJavaIdentifierStart</code> returns <code>true</code>. This includes the
underscore (<code>_</code>) character and the dollar-sign (<code>$</code>) character. An identifier-part character is any character for
which the method <code>Character.isJavaIdentifierPart</code> returns true . The question-mark (<code>?</code>) character is reserved for
use by the Java Persistence query language. The following are reserved identifiers:</p>
<ul>
<li><code>SELECT</code></li>
<li><code>FROM</code></li>
<li><code>WHERE</code></li>
<li><code>UPDATE</code></li>
<li><code>DELETE</code></li>
<li><code>JOIN</code></li>
<li><code>OUTER</code></li>
<li><code>INNER</code></li>
<li><code>LEFT</code></li>
<li><code>GROUP</code></li>
<li><code>BY</code></li>
<li><code>HAVING</code></li>
<li><code>FETCH</code></li>
<li><code>DISTINCT</code></li>
<li><code>OBJECT</code></li>
<li><code>NULL</code></li>
<li><code>TRUE</code></li>
<li><code>FALSE</code></li>
<li><code>NOT</code></li>
<li><code>AND</code></li>
<li><code>OR</code></li>
<li><code>BETWEEN</code></li>
<li><code>LIKE</code></li>
<li><code>IN</code></li>
<li><code>AS</code></li>
<li><code>UNKNOWN</code></li>
<li><code>EMPTY</code></li>
<li><code>MEMBER</code></li>
<li><code>OF</code></li>
<li><code>IS</code></li>
<li><code>AVG</code></li>
<li><code>MAX</code></li>
<li><code>MIN</code></li>
<li><code>SUM</code></li>
<li><code>COUNT</code></li>
<li><code>ORDER</code></li>
<li><code>BY</code></li>
<li><code>ASC</code></li>
<li><code>DESC</code></li>
<li><code>MOD</code></li>
<li><code>UPPER</code></li>
<li><code>LOWER</code></li>
<li><code>TRIM</code></li>
<li><code>POSITION</code></li>
<li><code>CHARACTER_LENGTH</code></li>
<li><code>CHAR_LENGTH</code></li>
<li><code>BIT_LENGTH</code></li>
<li><code>CURRENT_TIME</code></li>
<li><code>CURRENT_DATE</code></li>
<li><code>CURRENT_TIMESTAMP</code></li>
<li><code>NEW</code></li>
<li><code>EXISTS</code></li>
<li><code>ALL</code></li>
<li><code>ANY</code></li>
<li><code>SOME</code></li>
</ul>
<p>Reserved identifiers are case insensitive. Reserved identifiers must not be used as identification variables. It is
recommended that other SQL reserved words not be used as identification variables in queries, as they may be used as
reserved identifiers in future releases of the specification.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-identification-variables">JPQL Identification Variables<a href="#jpql-identification-variables" class="hash-link" aria-label="Direct link to JPQL Identification Variables" title="Direct link to JPQL Identification Variables">​</a></h3>
<p>An identification variable is a valid identifier declared in the <code>FROM</code> clause of a query. All identification
variables must be declared in the <code>FROM</code> clause. Identification variables cannot be declared in other clauses. An
identification variable must not be a reserved identifier or have the same name as any entity in the same
persistence unit: Identification variables are case insensitive. An identification variable evaluates to a value of
the type of the expression used in declaring the variable. For example, consider the previous query:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">firstName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;John&#x27;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the <code>FROM</code> clause declaration <code>mag.articles art</code>, the identification variable <code>art</code> evaluates to any <code>Article</code>
value directly reachable from <code>Magazine</code>. The association-field articles is a collection of instances of the
abstract schema type <code>Article</code> and the identification variable <code>art</code> refers to an element of this collection. The
type of <code>auth</code> is the abstract schema type of <code>Author</code>. An identification variable ranges over the abstract schema
type of an entity. An identification variable designates an instance of an entity abstract schema type or an
element of a collection of entity abstract schema type instances. Identification variables are existentially
quantified in a query. An identification variable always designates a reference to a single value. It is declared
in one of three ways:</p>
<ol>
<li>in a range variable declaration,</li>
<li>in a join clause, or</li>
<li>in a collection member declaration.</li>
</ol>
<p>The identification variable declarations are evaluated from left to right in the <code>FROM</code> clause, and an
identification variable declaration can use the result of a preceding identification variable declaration of the
query string.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-range-declarations">JPQL Range Declarations<a href="#jpql-range-declarations" class="hash-link" aria-label="Direct link to JPQL Range Declarations" title="Direct link to JPQL Range Declarations">​</a></h3>
<p>The syntax for declaring an identification variable as a range variable is similar to that of SQL; optionally, it
uses the <code>AS</code> keyword:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">range_variable_declaration ::= abstract_schema_name [AS] identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Range variable declarations allow the developer to designate a &quot;root&quot; for objects which may not be reachable by
navigation. In order to select values by comparing more than one instance of an entity abstract schema type, more
than one identification variable ranging over the abstract schema type is needed in the <code>FROM</code> clause.</p>
<p>The following query returns magazines whose prices are greater than the price of magazines published by &quot;Adventure&quot;
publishers. This example illustrates the use of two different identification variables in the <code>FROM</code> clause, both
of the abstract schema type <code>Magazine</code>. The <code>SELECT</code> clause of this query determines that it is the magazines with
prices greater than those of &quot;Adventure&quot; publisher&#x27;s that are returned.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Magazine mag2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> mag2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> mag2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publisher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Adventure&#x27;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-path-expressions">JPQL Path Expressions<a href="#jpql-path-expressions" class="hash-link" aria-label="Direct link to JPQL Path Expressions" title="Direct link to JPQL Path Expressions">​</a></h3>
<p><strong>An identification variable followed by the navigation operator (.) and a state-field or association-field is a
path expression.</strong> The type of the path expression is the type computed as the result of navigation; that is, the
type of the state-field or association-field to which the expression navigates. Depending on navigability, a path
expression that leads to an association-field may be further composed. Path expressions can be composed from other
path expressions if the original path expression evaluates to a single-valued type (not a collection) corresponding
to an association-field. <strong>Path-expression navigability is composed using &quot;inner join&quot; semantics. That is, if the
value of a non-terminal association-field in the path expression is <code>null</code>, the path is considered to have no
value, and does not participate in the determination of the result</strong>. The syntax for single-valued path expressions
and collection-valued path expressions is as follows:</p>
<ul>
<li><code>single_valued_path_expression ::= state_field_path_expression | single_valued_association_path_expression</code></li>
<li><code>state_field_path_expression ::= {identification_variable | single_valued_association_path_expression}.state_field</code></li>
<li><code>single_valued_association_path_expression ::= identification_variable.{single_valued_association_field.}*single_valued_association_field</code></li>
<li><code>collection_valued_path_expression ::= identification_variable.{single_valued_association_field.}*collection_valued_association_field</code></li>
<li><code>state_field ::= {embedded_class_state_field.}*simple_state_field</code></li>
</ul>
<p>A single_valued_association_field is designated by the name of an association-field in a one-to-one or many-to-one
relationship. The type of a single_valued_association_field and thus a single_valued_association_path_expression is
the abstract schema type of the related entity. A collection_valued_association_field is designated by the name of
an association-field in a one-to-many or a many-to-many relationship. The type of a
<code>collection_valued_association_field</code> is a collection of values of the abstract schema type of the related entity.
An <code>embedded_class_state_field</code> is designated by the name of an entity-state field that corresponds to an embedded
class. Navigation to a related entity results in a value of the related entity&#x27;s abstract schema type.</p>
<p>The evaluation of a path expression terminating in a state-field results in the abstract schema type corresponding
to the Java type designated by the state-field. It is syntactically illegal to compose a path expression from a path
expression that evaluates to a collection. For example, if <code>mag</code> designates <code>Magazine</code>, the path expression
<code>mag.articles.author</code> is illegal since navigation to authors results in a collection. This case should produce an
error when the query string is verified. To handle such a navigation, an identification variable must be declared
in the <code>FROM</code> clause to range over the elements of the articles collection. Another path expression must be used to
navigate over each such element in the <code>WHERE</code> clause of the query, as in the following query, which returns all
authors that have any articles in any magazines:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine </span><span class="token keyword" style="color:#00009f">AS</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> art</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-joins">JPQL Joins<a href="#jpql-joins" class="hash-link" aria-label="Direct link to JPQL Joins" title="Direct link to JPQL Joins">​</a></h3>
<p><strong>An <a href="https://www.w3schools.com/sql/sql_join_inner.asp" target="_blank" rel="noopener noreferrer">inner join</a> may be implicitly specified by the use of a
artesian product in the FROM clause and a join condition in the <code>WHERE</code> clause</strong>.</p>
<p>The syntax for explicit join operations is as follows:</p>
<ul>
<li><code>join ::= join_spec join_association_path_expression [AS] identification_variable</code></li>
<li><code>fetch_join ::= join_spec FETCH join_association_path_expression</code></li>
<li><code>join_spec ::= [ LEFT [OUTER] | INNER ] JOIN</code></li>
<li><code>join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression</code></li>
</ul>
<p>The following inner and outer join operation types are supported.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-inner-joins-relationship-joins">JPQL Inner Joins (Relationship Joins)<a href="#jpql-inner-joins-relationship-joins" class="hash-link" aria-label="Direct link to JPQL Inner Joins (Relationship Joins)" title="Direct link to JPQL Inner Joins (Relationship Joins)">​</a></h4>
<p>The syntax for the inner join operation is</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> join_association_path_expression </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">AS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example, the query below joins over the relationship between publishers and magazines. This type of join
typically equates to a join over a foreign key relationship in the database.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The keyword INNER may optionally be used:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is equivalent to the following query using the earlier <code>IN</code> construct. It selects those publishers with
revenue of over 1 million for which at least one magazine exists:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> OBJECT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pub</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-outer-joins">JPQL Outer Joins<a href="#jpql-outer-joins" class="hash-link" aria-label="Direct link to JPQL Outer Joins" title="Direct link to JPQL Outer Joins">​</a></h4>
<p><a href="https://www.w3schools.com/sql/sql_join_left.asp" target="_blank" rel="noopener noreferrer"><code>LEFT JOIN</code> and <code>LEFT OUTER JOIN</code> are synonymous</a>. They enable the
retrieval of a set of entities where matching values in the join condition may be absent. The syntax for a left
outer join is</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">OUTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> join_association_path_expression </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">AS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The keyword <code>OUTER</code> may optionally be used:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">OUTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>An important use case for <code>LEFT JOIN</code> is in enabling the prefetching of related data items as a side effect of a
query. This is accomplished by specifying the <code>LEFT JOIN</code> as a <code>FETCH JOIN</code></strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-fetch-joins">JPQL Fetch Joins<a href="#jpql-fetch-joins" class="hash-link" aria-label="Direct link to JPQL Fetch Joins" title="Direct link to JPQL Fetch Joins">​</a></h4>
<p>A <code>FETCH JOIN</code> enables the fetching of an association as a side effect of the execution of a query. A <code>FETCH JOIN</code>
is specified over an entity and its related entities. The syntax for a fetch join is</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">fetch_join ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">OUTER</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INNER</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FETCH</span><span class="token plain"> join_association_path_expression</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The association referenced by the right side of the <code>FETCH JOIN</code> clause must be an association that belongs to an
entity that is returned as a result of the query. It is not permitted to specify an identification variable for the
entities referenced by the right side of the <code>FETCH JOIN</code> clause, and hence references to the implicitly fetched
entities cannot appear elsewhere in the query. The following query returns a set of magazines. As a side effect,
the associated articles for those magazines are also retrieved, even though they are not part of the explicit query
result. The persistent fields or properties of the articles that are eagerly fetched are fully initialized. The
initialization of the relationship properties of the articles that are retrieved is determined by the metadata for
the <code>Article</code> entity class.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag </span><span class="token keyword" style="color:#00009f">LEFT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FETCH</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A fetch join has the same join semantics as the corresponding inner or outer join, except that the related objects
specified on the right-hand side of the join operation are not returned in the query result or otherwise referenced
in the query. Hence, for example, if magazine id 1 has five articles, the above query returns five references to the
magazine 1 entity.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-collection-member-declarations">JPQL Collection Member Declarations<a href="#jpql-collection-member-declarations" class="hash-link" aria-label="Direct link to JPQL Collection Member Declarations" title="Direct link to JPQL Collection Member Declarations">​</a></h3>
<p>An identification variable declared by a <code>collection_member_declaration</code> ranges over values of a collection
obtained by navigation using a path expression. Such a path expression represents a navigation involving the
association-fields of an entity abstract schema type. Because a path expression can be based on another path
expression, the navigation can use the association-fields of related entities. An identification variable of a
collection member declaration is declared using a special operator, the reserved identifier <code>IN</code>. The argument to
the <code>IN</code> operator is a collection-valued path expression. The path expression evaluates to a collection type
specified as a result of navigation to a collection-valued association-field of an entity abstract schema type. The
syntax for declaring a collection member identification variable is as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">collection_member_declaration ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">collection_valued_path_expression</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">AS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> identification_variable</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example, the query</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Grisham&#x27;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>may equivalently be expressed as follows, using the IN operator:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">IN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> art</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> art</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">author</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lastName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Grisham&#x27;</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, articles is the name of an association-field whose value is a collection of instances of the
abstract schema type <code>Article</code>. The identification variable <code>art</code> designates a member of this collection, a single
<code>Article</code> abstract schema type instance. In this example, mag is an identification variable of the abstract schema
type <code>Magazine</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-polymorphism">JPQL Polymorphism<a href="#jpql-polymorphism" class="hash-link" aria-label="Direct link to JPQL Polymorphism" title="Direct link to JPQL Polymorphism">​</a></h3>
<p>Java Persistence queries are automatically polymorphic. The <code>FROM</code> clause of a query designates not only instances
of the specific entity classes to which the query explicitly refers but of subclasses as well. The instances
returned by a query include instances of the subclasses that satisfy the query criteria.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-where-clause">JPQL <code>WHERE</code> Clause<a href="#jpql-where-clause" class="hash-link" aria-label="Direct link to jpql-where-clause" title="Direct link to jpql-where-clause">​</a></h2>
<p>The <code>WHERE</code> clause of a query consists of a conditional expression used to select objects or values that satisfy the
expression. The <code>WHERE</code> clause restricts the result of a select statement or the scope of an update or delete
operation. A <code>WHERE</code> clause is defined as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">where_clause ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> conditional_expression</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>GROUP BY</code> construct enables the aggregation of values according to the properties of an entity class. The
<code>HAVING</code> construct enables conditions to be specified that further restrict the query result as restrictions upon
the groups. The syntax of the <code>HAVING</code> clause is as follows:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">having_clause ::</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HAVING</span><span class="token plain"> conditional_expression</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-conditional-expressions">JPQL Conditional Expressions<a href="#jpql-conditional-expressions" class="hash-link" aria-label="Direct link to JPQL Conditional Expressions" title="Direct link to JPQL Conditional Expressions">​</a></h3>
<p>The following sections describe the language constructs that can be used in a conditional expression of the <code>WHERE</code>
clause or <code>HAVING</code> clause. State-fields that are mapped in serialized form or as lobs may not be portably used in
conditional expressions</p>
<div class="theme-admonition theme-admonition-note admonition_dFHE alert alert--secondary"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_sFKi"><p>The implementation is not expected to perform such query operations involving such fields in memory rather than in
the database.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-literals">JPQL Literals<a href="#jpql-literals" class="hash-link" aria-label="Direct link to JPQL Literals" title="Direct link to JPQL Literals">​</a></h4>
<p>A string literal is enclosed in single quotes -- for example: &#x27;literal&#x27;. A string literal that includes a single
quote is represented by two single quotes -- for example: &#x27;literal&#x27;&#x27;s&#x27;. String literals in queries, like Java
String literals, use unicode character encoding. The use of Java escape notation is not supported in query string
literals. Exact numeric literals support the use of Java integer literal syntax as well as SQL exact numeric
literal syntax. Approximate literals support the use Java floating point literal syntax as well as SQL approximate
numeric literal syntax. Enum literals support the use of Java enum literal syntax. <strong>The enum class name must be
specified</strong>. Appropriate suffixes may be used to indicate the specific type of a numeric literal in accordance with
the Java Language Specification. The boolean literals are TRUE and FALSE. Although predefined reserved literals
appear in upper case, they are case insensitive.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-identification-variables-wherehaving">JPQL Identification Variables (WHERE/HAVING)<a href="#jpql-identification-variables-wherehaving" class="hash-link" aria-label="Direct link to JPQL Identification Variables (WHERE/HAVING)" title="Direct link to JPQL Identification Variables (WHERE/HAVING)">​</a></h4>
<p>All identification variables used in the <code>WHERE</code> or <code>HAVING</code> clause of a <code>SELECT</code> or <code>DELETE</code> statement must be
declared in the <code>FROM</code> clause, as described in <a href="#jpql-identification-variables">JPQL Identification Variables</a>. The
identification variables used in the <code>WHERE</code> clause of an <code>UPDATE</code> statement must be declared in the <code>UPDATE</code>
clause. Identification variables are existentially quantified in the <code>WHERE</code> and <code>HAVING</code> clause. This means that an
identification variable represents a member of a collection or an instance of an entity&#x27;s abstract schema type. An
identification variable never designates a collection in its entirety.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-path-expressions-wherehaving">JPQL Path Expressions (WHERE/HAVING)<a href="#jpql-path-expressions-wherehaving" class="hash-link" aria-label="Direct link to JPQL Path Expressions (WHERE/HAVING)" title="Direct link to JPQL Path Expressions (WHERE/HAVING)">​</a></h4>
<p>It is illegal to use a <code>collection_valued_path_expression</code> within a <code>WHERE</code> or <code>HAVING</code> clause as part of a
conditional expression except in an <code>empty_collection_comparison_expression</code>, in a <code>collection_member_expression</code>,
or as an argument to the <code>SIZE</code> operator.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-input-parameters">JPQL Input Parameters<a href="#jpql-input-parameters" class="hash-link" aria-label="Direct link to JPQL Input Parameters" title="Direct link to JPQL Input Parameters">​</a></h4>
<p>Either positional or named parameters may be used. Positional and named parameters may not be mixed in a single
query. <strong>Input parameters can only be used in the <code>WHERE</code> clause or <code>HAVING</code> clause of a query</strong>.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-positional-parameters">JPQL Positional Parameters<a href="#jpql-positional-parameters" class="hash-link" aria-label="Direct link to JPQL Positional Parameters" title="Direct link to JPQL Positional Parameters">  ​</a></h5>
<p>The following rules apply to positional parameters.</p>
<ul>
<li>Input parameters are designated by the question mark (<code>?</code>) prefix followed by an integer. For example: <code>?1</code>.</li>
<li>Input parameters are numbered starting from 1. Note that the same parameter can be used more than once in the
query string and that the ordering of the use of parameters within the query string need not conform to the order
of the positional parameters.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-named-parameters">JPQL Named Parameters<a href="#jpql-named-parameters" class="hash-link" aria-label="Direct link to JPQL Named Parameters" title="Direct link to JPQL Named Parameters">​</a></h5>
<p>A named parameter is an identifier that is prefixed by the &quot;:&quot; symbol. It follows the rules for identifiers defined
in <a href="#jpql-from-identifiers">JPQL FROM Identifiers</a>. Named parameters are case sensitive.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> :rev</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-conditional-expression-composition">JPQL Conditional Expression Composition<a href="#jpql-conditional-expression-composition" class="hash-link" aria-label="Direct link to JPQL Conditional Expression Composition" title="Direct link to JPQL Conditional Expression Composition">​</a></h4>
<p>Conditional expressions are composed of other conditional expressions, comparison operations, logical operations,
path expressions that evaluate to boolean values, boolean literals, and boolean input parameters. Arithmetic
expressions can be used in comparison expressions. Arithmetic expressions are composed of other arithmetic
expressions, arithmetic operations, path expressions that evaluate to numeric values, numeric literals, and numeric
input parameters. Arithmetic operations use numeric promotion. Standard bracketing () for ordering expression
evaluation is supported. Conditional expressions are defined as follows:</p>
<ul>
<li><code>conditional_expression ::= conditional_term | conditional_expression OR conditional_term</code></li>
<li><code>conditional_term ::= conditional_factor | conditional_term AND conditional_factor</code></li>
<li><code>conditional_factor ::= [ NOT ] conditional_primary</code></li>
<li><code>conditional_primary ::= simple_cond_expression | (conditional_expression)</code></li>
<li><code>simple_cond_expression ::= comparison_expression | between_expression | like_expression | in_expression | null_comparison_expression | empty_collection_comparison_expression | collection_member_expression | exists_expression</code></li>
</ul>
<p>Aggregate functions can only be used in conditional expressions in a HAVING clause.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-operators-and-operator-precedence">JPQL Operators and Operator Precedence<a href="#jpql-operators-and-operator-precedence" class="hash-link" aria-label="Direct link to JPQL Operators and Operator Precedence" title="Direct link to JPQL Operators and Operator Precedence">​</a></h4>
<p>The operators are listed below in order of decreasing precedence.</p>
<ul>
<li>Navigation operator (.)</li>
<li>Arithmetic operators: +, - unary *, / multiplication and division +, - addition and subtraction</li>
<li>Comparison operators : <code>=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&lt;&gt;</code> (not equal), <code>[NOT] BETWEEN</code>, <code>[NOT] LIKE</code>, <code>[NOT] IN</code>, <code>IS [NOT] NULL</code>, <code>IS [NOT] EMPTY</code>, <code>[NOT] MEMBER [OF]</code></li>
<li>Logical operators: <code>NOT</code> <code>AND</code> <code>OR</code></li>
</ul>
<p>The following sections describe other operators used in specific expressions.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-between-expressions">JPQL Between Expressions<a href="#jpql-between-expressions" class="hash-link" aria-label="Direct link to JPQL Between Expressions" title="Direct link to JPQL Between Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>[NOT] BETWEEN</code> in a conditional expression is as follows:</p>
<ul>
<li><code>arithmetic_expression [NOT] BETWEEN arithmetic_expression AND arithmetic_expression | string_expression [NOT] BETWEEN string_expression AND string_expression | datetime_expression [NOT] BETWEEN datetime_expression AND datetime_expression</code></li>
</ul>
<p>The BETWEEN expression <code>x BETWEEN y AND z</code> is semantically equivalent to <code>y &lt;= x AND x &lt;= z</code>,</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-in-expressions">JPQL In Expressions<a href="#jpql-in-expressions" class="hash-link" aria-label="Direct link to JPQL In Expressions" title="Direct link to JPQL In Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>[NOT] IN</code> in a conditional expression is as follows:</p>
<ul>
<li><code>in_expression ::= state_field_path_expression [NOT] IN ( in_item {, in_item}* | subquery)</code></li>
<li><code>in_item ::= literal | input_parameter</code></li>
</ul>
<p>The <code>state_field_path_expression</code> must have a</p>
<ul>
<li>string,</li>
<li>numeric, or</li>
<li>enum value.</li>
</ul>
<p>The literal and/or input_parameter values must be like the same abstract schema type of the
<code>state_field_path_expression</code> in type. The results of the subquery must be like the same abstract schema type of the
<code>state_field_path_expression</code> in type. For example,, <code>o.country IN (&#x27;UK&#x27;, &#x27;US&#x27;, &#x27;France&#x27;)</code></p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-like-expressions">JPQL Like Expressions<a href="#jpql-like-expressions" class="hash-link" aria-label="Direct link to JPQL Like Expressions" title="Direct link to JPQL Like Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>[NOT] LIKE</code> in a conditional expression is as follows:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">string_expression [NOT] LIKE pattern_value [ESCAPE escape_character]</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>The <code>string_expression</code> must have a string value</strong>. The <code>pattern_value</code> is a string literal or a string-valued
input parameter in which an underscore (<code>_</code>) stands for any single character, a percent (<code>%</code>) character stands for
any sequence of characters (including the empty sequence), and all other characters stand for themselves. The
optional <code>escape_character</code> is a single-character string literal or a character-valued input parameter (i.e., char
or Character) and is used to escape the special meaning of the underscore and percent characters in pattern_value. Examples are:</p>
<ul>
<li><code>asentence.word LIKE &#x27;l_se&#x27;</code> - is true for &#x27;lose&#x27; and false for &#x27;loose&#x27;</li>
<li><code>aword.underscored LIKE &#x27;\_%&#x27; ESCAPE &#x27;\&#x27;</code> - is true for &#x27;_foo&#x27; and false for &#x27;bar&#x27;</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-null-comparison-expressions">JPQL Null Comparison Expressions<a href="#jpql-null-comparison-expressions" class="hash-link" aria-label="Direct link to JPQL Null Comparison Expressions" title="Direct link to JPQL Null Comparison Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>IS NULL</code> in a conditional expression is as follows:</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">{single_valued_path_expression | input_parameter } IS [NOT] NULL</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A null comparison expression tests whether or not the single-valued path expression or input parameter is a <code>NULL</code>
value.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-empty-collection-comparison-expressions">JPQL Empty Collection Comparison Expressions<a href="#jpql-empty-collection-comparison-expressions" class="hash-link" aria-label="Direct link to JPQL Empty Collection Comparison Expressions" title="Direct link to JPQL Empty Collection Comparison Expressions">​</a></h4>
<p>The syntax for the use of the comparison operator <code>IS EMPTY</code> in an <code>empty_collection_comparison_expression</code> is as follows:</p>
<ul>
<li><code>collection_valued_path_expression IS [NOT] EMPTY</code></li>
</ul>
<p>This expression tests whether or not the collection designated by the collection-valued path expression is empty
(i.e, has no elements).</p>
<p>For example, the following query will return all magazines that don&#x27;t have any articles at all:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles </span><span class="token operator" style="color:#393A34">IS</span><span class="token plain"> EMPTY</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the value of the collection-valued path expression in an empty collection comparison expression is unknown, the
value of the empty comparison expression is unknown.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-collection-member-expressions">JPQL Collection Member Expressions<a href="#jpql-collection-member-expressions" class="hash-link" aria-label="Direct link to JPQL Collection Member Expressions" title="Direct link to JPQL Collection Member Expressions">​</a></h4>
<p>The use of the comparison <code>collection_member_expression</code> is as follows: syntax for the operator MEMBER OF in an</p>
<ul>
<li><code>collection_member_expression ::= entity_expression [NOT] MEMBER [OF] collection_valued_path_expression</code></li>
<li><code>entity_expression ::= single_valued_association_path_expression | simple_entity_expression</code></li>
<li><code>simple_entity_expression ::= identification_variable | input_parameter</code></li>
</ul>
<p>This expression tests whether the designated value is a member of the collection specified by the collection-valued
path expression. If the collection valued path expression designates an empty collection, the value of the <code>MEMBER OF</code> expression is <code>FALSE</code> and the value of the <code>NOT MEMBER OF</code> expression is <code>TRUE</code>. Otherwise, if the value of the
collection-valued path expression or single-valued association-field path expression in the collection member
expression is <code>NULL</code> or unknown, the value of the collection member expression is unknown.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-exists-expressions">JPQL Exists Expressions<a href="#jpql-exists-expressions" class="hash-link" aria-label="Direct link to JPQL Exists Expressions" title="Direct link to JPQL Exists Expressions">​</a></h4>
<p>An <code>EXISTS</code> expression is a predicate that is true only if the result of the subquery consists of one or more
values and that is false otherwise. The syntax of an exists expression is</p>
<ul>
<li><code>exists_expression ::= [NOT] EXISTS (subquery)</code></li>
</ul>
<p>The use of the reserved word <code>OF</code> is optional in this expression.</p>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-all-or-any-expressions">JPQL All or Any Expressions<a href="#jpql-all-or-any-expressions" class="hash-link" aria-label="Direct link to JPQL All or Any Expressions" title="Direct link to JPQL All or Any Expressions">​</a></h4>
<p>An ALL conditional expression is a predicate that is true if the comparison operation is true for all values in the
result of the subquery or <strong>the result of the subquery is empty</strong>. An ALL conditional expression is false if the
result of the comparison is false for at least one row, and is unknown if neither true nor false. An ANY
conditional expression is a predicate that is true if the comparison operation is true for some value in the result
of the subquery. An ANY conditional expression is false <strong>if the result of the subquery is empty</strong> or if the
comparison operation is false for every value in the result of the subquery, and is unknown if neither true nor
false. <strong>The keyword SOME is synonymous with ANY</strong>. The comparison operators used with ALL or ANY conditional
expressions are <code>=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;&gt;</code>. The result of the subquery must be like that of the other argument to
the comparison operator in type.</p>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">all_or_any_expression ::= { ALL | ANY | SOME} (subquery)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following example select the authors who make the highest salary for their magazine:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">salary </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">salary </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author a </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazine </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazine</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-subqueries">JPQL Subqueries<a href="#jpql-subqueries" class="hash-link" aria-label="Direct link to JPQL Subqueries" title="Direct link to JPQL Subqueries">​</a></h4>
<p>Subqueries may be used in the <code>WHERE</code> or <code>HAVING</code> clause. The syntax for subqueries is as follows:</p>
<ul>
<li><code>subquery ::= simple_select_clause subquery_from_clause [where_clause] [groupby_clause] [having_clause]</code></li>
<li>Subqueries are restricted to the WHERE and HAVING clauses in this release. Support for subqueries in the FROM
clause will be considered in a later release of the specification.</li>
<li><code>simple_select_clause ::= SELECT [DISTINCT] simple_select_expression</code></li>
<li><code>subquery_from_clause ::= FROM subselect_identification_variable_declaration {, subselect_identification_variable_declaration}*</code></li>
<li><code>subselect_identification_variable_declaration ::= identification_variable_declaration | association_path_expression [AS] identification_variable | collection_member_declaration</code></li>
<li><code>simple_select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable</code></li>
</ul>
<p>Examples:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author auth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">EXISTS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> spouseAuth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Author spouseAuth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> spouseAuth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">spouse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Magazine mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">art</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">articles art</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-functional-expressions">JPQL Functional Expressions<a href="#jpql-functional-expressions" class="hash-link" aria-label="Direct link to JPQL Functional Expressions" title="Direct link to JPQL Functional Expressions">​</a></h4>
<p>The JPQL includes the following built-in functions, which may be used in the <code>WHERE</code> or <code>HAVING</code> clause of a query.
If the value of any argument to a functional expression is null or unknown, the value of the functional expression
is unknown.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-string-functions">JPQL String Functions<a href="#jpql-string-functions" class="hash-link" aria-label="Direct link to JPQL String Functions" title="Direct link to JPQL String Functions">​</a></h5>
<ul>
<li><code>functions_returning_strings ::= CONCAT(string_primar y, string_primary) | SUBSTRING(string_primar y, simple_arithmetic_expression, simple_arithmetic_expression) | TRIM([[trim_specification] [trim_character] FROM] string_primary) | LOWER(string_primar y) | UPPER(string_primar y)</code></li>
<li><code>trim_specification ::= LEADING | TRAILING | BOTH</code></li>
<li><code>functions_returning_numerics ::= LENGTH(string_primar y) | LOCATE(string_primar y, string_primar y[, simple_arithmetic_expression])</code></li>
</ul>
<p>The <code>CONCAT</code> function returns a string that is a concatenation of its arguments. The second and third arguments of
the <code>SUBSTRING</code> function denote the starting position and length of the substring to be returned. These arguments
are integers. The first position of a string is denoted by 1. The <code>SUBSTRING</code> function returns a string. The <code>TRIM</code>
function trims the specified character from a string. If the character to be trimmed is not specified, it is
assumed to be space (or blank). The optional <code>trim_character</code> is a single-character string literal or a
character-valued input parameter (i.e., char or Character). If a trim specification is not provided, BOTH is
assumed. The <code>TRIM</code> function returns the trimmed string. The <code>LOWER</code> and <code>UPPER</code> functions convert a string to
lower and upper case, respectively. They return a string. The <code>LOCATE</code> function returns the position of a given
string within a string, starting the search at a specified position. It returns the first position at which the
string was found as an integer. The first argument is the string to be located; the second argument is the string
to be searched; the optional third argument is an integer that represents the string position at which the search
is started (by default, the beginning of the string to be searched). The first position in a string is denoted by
&quot;1.&quot; If the string is not found, 0 is returned. The <code>LENGTH</code> function returns the length of the string in characters
&quot;2.&quot; as an integer.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-arithmetic-functions">JPQL Arithmetic Functions<a href="#jpql-arithmetic-functions" class="hash-link" aria-label="Direct link to JPQL Arithmetic Functions" title="Direct link to JPQL Arithmetic Functions">​</a></h5>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">functions_returning_numerics ::= ABS(simple_arithmetic_expression) | SQRT(simple_arithmetic_expression) | MOD(simple_arithmetic_expression, simple_arithmetic_expression) | SIZE(collection_valued_path_expression)</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>ABS</code> function takes a numeric argument and returns a number (integer, float, or double) of the same type as the
argument to the function. The <code>SQRT</code> function takes a numeric argument and returns a double.</p>
<p>The <code>MOD</code> function takes two integer arguments and returns an integer. The <code>SIZE</code> function returns an integer
value, the number of elements of the collection. If the collection is empty, the <code>SIZE</code> function evaluates to zero.
Numeric arguments to these functions may correspond to the numeric Java object types as well as the primitive
numeric types.</p>
<h5 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-datetime-functions">JPQL Datetime Functions<a href="#jpql-datetime-functions" class="hash-link" aria-label="Direct link to JPQL Datetime Functions" title="Direct link to JPQL Datetime Functions">​</a></h5>
<div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">functions_returning_datetime:= CURRENT_DATE | CURRENT_TIME | CURRENT_TIMESTAMP</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The datetime functions return the value of current date, time, and timestamp on the database server.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-group-by-having">JPQL <code>GROUP BY</code>, <code>HAVING</code><a href="#jpql-group-by-having" class="hash-link" aria-label="Direct link to jpql-group-by-having" title="Direct link to jpql-group-by-having">​</a></h2>
<p>The <code>GROUP BY</code> construct enables the aggregation of values according to a set of properties. The <code>HAVING</code> construct
enables conditions to be specified that further restrict the query result. <strong>Such conditions are restrictions upon
the groups</strong>. The syntax of the <code>GROUP BY</code> and <code>HAVING</code> clauses is as follows:</p>
<ul>
<li><code>groupby_clause ::= GROUP BY groupby_item {, groupby_item}*</code></li>
<li><code>groupby_item ::= single_valued_path_expression | identification_variable</code></li>
<li><code>having_clause ::= HAVING conditional_expression</code></li>
</ul>
<p>If a query contains both a <code>WHERE</code> clause and a <code>GROUP BY</code> clause, the effect is that of first applying the where
clause, and then forming the groups and filtering them according to the <code>HAVING</code> clause. The <code>HAVING</code> clause causes
those groups to be retained that satisfy the condition of the <code>HAVING</code> clause. The requirements for the <code>SELECT</code>
clause when <code>GROUP BY</code> is used follow those of SQL: namely, <strong>any item that appears in the <code>SELECT</code> clause (other
than as an argument to an aggregate function) must also appear in the <code>GROUP BY</code> clause</strong>. In forming the groups,
null values are treated as the same for grouping purposes. Grouping by an entity is permitted. In this case, the
entity must contain no serialized state fields or lob-valued state fields. The <code>HAVING</code> clause must specify search
conditions over the grouping items or aggregate functions that apply to grouping items.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-select-clause">JPQL <code>SELECT</code> Clause<a href="#jpql-select-clause" class="hash-link" aria-label="Direct link to jpql-select-clause" title="Direct link to jpql-select-clause">​</a></h2>
<p>The <code>SELECT</code> clause denotes the query result. More than one value may be returned from the <code>SELECT</code> clause of a
query. The <code>SELECT</code> clause may contain one or more of the following elements:</p>
<ul>
<li>a single range variable or identification variable that ranges over an entity abstract schema type,</li>
<li>a single-valued path expression,</li>
<li>an aggregate select expression,</li>
<li>a constructor expression.</li>
</ul>
<p>The <code>SELECT</code> clause has the following syntax:</p>
<ul>
<li><code>select_clause ::= SELECT [DISTINCT] select_expression {, select_expression}*</code></li>
<li><code>select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable | OBJECT(identification_variable) | constructor_expression</code></li>
<li><code>constructor_expression ::= NEW constructor_name ( constructor_item {, constructor_item}* )</code></li>
<li><code>constructor_item ::= single_valued_path_expression | aggregate_expression</code></li>
<li><code>aggregate_expression ::= { AVG | MAX | MIN | SUM } ([DISTINCT] state_field_path_expression) | COUNT ([DISTINCT] identification_variable | state_field_path_expression | single_valued_association_path_expression)</code></li>
</ul>
<p>For example:</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.00</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_dFHE alert alert--warning"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_sFKi"><p>⚠️ Note that the <code>SELECT</code> clause must be specified to return only single-valued expressions. The query below is
therefore not valid</p><div class="language-text codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-text codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token plain">SELECT mag.authors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM Magazine AS mag</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>The <code>DISTINCT</code> keyword is used to specify that duplicate values must be eliminated from the query result. If
<code>DISTINCT</code> is not specified, duplicate values are not eliminated. Standalone identification variables in the
<code>SELECT</code> clause may optionally be qualified by the <code>OBJECT</code> operator. The <code>SELECT</code> clause must not use the <code>OBJECT</code>
operator to qualify path expressions.</p>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-result-type-of-the-select-clause">JPQL Result Type of the <code>SELECT</code> Clause<a href="#jpql-result-type-of-the-select-clause" class="hash-link" aria-label="Direct link to jpql-result-type-of-the-select-clause" title="Direct link to jpql-result-type-of-the-select-clause">​</a></h3>
<p>The type of the query result specified by the <code>SELECT</code> clause of a query is an entity abstract schema type, a
state-field type, the result of an aggregate function, the result of a construction operation, or some sequence of
these. The result type of the <code>SELECT</code> clause is defined by the the result types of the <code>select_expressions</code>
contained in it. When multiple <code>select_expressions</code> are used in the <code>SELECT</code> clause, the result of the query is of
type <code>Object[]</code>, and the elements in this result correspond in order to the order of their specification in the
<code>SELECT</code> clause and in type to the result types of each of the <code>select_expressions</code>. The type of the result of a
<code>select_expression</code> is as follows:</p>
<ul>
<li>A <code>single_valued_path_expression</code> that is a <code>state_field_path_expression</code> results in an object of the same type
as the corresponding state field of the entity. If the state field of the entity is a primitive type, the
corresponding object type is returned.</li>
<li><code>single_valued_path_expression</code> that is a <code>single_valued_association_path_expression</code> results in an entity object
of the type of the relationship field or the subtype of the relationship field of the entity object as determined
by the object/relational mapping.</li>
<li>The result type of an <code>identification_variable</code> is the type of the entity to which that identification variable
corresponds or a subtype as determined by the object/relational mapping.</li>
<li>The result type of <code>aggregate_expression</code> is defined in <a href="#jpql-aggregate-functions">JPQL Aggregate Functions</a></li>
<li>The result type of a <code>constructor_expression</code> is the type of the class for which the constructor is defined. The
types of the arguments to the constructor are defined by the above rules.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-constructor-expressions">JPQL Constructor Expressions<a href="#jpql-constructor-expressions" class="hash-link" aria-label="Direct link to JPQL Constructor Expressions" title="Direct link to JPQL Constructor Expressions">​</a></h3>
<p><strong>In the <code>SELECT</code> Clause a constructor may be used in the <code>SELECT</code> list to return one or more Java instances. The
specified class is not required to be an entity or to be mapped to the database. The constructor name must be fully
qualified</strong>.</p>
<p>If an entity class name is specified in the <code>SELECT NEW</code> clause, the resulting entity instances are in the new
state.</p>
<div class="language-sql codeBlockContainer_dsFJ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_qwYU"><pre tabindex="0" class="prism-code language-sql codeBlock_OAmf thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_y6aT"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> NEW com</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">company</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PublisherInfo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">revenue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> Publisher pub </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> pub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">magazines mag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> mag</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">price </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.00</span><br></span></code></pre><div class="buttonGroup_WeXH"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_YJer" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_h31_"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_Vii8"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-null-values-in-the-query-result">JPQL Null Values in the Query Result<a href="#jpql-null-values-in-the-query-result" class="hash-link" aria-label="Direct link to JPQL Null Values in the Query Result" title="Direct link to JPQL Null Values in the Query Result">​</a></h3>
<p>If the result of a query corresponds to an association-field or state-field whose value is null, that null value is
returned in the result of the query method. The <code>IS NOT NULL</code> construct can be used to eliminate such null values
from the result set of the query.</p>
<div class="theme-admonition theme-admonition-note admonition_dFHE alert alert--secondary"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_sFKi"><p>State-field types defined in terms of Java numeric primitive types cannot produce NULL values in the query result.
A query that returns such a state-field type as a result type must not return a null value.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-aggregate-functions">JPQL Aggregate Functions<a href="#jpql-aggregate-functions" class="hash-link" aria-label="Direct link to JPQL Aggregate Functions" title="Direct link to JPQL Aggregate Functions">​</a></h3>
<p>In the <code>SELECT</code> clause the result of a query may be the result of an aggregate function applied to a path
expression. The following aggregate functions can be used in the <code>SELECT</code> clause of a query:</p>
<ul>
<li><code>AVG</code></li>
<li><code>COUNT</code></li>
<li><code>MAX</code></li>
<li><code>MIN</code></li>
<li><code>SUM</code></li>
</ul>
<p>For all aggregate functions except <code>COUNT</code>, the path expression that is the argument to the aggregate function must
terminate in a state-field. The path expression argument to <code>COUNT</code> may terminate in either a state-field or an
association-field, or the argument to <code>COUNT</code> may be an identification variable. Arguments to the functions <code>SUM</code>
and <code>AVG</code> must be numeric. Arguments to the functions <code>MAX</code> and <code>MIN</code> must correspond to orderable state-field
types (i.e., numeric types, string types, character types, or date types). The Java type that is contained in the
result of a query using an aggregate function is as follows:</p>
<ul>
<li><code>COUNT</code> returns <code>Long</code>.</li>
<li><code>MAX</code> &amp; <code>MIN</code> return the type of the state-field to which they are applied.</li>
<li><code>AVG</code> returns <code>Double</code>.</li>
<li><code>SUM</code> returns <code>Long</code> when applied to state-fields of integral types (other than <code>BigInteger</code>); <code>Double</code> when
applied to state-fields of floating point types; <code>BigInteger</code> when applied to state-fields of type <code>BigInteger</code>;
and <code>BigDecimal</code> when applied to state-fields of type <code>BigDecimal</code>.</li>
</ul>
<p>If <code>SUM</code>, <code>AVG</code>, <code>MAX</code>, or <code>MIN</code> is used, and there are no values to which the aggregate function can be applied,
the result of the aggregate function is <code>NULL</code>. If <code>COUNT</code> is used, and there are no values to which <code>COUNT</code> can be
applied, the result of the aggregate function is 0.</p>
<p>The argument to an aggregate function may be preceded by the keyword <code>DISTINCT</code> to specify that duplicate values
are to be eliminated before the aggregate function is applied. Null values are eliminated before the aggregate
function is applied, regardless of whether the keyword <code>DISTINCT</code> is specified.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-order-by-clause">JPQL <code>ORDER BY</code> Clause<a href="#jpql-order-by-clause" class="hash-link" aria-label="Direct link to jpql-order-by-clause" title="Direct link to jpql-order-by-clause">​</a></h2>
<p>The <code>ORDER BY</code> clause allows the objects or values that are returned by the query to be ordered. The syntax of the
<code>ORDER BY</code> clause is</p>
<ul>
<li><code>orderby_clause ::= ORDER BY orderby_item {, orderby_item}*</code></li>
<li><code>orderby_item ::= state_field_path_expression [ASC | DESC]</code></li>
</ul>
<p>It is legal to specify <code>DISTINCT</code> with <code>MAX</code> or <code>MIN</code>, but it does not affect the result.</p>
<p>When the <code>ORDER BY</code> clause is used in a query, each element of the <code>SELECT</code> clause of the query must be one of the
following:</p>
<ul>
<li>an identification variable x, optionally denoted as <code>OBJECT(x)</code>,</li>
<li>a <code>single_valued_association_path_expression</code>, or a <code>state_field_path_expression</code>. For example:
<code>SELECT pub FROM Publisher pub JOIN pub.magazines mag ORDER BY o.revenue, o.name</code></li>
</ul>
<p>If more than one orderby-item is specified, the left-to-right sequence of the orderby-item elements determines the
precedence, whereby the leftmost orderby-item has highest precedence. The keyword <code>ASC</code> specifies that ascending
ordering be used; the keyword <code>DESC</code> specifies that descending ordering be used. Ascending ordering is the default.
SQL rules for the ordering of null values apply: that is, all null values must appear before all non-null values in
the ordering or all null values must appear after all non-null values in the ordering, but it is not specified
which. The ordering of the query result is preserved in the result of the query method if the <code>ORDER BY</code> clause is
used.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-bulk-update-and-delete">JPQL Bulk Update and Delete<a href="#jpql-bulk-update-and-delete" class="hash-link" aria-label="Direct link to JPQL Bulk Update and Delete" title="Direct link to JPQL Bulk Update and Delete">​</a></h2>
<p>Operations Bulk update and delete operations apply to entities of a single entity class (together with its
subclasses, if any). Only one entity abstract schema type may be specified in the <code>FROM</code> or <code>UPDATE</code> clause. The
syntax of these operations is as follows:</p>
<ul>
<li><code>update_statement ::= update_clause [where_clause]</code></li>
<li><code>update_clause ::= UPDATE abstract_schema_name [[AS] identification_variable] SET update_item {, update_item}*</code></li>
<li><code>update_item ::= [identification_variable.]{state_field | single_valued_association_field} = new_value</code></li>
<li><code>new_value ::= simple_arithmetic_expression | string_primary | datetime_primary | boolean_primary | enum_primary simple_entity_expression | NULL</code></li>
<li><code>delete_statement ::= delete_clause [where_clause]</code></li>
<li><code>delete_clause ::= DELETE FROM abstract_schema_name [[AS] identification_variable]</code></li>
</ul>
<p>The syntax of the <code>WHERE</code> clause is described in <a href="#jpql-where-clause">JPQL WHERE Clause</a>. A delete operation only
applies to entities of the specified class and its subclasses. It does not cascade to related entities. The
<code>new_value</code> specified for an update operation must be compatible in type with the state-field to which it is
assigned. Bulk update maps directly to a database update operation, bypassing optimistic locking checks. Portable
applications must manually update the value of the version column, if desired, and/or manually validate the value
of the version column. <strong>The persistence context is not synchronized with the result of the bulk update or delete.
Caution should be used when executing bulk update or delete operations because they may result in inconsistencies
between the database and the entities in the active persistence context. In general, bulk update and delete
operations should only be performed within a separate transaction or at the beginning of a transaction (before
entities have been accessed whose state might be affected by such operations)</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-null-values">JPQL Null Values<a href="#jpql-null-values" class="hash-link" aria-label="Direct link to JPQL Null Values" title="Direct link to JPQL Null Values">​</a></h2>
<p>When the target of a reference does not exist in the database, its value is regarded as <code>NULL</code>. SQL 92 NULL
semantics defines the evaluation of conditional expressions containing NULL values. The following is a brief
description of these semantics:</p>
<ul>
<li><code>Comparison or arithmetic operations with a NULL value always yield an unknown value.</code></li>
<li><code>Two NULL values are not considered to be equal, the comparison yields an unknown value.</code></li>
<li><code>Comparison or arithmetic operations with an unknown value always yield an unknown value.</code></li>
<li><code>The IS NULL and IS NOT NULL operators convert a NULL state-field or single-valued association-field value into the respective TRUE or FALSE value.</code></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_dFHE alert alert--info"><div class="admonitionHeading_PQ65"><span class="admonitionIcon_YzJa"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_sFKi"><p>The JPQL defines the empty string, &quot;&quot;, as a string with 0 length, which is not equal to a <code>NULL</code> value. However,
<code>NULL</code> values and empty strings may not always be distinguished when queries are mapped to some databases.
Application developers should therefore not rely on the semantics of query comparisons involving the empty string
and <code>NULL</code> value.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="jpql-equality-and-comparison-semantics">JPQL Equality and Comparison Semantics<a href="#jpql-equality-and-comparison-semantics" class="hash-link" aria-label="Direct link to JPQL Equality and Comparison Semantics" title="Direct link to JPQL Equality and Comparison Semantics">​</a></h2>
<p>Only the values of like types are permitted to be compared. A type is like another type if they correspond to the
same Java language type, or if one is a primitive Java language type and the other is the wrappered Java class type
equivalent (e.g., <code>int</code> and <code>Integer</code> are like types in this sense). There is one exception to this rule: it is
valid to compare numeric values for which the rules of numeric promotion apply. Conditional expressions attempting
to compare non-like type values are disallowed except for this numeric case. Note that the arithmetic operators and
comparison operators are permitted to be applied to state-fields and input parameters of the wrappered Java class
equivalents to the primitive numeric Java types. Two entities of the same abstract schema type are equal if and
only if they have the same primary key value. Only equality/inequality comparisons over enums are required to be
supported.</p>
<h2 class="anchor anchorWithStickyNavbar_L1yj" id="the-complete-jpql-bnf">The Complete JPQL BNF<a href="#the-complete-jpql-bnf" class="hash-link" aria-label="Direct link to The Complete JPQL BNF" title="Direct link to The Complete JPQL BNF">​</a></h2>
<p>The following is the BNF for the Java Persistence query language, from section 4.14 of the JSR 220 specification.</p>
<ul>
<li><code>QL_statement ::= select_statement | update_statement | delete_statement</code></li>
<li><code>select_statement ::= select_clause from_clause [where_clause] [groupby_clause] [having_clause] [orderby_clause]</code></li>
<li><code>update_statement ::= update_clause [where_clause]</code></li>
<li><code>delete_statement ::= delete_clause [where_clause]</code></li>
<li><code>from_clause ::= FROM identification_variable_declaration {, {identification_variable_declaration | collection_member_declaration}}*</code></li>
<li><code>identification_variable_declaration ::= range_variable_declaration { join | fetch_join }*</code></li>
<li><code>range_variable_declaration ::= abstract_schema_name [AS] identification_variable</code></li>
<li><code>join ::= join_spec join_association_path_expression [AS] identification_variable</code></li>
<li><code>fetch_join ::= join_spec FETCH join_association_path_expression</code></li>
<li><code>association_path_expression ::= collection_valued_path_expression | single_valued_association_path_expression</code></li>
<li><code>join_spec ::= [LEFT [OUTER]|INNER] JOIN</code></li>
<li><code>join_association_path_expression ::= join_collection_valued_path_expression | join_single_valued_association_path_expression</code></li>
<li><code>join_collection_valued_path_expression ::= identification_variable.collection_valued_association_field</code></li>
<li><code>join_single_valued_association_path_expression ::= identification_variable.single_valued_association_field</code></li>
<li><code>collection_member_declaration ::= IN (collection_valued_path_expression) [AS] identification_variable</code></li>
<li><code>single_valued_path_expression ::= state_field_path_expression | single_valued_association_path_expression</code></li>
<li><code>state_field_path_expression ::= {identification_variable | single_valued_association_path_expression}.state_field</code></li>
<li><code>single_valued_association_path_expression ::= identification_variable.{single_valued_association_field.}* single_valued_association_field</code></li>
<li><code>collection_valued_path_expression ::= identification_variable.{single_valued_association_field.}*collection_valued_association_field</code></li>
<li><code>state_field ::= {embedded_class_state_field.}*simple_state_field</code></li>
<li><code>update_clause ::= UPDATE abstract_schema_name [[AS] identification_variable] SET update_item {, update_item}*</code></li>
<li><code>update_item ::= [identification_variable.]{state_field | single_valued_association_field}= new_value</code></li>
<li><code>new_value ::= simple_arithmetic_expression | string_primary | datetime_primary | boolean_primary | enum_primary simple_entity_expression | NULL</code></li>
<li><code>delete_clause ::= DELETE FROM abstract_schema_name [[AS] identification_variable]</code></li>
<li><code>select_clause ::= SELECT [DISTINCT] select_expression {, select_expression}*</code></li>
<li><code>select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable | OBJECT(identification_variable)| constructor_expression</code></li>
<li><code>constructor_expression ::= NEW constructor_name( constructor_item {, constructor_item}*)</code></li>
<li><code>constructor_item ::= single_valued_path_expression | aggregate_expression</code></li>
<li><code>aggregate_expression ::= {AVG |MAX |MIN |SUM}([DISTINCT] state_field_path_expression) | COUNT ([DISTINCT] identification_variable | state_field_path_expression | single_valued_association_path_expression)</code></li>
<li><code>where_clause ::= WHERE conditional_expression</code></li>
<li><code>groupby_clause ::= GROUP BY groupby_item {, groupby_item}*</code></li>
<li><code>groupby_item ::= single_valued_path_expression | identification_variable</code></li>
<li><code>having_clause ::= HAVING conditional_expression</code></li>
<li><code>orderby_clause ::= ORDER BY orderby_item {, orderby_item}*</code></li>
<li><code>orderby_item ::= state_field_path_expression [ASC |DESC ]</code></li>
<li><code>subquery ::= simple_select_clause subquery_from_clause [where_clause] [groupby_clause] [having_clause]</code></li>
<li><code>subquery_from_clause ::= FROM subselect_identification_variable_declaration {, subselect_identification_variable_declaration}*</code></li>
<li><code>subselect_identification_variable_declaration ::= identification_variable_declaration | association_path_expression [AS] identification_variable | collection_member_declaration</code></li>
<li><code>simple_select_clause ::= SELECT [DISTINCT] simple_select_expression</code></li>
<li><code>simple_select_expression ::= single_valued_path_expression | aggregate_expression | identification_variable</code></li>
<li><code>conditional_expression ::= conditional_term | conditional_expression OR conditional_term</code></li>
<li><code>conditional_term ::= conditional_factor | conditional_term AND conditional_factor</code></li>
<li><code>conditional_factor ::= [NOT ] conditional_primary</code></li>
<li><code>conditional_primary ::= simple_cond_expression |(conditional_expression)</code></li>
<li><code>simple_cond_expression ::= comparison_expression | between_expression | like_expression | in_expression | null_comparison_expression | empty_collection_comparison_expression | collection_member_expression | exists_expression</code></li>
<li><code>between_expression ::= arithmetic_expression [NOT] BETWEEN arithmetic_expression AND arithmetic_expression | string_expression [NOT] BETWEEN string_expression AND string_expression | datetime_expression [NOT] BETWEEN datetime_expression AND datetime_expression</code></li>
<li><code>in_expression ::= state_field_path_expression [NOT] IN( in_item {, in_item}* | subquery)</code></li>
<li><code>in_item ::= literal | input_parameter</code></li>
<li><code>like_expression ::= string_expression [NOT] LIKE pattern_value [ESCAPE escape_character]</code></li>
<li><code>null_comparison_expression ::= {single_valued_path_expression | input_parameter}IS [NOT] NULL</code></li>
<li><code>empty_collection_comparison_expression ::= collection_valued_path_expression IS [NOT] EMPTY</code></li>
<li><code>collection_member_expression ::= entity_expression [NOT] MEMBER [OF] collection_valued_path_expression</code></li>
<li><code>exists_expression ::= [NOT] EXISTS(subquery)</code></li>
<li><code>all_or_any_expression ::= {ALL |ANY |SOME}(subquery)</code></li>
<li><code>comparison_expression ::= string_expressioncomparison_operator{string_expression|all_or_any_expression}| boolean_expression {=|&lt;&gt;} {boolean_expression | all_or_any_expression} | enum_expression {=|&lt;&gt;} {enum_expression | all_or_any_expression} | datetime_expression comparison_operator {datetime_expression | all_or_any_expression} | entity_expression {= |&lt;&gt; } {entity_expression | all_or_any_expression} | arithmetic_expression comparison_operator {arithmetic_expression | all_or_any_expression}</code></li>
<li><code>comparison_operator ::== |&gt; |&gt;= |&lt; |&lt;= |&lt;&gt;</code></li>
<li><code>arithmetic_expression ::= simple_arithmetic_expression |(subquery)</code></li>
<li><code>simple_arithmetic_expression ::= arithmetic_term | simple_arithmetic_expression {+ |- } arithmetic_term</code></li>
<li><code>arithmetic_term ::= arithmetic_factor | arithmetic_term {* |/ } arithmetic_factor</code></li>
<li><code>arithmetic_factor ::= [{+ |-}] arithmetic_primary</code></li>
<li><code>arithmetic_primary ::= state_field_path_expression | numeric_literal | (simple_arithmetic_expression) | input_parameter | functions_returning_numerics | aggregate_expression</code></li>
<li><code>string_expression ::= string_primary |(subquery)</code></li>
<li><code>string_primary ::= state_field_path_expression | string_literal | input_parameter | functions_returning_strings | aggregate_expression</code></li>
<li><code>datetime_expression ::= datetime_primary |(subquery)</code></li>
<li><code>datetime_primary ::= state_field_path_expression | input_parameter | functions_returning_datetime | aggregate_expression</code></li>
<li><code>boolean_expression ::= boolean_primary |(subquery)</code></li>
<li><code>boolean_primary ::= state_field_path_expression | boolean_literal | input_parameter |</code></li>
<li><code>enum_expression ::= enum_primary |(subquery)</code></li>
<li><code>enum_primary ::= state_field_path_expression | enum_literal | input_parameter |</code></li>
<li><code>entity_expression ::= single_valued_association_path_expression | simple_entity_expression</code></li>
<li><code>simple_entity_expression ::= identification_variable | input_parameter</code></li>
<li><code>functions_returning_numerics ::= LENGTH(string_primary)| LOCATE(string_primary,string_primary [, simple_arithmetic_expression]) | ABS(simple_arithmetic_expression) | SQRT(simple_arithmetic_expression) | MOD(simple_arithmetic_expression, simple_arithmetic_expression) | SIZE(collection_valued_path_expression)</code></li>
<li><code>functions_returning_datetime ::= CURRENT_DATE| CURRENT_TIME | CURRENT_TIMESTAMP</code></li>
<li><code>functions_returning_strings ::= CONCAT(string_primary, string_primary) | SUBSTRING(string_primary, simple_arithmetic_expression,simple_arithmetic_expression)| TRIM([[trim_specification] [trim_character] FROM] string_primary) | LOWER(string_primary) | UPPER(string_primary)</code></li>
<li><code>trim_specification ::= LEADING | TRAILING | BOTH</code></li>
</ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_oeFh"><div class="col"><b>Tags:</b><ul class="tags_Q1w9 padding--none margin-left--sm"><li class="tag_pe7_"><a class="tag_jhT7 tagRegular_pZRu" href="/blog/tags/java">Java</a></li><li class="tag_pe7_"><a class="tag_jhT7 tagRegular_pZRu" href="/blog/tags/jqpl">JQPL</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/QubitPi/chatbot-ws/tree/master/docs/blog/2020-10-28-jpql.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Hgua" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/put-vs-post"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">PUT v.s. POST</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/java-ee"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">What is Java EE</div></a></nav></main><div class="col col--2"><div class="tableOfContents_Bpof thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#caveats" class="table-of-contents__link toc-highlight">Caveats</a><ul><li><a href="#avoid-grouping-by-subset-of-columns-from-select" class="table-of-contents__link toc-highlight">Avoid GROUPing BY subset of columns from SELECT</a></li></ul></li><li><a href="#jpql-statement-types" class="table-of-contents__link toc-highlight">JPQL Statement Types</a><ul><li><a href="#jpql-select-statement" class="table-of-contents__link toc-highlight">JPQL Select Statement</a></li><li><a href="#jpql-update-and-delete-statements" class="table-of-contents__link toc-highlight">JPQL Update and Delete Statements</a></li></ul></li><li><a href="#jpql-abstract-schema-types-and-query-domains" class="table-of-contents__link toc-highlight">JPQL Abstract Schema Types and Query Domains</a><ul><li><a href="#jpql-entity-naming" class="table-of-contents__link toc-highlight">JPQL Entity Naming</a></li><li><a href="#jpql-schema-example" class="table-of-contents__link toc-highlight">JPQL Schema Example</a></li></ul></li><li><a href="#jpql-from-clause-and-navigational-declarations" class="table-of-contents__link toc-highlight">JPQL FROM Clause and Navigational Declarations</a><ul><li><a href="#jpql-from-identifiers" class="table-of-contents__link toc-highlight">JPQL FROM Identifiers</a></li><li><a href="#jpql-identification-variables" class="table-of-contents__link toc-highlight">JPQL Identification Variables</a></li><li><a href="#jpql-range-declarations" class="table-of-contents__link toc-highlight">JPQL Range Declarations</a></li><li><a href="#jpql-path-expressions" class="table-of-contents__link toc-highlight">JPQL Path Expressions</a></li><li><a href="#jpql-joins" class="table-of-contents__link toc-highlight">JPQL Joins</a></li><li><a href="#jpql-collection-member-declarations" class="table-of-contents__link toc-highlight">JPQL Collection Member Declarations</a></li><li><a href="#jpql-polymorphism" class="table-of-contents__link toc-highlight">JPQL Polymorphism</a></li></ul></li><li><a href="#jpql-where-clause" class="table-of-contents__link toc-highlight">JPQL <code>WHERE</code> Clause</a><ul><li><a href="#jpql-conditional-expressions" class="table-of-contents__link toc-highlight">JPQL Conditional Expressions</a></li></ul></li><li><a href="#jpql-group-by-having" class="table-of-contents__link toc-highlight">JPQL <code>GROUP BY</code>, <code>HAVING</code></a></li><li><a href="#jpql-select-clause" class="table-of-contents__link toc-highlight">JPQL <code>SELECT</code> Clause</a><ul><li><a href="#jpql-result-type-of-the-select-clause" class="table-of-contents__link toc-highlight">JPQL Result Type of the <code>SELECT</code> Clause</a></li><li><a href="#jpql-constructor-expressions" class="table-of-contents__link toc-highlight">JPQL Constructor Expressions</a></li><li><a href="#jpql-null-values-in-the-query-result" class="table-of-contents__link toc-highlight">JPQL Null Values in the Query Result</a></li><li><a href="#jpql-aggregate-functions" class="table-of-contents__link toc-highlight">JPQL Aggregate Functions</a></li></ul></li><li><a href="#jpql-order-by-clause" class="table-of-contents__link toc-highlight">JPQL <code>ORDER BY</code> Clause</a></li><li><a href="#jpql-bulk-update-and-delete" class="table-of-contents__link toc-highlight">JPQL Bulk Update and Delete</a></li><li><a href="#jpql-null-values" class="table-of-contents__link toc-highlight">JPQL Null Values</a></li><li><a href="#jpql-equality-and-comparison-semantics" class="table-of-contents__link toc-highlight">JPQL Equality and Comparison Semantics</a></li><li><a href="#the-complete-jpql-bnf" class="table-of-contents__link toc-highlight">The Complete JPQL BNF</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/QubitPi/chatbot-ws/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ANth"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/QubitPi/chatbot-ws" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_ANth"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Jiaqi Liu. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>